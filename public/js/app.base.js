!function(){"use strict";function e(e,t){function r(){e.workingMessage=f.defaultMessage}function a(e){h=e?!1:!0}function n(e){return d}function o(){g=!1}function s(){return g&&!h}function i(){return $(".loading-indicator").is(":visible")}function c(){this.setMessage(this.defaultMessage)}function l(t){d=e.workingMessage=t}function u(){g=!0}var d,g=!1,h=!1,f={defaultMessage:"Working on it",forceHide:a,getMessage:n,hide:o,isBusy:s,isVisible:i,resetMessage:c,setMessage:l,show:u};return r(),f}angular.module("busyService",[]).factory("busyService",e),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t){return e("api/leads/:id",{id:"@id"},{index:{method:"GET",url:"api/tradeshows/:tradeshowId/leads",params:{tradeshowId:"@tradeshowId"}},get:{cache:t.get("defaultCache")}})}angular.module("leadServices",[]).factory("Lead",e),e.$inject=["$resource","CacheFactory"]}(),function(){"use strict";function e(e,t,r,a,n){function o(t,r,a,n,o,s){return void 0===r&&(r="1"),void 0===n&&(n="updated_at"),void 0===o&&(o=0),void 0===a&&(a=15),void 0===s&&(s=""),e.get("api/tradeshows/"+t+"/leads?page="+r+"&perPage="+a+"&orderBy="+n+"&orderByReverse="+parseInt(o)+"&filter="+s,{cache:!0})}function s(e){var a=e.first_name+" "+e.last_name,o='<span class="glyphicon glyphicon-trash red icon-large"></span><span>Are you sure you want to delete Lead <em>'+a+'</em>?<br /><strong>This cannot be undone.</strong></span><div class="dialog-buttons"><button class="btn btn-danger" ng-click="confirm()">Yes, delete</button> <button class="btn btn-cancel" ng-click="closeThisDialog()">Cancel</button></div>';t.openConfirm({plain:!0,className:"dialog-destroy ngdialog-theme-default",template:o,showClose:!1}).then(function(){n.setMessage("Deleting"),r["delete"]({id:e.id}).$promise.then(function(e){e.hasOwnProperty("success")&&e.success===!0?t.open({plain:!0,className:"dialog-success ngdialog-theme-default",template:'<span class="glyphicon glyphicon-check green icon-large"></span><span>Lead <em>'+a+"</em> has been successfully deleted.</span>"}).closePromise.then(function(){window.location.reload()}):t.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Lead <em>'+a+"</em>.</span>  Please try again or contact support."})},function(e){t.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Lead <em>'+a+"</em>.</span>  Please try again or contact support."})})})}var i={deleteLead:s,retrieve:o};return i}angular.module("leadServices").factory("leadService",e),e.$inject=["$http","ngDialog","Lead","$rootScope","busyService"]}(),function(){"use strict";function e(e,t,r,a,n,o,s){function i(){var e=r.defer();return this.hasToken()?(t.isLoggedIn=!0,e.resolve()):(this.loginCancelled(),e.reject()),e.promise}function c(){var e=this.token.get();return void 0!==e&&null!==e}function l(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function u(e){var t=r.defer();return n.post("/api/authenticate",e,{cache:!1}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise}function d(e,r){o.rejectAll(r),t.$broadcast("event:auth-login-cancelled",e),this.logout()}function g(e,r){var a=r||function(e){return e};t.$broadcast("event:auth-logged-in",e),t.isLoggedIn=!0,o.retryAll(a)}function h(){this.token.remove(),e.go("auth")}function f(e){var t=r.defer(),a=this,o={cache:!1,headers:{}};return"undefined"!=typeof e&&(o.headers.Authorization="Bearer "+e),n.get("api/authenticate/refresh",o).then(function(e){a.token.set(e.data.token),a.loginConfirmed(),t.resolve(e)})["catch"](function(e){a.loginCancelled(),t.reject(e)}),t.promise}function p(){return w.get("token")}function m(){w.remove("token")}function v(e){w.put("token",e)}a.get("authCache")||new a("authCache",{maxAge:354e4,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(e,t){var r=s.get("loginService");r.refresh(t).then(function(t){w.put(e,t.data.token)})}});var w=a.get("authCache");t.isLoggedIn=void 0!==w.get("token");var y={checkApiAccess:i,hasToken:c,isValidEmail:l,login:u,loginCancelled:d,loginConfirmed:g,logout:h,refresh:f,token:{get:p,set:v,remove:m}};return y}angular.module("loginService",[]).factory("loginService",e),e.$inject=["$state","$rootScope","$q","CacheFactory","$http","httpBuffer","$injector"]}(),function(){"use strict";function e(e,t){function r(e){return e.id=s.length+1,s.push(e),e}function a(){return s}function n(e){s[e-1]&&s.splice(e-1,1)}function o(){s=[]}var s=[],i={addMessage:r,getMessages:a,purge:o,removeMessage:n};return i}angular.module("messageService",[]).factory("messageService",e),e.$inject=["$timeout","$q"]}(),function(){"use strict";function e(){function e(e,t){this.menus[e]=t}function t(){function e(e,t){var r="";for(var a in e.items){var n=e.items[a],o=n.title||a,s='<a title="'+o+'"';s+=n.hasOwnProperty("url")?' href="/#/'+n.url+'"':' href="javascript:void(0)"',n.hasOwnProperty("click")&&(s+=' ng-click="'+n.click+'"'),s+=">"+o+"</a>",r+="<li>"+s+"</li>"}return"<ul>"+r+"</ul>"}var t={menus:this.menus,buildMenu:e};return t}return this.menus={},this.registerMenu=e,this.$get=t,this}angular.module("slideMenuService",[]).provider("slideMenuService",e)}(),function(){"use strict";function e(e,t){return e("api/tradeshows/:id",{id:"@id"},{get:{cache:t.get("defaultCache")},create:{method:"POST",url:"api/tradeshows/create"},"delete":{method:"DELETE"}})}angular.module("tradeshowServices",["ngResource"]).factory("Tradeshow",e),e.$inject=["$resource","CacheFactory"]}(),function(){"use strict";function e(e,t,r,a,n){function o(e){var r=e.name,o=e.id;i=a.openConfirm({plain:!0,className:"dialog-destroy ngdialog-theme-default",template:'<span class="glyphicon glyphicon-trash red icon-large"></span><span>Are you sure you want to delete Tradeshow <em>'+r+'</em>?<br /><strong>This cannot be undone.</strong></span><div class="dialog-buttons"><button class="btn btn-danger" ng-click="confirm()">Yes, delete</button> <button class="btn btn-cancel" ng-click="closeThisDialog()">Cancel</button></div>',showClose:!1}).then(function(){n.setMessage("Deleting"),t["delete"]({tradeshowId:o}).$promise.then(function(e){e.hasOwnProperty("success")&&e.success===!0?a.open({plain:!0,className:"dialog-success ngdialog-theme-default",template:'<span class="glyphicon glyphicon-check green icon-large"></span><span>Tradeshow <em>'+r+"</em> has been successfully deleted.</span>"}).closePromise.then(function(){window.location.reload()}):a.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Tradeshow <em>'+r+"</em>.</span>  Please try again or contact support."})},function(e){a.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Tradeshow <em>'+r+"</em>.</span>  Please try again or contact support."})})})}function s(t,r,a,n,o){return void 0===t&&(t="1"),void 0===a&&(a="id"),void 0===n&&(n=0),void 0===r&&(r=15),void 0===o&&(o=""),e.get("api/tradeshows?page="+t+"&perPage="+r+"&orderBy="+a+"&orderByReverse="+parseInt(n)+"&filter="+o,{cache:!0})}var i,c={retrieve:s,deleteTradeshow:o};return c}angular.module("tradeshowServices").factory("tradeshowService",e),e.$inject=["$http","Tradeshow","$rootScope","ngDialog","busyService"]}(),function(){"use strict";function e(e,t,r){function a(r,a,n){function o(){t.$on("$stateChangeStart",function(){console.log(r),e.resetMessage(),e.show()}),t.$on("$stateChangeSuccess",function(){e.hide()})}function s(){return e.isBusy()}t.isBusy=s,o()}var n={restrict:"E",templateUrl:"../partials/busy-indicator.html",replace:!0,link:a};return n}angular.module("tsportalDirectives",[]).directive("busyIndicator",e),e.$inject=["busyService","$rootScope","$timeout"]}(),function(){"use strict";function e(){function e(e,t,r){t.addClass("clickable"),t.on("click",function(e){null===navigator.userAgent.match(/PhantomJS/g)&&(t.siblings().removeClass("active"),t.addClass("active"))})}var t={restict:"A",link:e};return t}angular.module("tsportalDirectives").directive("clickable",e)}(),function(){"use strict";function e(e,t,r){function a(a,n,o){var s=a.hasOwnProperty("ctrl")?a.ctrl:a;a.$watch(function(){return e.getMessages()},function(e,t){"undefined"!=typeof e&&(s.messages=e)}),t.$on("$stateChangeSuccess",function(){e.purge()}),s.addMessage=function(t){t=e.addMessage(t),r(function(){$(".messages .alert[message-id="+t.id+"]").addClass("in")})},s.removeMessage=function(t){$(".messages .alert[message-id="+t+"]").on("transitionend",function(){a.$apply()}).css("opacity",0),r(function(){e.removeMessage(t)})},s.addSuccessMessage=function(e){var t={icon:"ok",type:"success",iconClass:"icon-medium",dismissible:!0,message:"Your changes have been saved"};return e=$.extend(t,e),s.addMessage(e)},s.addErrorMessage=function(e){var t={type:"danger",dismissible:!0,icon:"exclamation-sign",iconClass:"icon-medium",message:"Sorry, something went wrong."};return e=$.extend(t,e),s.addMessage(e)},s.purgeMessages=function(){e.purge()}}var n={restrict:"E",templateUrl:"../partials/messages.html",replace:!0,link:a};return n}angular.module("tsportalDirectives").directive("messages",e),e.$inject=["messageService","$rootScope","$timeout"]}(),function(){"use strict";function e(){function e(e,t,r){e.getRange=function(e){return new Array(e)}}var t={restrict:"E",scope:{currentPage:"=",totalPages:"=",getResults:"&getResults",tradeshow:"="},templateUrl:"../partials/pager.html",link:e};return t}angular.module("tsportalDirectives").directive("pager",e)}(),function(){"use strict";function e(e,t,r,a){function n(e,n,o){function s(){t.$on("$stateChangeStart",function(){u.hide()})}function i(){u.hide()}function c(t,o){if(r.menus&&r.menus.hasOwnProperty(t)){e[t]=o;var s=r.menus[t],i=a("<h3>"+s.title+"</h3>")(e);n.find("h3").html(i);var c=r.buildMenu(s,o),l=a(c)(e);n.find(".slide-menu-content").html(l),u.show()}}function l(e){u.setAlignment(e)}e.alignment=e.alignment||(window.outerWidth<=768?"bottom":"right");var u={hide:function(){n.removeClass("visible")},show:function(){n.addClass("visible")},setAlignment:function(t){e.alignment=t,n.attr("alignment",t)}};e.openMenu=c,e.closeMenu=i,e.setAlignment=l,s()}var o={restrict:"E",replace:!0,transclude:!0,templateUrl:"../partials/slide-menu-directive.html",link:n};return o}angular.module("tsportalDirectives").directive("slideMenu",e),e.$inject=["$timeout","$rootScope","slideMenuService","$compile"]}(),function(){"use strict";function e(){function e(e,t,r){e.getTimeAgo=function(e){return moment(e,moment.ISO_8601).fromNow()}}var t={restrict:"E",scope:{time:"="},template:'<span class="time-ago">{{getTimeAgo(time)}}</span>',link:e};return t}angular.module("tsportalDirectives").directive("timeago",e)}(),function(){"use strict";function e(e){function t(e,t){s.push({config:e,deferred:t})}function r(e){if(e)for(var t=0;t<s.length;++t)s[t].deferred.reject(e);s=[]}function a(e){for(var t=0;t<s.length;++t)n(e(s[t].config),s[t].deferred);s=[]}function n(t,r){function a(e){r.resolve(e)}function n(e){r.reject(e)}o=o||e.get("$http"),o(t).then(a,n)}var o,s=[],i={append:t,rejectAll:r,retryAll:a,retryHttpRequest:n};return i}function t(e,t,r,a){var n,o,s,i=/\/{0,1}api\/[a-zA-Z\/0-9\?\=\&\%\+\-\_]*/g;return{request:function(t){return n=n||e.get("loginService"),t.url.match(i)&&"/api/authenticate"!=t.url&&!t.headers.hasOwnProperty("Authorization")&&(n.hasToken()?t.headers.Authorization="Bearer "+n.token.get():(s=s||e.get("$state"),s.go("auth"))),t},response:function(t){var r=t.config;return"/api/authenticate"==r.url&&"POST"==r.method&&200==t.status&&(n=n||e.get("loginService"),t.data.hasOwnProperty("token")&&(n.token.set(t.data.token),n.loginConfirmed())),t},responseError:function(i){var c=r.defer();switch(n=n||e.get("loginService"),s=s||e.get("$state"),i.status){case 400:n.loginCancelled();break;case 401:if(i.data.hasOwnProperty("error")&&"token_expired"==i.data.error)return a.append(i.config,c),t.$broadcast("event:auth-login-required",i),n.hasToken()&&n.refresh(),c.promise;break;case 403:t.$broadcast("event:auth-forbidden",i),n.loginCancelled();break;case 500:o=o||e.get("ngDialog"),o.open({plain:!0,className:"dialog-save ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>Sorry, something went wrong.  Try again later.</span>'})}return c.reject(i),c.promise}}}angular.module("authInterceptor",[]).factory("httpBuffer",e).config(["$httpProvider",function(e){e.interceptors.push(t)}]),e.$inject=["$injector"],t.$inject=["$injector","$rootScope","$q","httpBuffer"]}(),function(){"use strict";function e(e,t){var r=/\/{0,1}api\/[a-zA-Z\/0-9\?\=\&\%\+\-\_]*/g;return{request:function(t){return t.url.match(r)&&e.show(),t},response:function(t){return t.config.url.match(r)&&e.hide(),t},responseError:function(a){return a.config.url.match(r)&&e.hide(),t.reject(a)}}}angular.module("busyService").config(["$httpProvider",function(t){t.interceptors.push(e)}]),e.$inject=["busyService","$q"]}(),function(){"use strict";function e(e,t,r,a,n,o){function s(){o.get("loginForm")||new o("loginForm",{maxAge:24192e5,deleteOnExpire:"aggressive",storageMode:"localStorage"}),c.cache=o.get("loginForm"),c.cache.get("rememberMe")&&c.cache.get("email")&&(c.rememberMe=c.cache.get("rememberMe"),c.email=c.cache.get("email")),a.hasToken()&&r.go("tradeshows")}function i(){var e={email:c.email,password:c.password};c.purgeMessages(),a.login(e).then(function(e){c.rememberMe&&(c.cache.put("email",c.email),c.cache.put("rememberMe",c.rememberMe)),r.go("tradeshows")})["catch"](function(e){c.addErrorMessage({message:"The email or password entered was incorrect."})})}var c=this;c.cache=null,c.rememberMe=!1,c.login=i,s()}angular.module("authControllers",[]).controller("AuthController",e),e.$inject=["$rootScope","$scope","$state","loginService","$timeout","CacheFactory"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i,c,l,u,d,g){function h(){}function f(){a.go("tradeshowEdit",{id:m.lead.tradeshow_id})}function p(){m.leadForm.$valid&&(c.setMessage("Saving"),s.save(m.lead).$promise.then(function(e){m.lead=e,m.addSuccessMessage(),r.defaults.cache.removeAll()})["catch"](function(e){m.addErrorMessage()}))}var m=this;m.goBack=f,m.save=p,m.lead=u,m.title="Editing Lead",h()}angular.module("leadControllers",[]).controller("LeadController",e),e.$inject=["$scope","$q","$http","$state","$stateParams","ngDialog","Lead","Tradeshow","busyService","messageService","leadData","$timeout","$log"]}(),function(){"use strict";function e(e){e.logout()}angular.module("authControllers").controller("LogoutController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i,c){function l(){s.checkApiAccess()}function u(){r.go("tradeshows")}function d(){g.tradeshowForm.$valid&&(i.setMessage("Saving new"),o.create(g.tradeshow).$promise.then(function(e){var t=e.id;n.open({plain:!0,className:"dialog-save ngdialog-theme-default",template:'<span class="glyphicon glyphicon-check green icon-large"></span><span>Your new tradeshow has been created successfully.  Close this message box to proceed to the tradeshow\'s edit page.</span>'}).closePromise.then(function(e){r.go("tradeshowEdit",{id:t})})})["catch"](function(e){g.addErrorMessage()}))}var g=this;g.goBack=u,g.save=d,g.isNew=!0,g.titlePrefix="Creating new",g.tradeshow={active:0},l()}angular.module("tradeshowControllers",[]).controller("TradeshowCreateController",e),e.$inject=["$scope","$timeout","$state","$stateParams","ngDialog","Tradeshow","loginService","busyService","messageService"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i,c,l,u,d,g,h){function f(){angular.forEach(["currentPage","orderBy","omg","orderByReverse","perPage","query"],function(t){S.formCache.get(t)&&(S[t]=S.formCache.get(t)),e.$watch("ctrl."+t,function(e,r){"undefined"!=typeof e&&S.formCache.put(t,e)})})}function p(e){u.deleteLead(S.pluckLead(e))}function m(e){void 0===e&&(e=S.currentPage),S.lastFetchedPage=e;var r=t.defer();return u.retrieve(S.tradeshow.id,e,S.perPage,S.orderBy,S.orderByReverse,S.query).then(function(e){var t=e.data;S.leads=t.data,S.currentPage=t.current_page,S.totalPages=t.last_page,r.resolve(e)})["catch"](function(e){r.reject(e)}),r.promise}function v(){n.go("tradeshows")}function w(e){for(var t,r=0;t=S.leads[r];r++)if(t.id==e)return t;return!1}function y(){S.getLeads().then(function(e){S.lastFetchedPage>e.data.current_page&&S.getLeads(e.data.last_page)})}function $(){S.tradeshowForm.$valid&&(i.setMessage("Saving"),l.save(S.tradeshow).$promise.then(function(e){S.tradeshow=e,S.addSuccessMessage(),r.defaults.cache.removeAll()})["catch"](function(e){S.addErrorMessage()}))}function C(){1!=S.currentPage&&S.getLeads(1)}var S=this;S.deleteLead=p,S.getLeads=m,S.goBack=v,S.pluckLead=w,S.refreshLeads=y,S.save=$,S.updatePagination=C,S.currentPage=g.data.current_page,S.formCache=h,S.isNew=!1,S.lastFetchedPage=1,S.leads=g.data.data,S.orderBy="updated_at",S.orderByReverse="0",S.perPage="15",S.query="",S.titlePrefix="Editing",S.tradeshow=d,S.totalPages=g.data.last_page,f()}angular.module("tradeshowControllers").controller("TradeshowDetailController",e),e.$inject=["$scope","$q","$http","CacheFactory","$state","ngDialog","loginService","busyService","messageService","Tradeshow","leadService","promisedData","promisedLeadData","promisedFormCache"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i,c,l,u,d){function g(){angular.forEach(["currentPage","orderBy","orderByReverse","perPage","query"],function(t){var r=y.formCache.get(t);void 0!==r&&null!==r&&(y[t]=r),e.$watch("ctrl."+t,function(e,r){"undefined"!=typeof e&&y.formCache.put(t,e)})})}function h(e){var t=y.pluckTradeshow(e);c.deleteTradeshow(t)}function f(e){window.location.href="/api/tradeshows/"+e+"/report?token="+o.token.get()}function p(e,t){s.forceHide(),void 0===t?t=y.selectedTradeshow:y.selectedTradeshow=t,r(function(){l.retrieve(t.id,e,50,"id",0).then(function(e){s.forceHide(!0);var t=e.data;y.leads=t.data,y.leadCurrentPage=t.current_page,y.leadTotalPages=t.last_page})["catch"](function(e){y.addErrorMessage()})})}function m(e){void 0===e&&(e=y.currentPage),y.lastFetchedPage=e,s.setMessage("Working on it");var r=t.defer();return c.retrieve(e,y.perPage,y.orderBy,y.orderByReverse,y.query).then(function(e){var t=e.data;y.tradeshows=t.data,y.currentPage=t.current_page,y.totalPages=t.last_page,r.resolve(e)})["catch"](function(e){r.reject(e)}),r.promise}function v(e){for(var t,r=0;t=y.tradeshows[r];r++)if(t.id==e)return t;return!1}function w(){y.getTradeshows().then(function(e){y.lastFetchedPage>e.data.current_page&&y.getTradeshows(e.data.last_page)})}var y=this;y.deleteTradeshow=h,y.downloadReport=f,y.getLeads=p,y.getTradeshows=m,y.pluckTradeshow=v,y.refreshTradeshows=w,y.currentPage=u.data.current_page,y.formCache=d,y.lastFetchedPage=1,y.orderBy="updated_at",y.orderByReverse="0",y.perPage="15",y.query="",y.totalPages=u.data.last_page,y.tradeshows=u.data.data,g()}angular.module("tradeshowControllers").config(["slideMenuServiceProvider",function(e){e.registerMenu("tradeshow",{title:"Tradeshow {{tradeshow.name}}",items:{edit:{url:"tradeshows/{{tradeshow.id}}/edit",title:"Edit"},"delete":{click:"ctrl.deleteTradeshow(tradeshow.id)",title:"Delete"},report:{click:"ctrl.downloadReport(tradeshow.id)",title:"Excel Report"}}}),e.registerMenu("lead",{title:"Lead {{lead.email_address}}",items:{edit:{url:"leads/{{lead.id}}/edit",title:"Edit"}}})}]).controller("TradeshowListController",e),e.$inject=["$scope","$q","$timeout","CacheFactory","ngDialog","loginService","busyService","messageService","tradeshowService","leadService","promisedData","promisedFormCache"]}(),function(){"use strict";angular.module("tsportal",["ui.router","angular-jwt","angular-cache","angular-spinkit","ngAnimate","ngDialog","frapontillo.bootstrap-switch","tsportalDirectives","loginService","busyService","messageService","slideMenuService","authInterceptor","authControllers","tradeshowControllers","tradeshowServices","leadControllers","leadServices"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e,t,r){r.useLegacyPromiseExtensions=!1,t.otherwise("/auth"),e.state("auth",{url:"/auth",templateUrl:"../partials/login-form.html",controller:"AuthController as ctrl"}).state("logout",{url:"/logout",template:"",controller:"LogoutController as ctrl"}).state("tradeshows",{url:"/tradeshows",templateUrl:"../partials/tradeshow-list.html",controller:"TradeshowListController as ctrl",resolve:{promisedData:["tradeshowService","CacheFactory",function(e,t){t.get("formCache")||new t("formCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage"});var r=t.get("formCache");return e.retrieve(r.get("currentPage"),r.get("perPage"),r.get("orderBy"),r.get("orderByReverse"),r.get("query"))}],promisedFormCache:["CacheFactory",function(e){return e.get("formCache")}]}}).state("tradeshowEdit",{url:"/tradeshows/:id/edit",templateUrl:"../partials/tradeshow-detail.html",controller:"TradeshowDetailController as ctrl",resolve:{promisedData:["Tradeshow","$stateParams",function(e,t){return e.get({id:t.id}).$promise}],promisedLeadData:["leadService","$stateParams","CacheFactory",function(e,t,r){var a="tradeshow"+t.id+"LeadsForm";r.get(a)||new r(a,{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage"});var n=r.get(a);return e.retrieve(t.id,n.get("currentPage"),n.get("perPage"),n.get("orderBy"),n.get("orderByReverse"),n.get("query"))}],promisedFormCache:["CacheFactory","$stateParams",function(e,t){var r="tradeshow"+t.id+"LeadsForm";return e.get(r)}]}}).state("tradeshowCreate",{url:"/tradeshows/create",templateUrl:"../partials/tradeshow-detail.html",controller:"TradeshowCreateController as ctrl"}).state("leadEdit",{url:"/leads/:id/edit",templateUrl:"../partials/lead-detail.html",controller:"LeadController as ctrl",resolve:{leadData:["Lead","$stateParams",function(e,t){return e.get({id:t.id}).$promise}]}})}]).run(["$http","CacheFactory",function(e,t){t.get("defaultCache")||new t("defaultCache",{maxAge:9e5,cacheFlushInterval:36e5,deleteOnExpire:"aggressive"}),e.defaults.cache=t.get("defaultCache")}]).filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1c3lTZXJ2aWNlLmpzIiwicHVibGljL2pzL2FwcC5iYXNlLmpzIiwibGVhZFJlc291cmNlLmpzIiwibGVhZFNlcnZpY2UuanMiLCJsb2dpblNlcnZpY2UuanMiLCJtZXNzYWdlU2VydmljZS5qcyIsInNsaWRlTWVudVNlcnZpY2UuanMiLCJ0cmFkZXNob3dSZXNvdXJjZS5qcyIsInRyYWRlc2hvd1NlcnZpY2UuanMiLCJidXN5SW5kaWNhdG9yRGlyZWN0aXZlLmpzIiwiY2xpY2thYmxlRGlyZWN0aXZlLmpzIiwibWVzc2FnZXNEaXJlY3RpdmUuanMiLCJwYWdlckRpcmVjdGl2ZS5qcyIsInNsaWRlTWVudURpcmVjdGl2ZS5qcyIsInRpbWVhZ29EaXJlY3RpdmUuanMiLCJhdXRoSW50ZXJjZXB0b3IuanMiLCJidXN5U2VydmljZUludGVyY2VwdG9yLmpzIiwiYXV0aENvbnRyb2xsZXIuanMiLCJsZWFkQ29udHJvbGxlci5qcyIsImxvZ291dENvbnRyb2xsZXIuanMiLCJ0cmFkZXNob3dDcmVhdGVDb250cm9sbGVyLmpzIiwidHJhZGVzaG93RGV0YWlsQ29udHJvbGxlci5qcyIsInRyYWRlc2hvd0xpc3RDb250cm9sbGVyLmpzIiwiYXBwLmFuZ3VsYXIuanMiXSwibmFtZXMiOlsiYnVzeVNlcnZpY2UiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCJhY3RpdmF0ZSIsIndvcmtpbmdNZXNzYWdlIiwic2VydmljZSIsImRlZmF1bHRNZXNzYWdlIiwiZm9yY2VIaWRlIiwicmVzZXQiLCJoaWRkZW5CeUZvcmNlIiwiZ2V0TWVzc2FnZSIsIm1zZyIsIm1lc3NhZ2UiLCJoaWRlIiwiYW1JQnVzeSIsImlzQnVzeSIsImlzVmlzaWJsZSIsIiQiLCJpcyIsInJlc2V0TWVzc2FnZSIsInRoaXMiLCJzZXRNZXNzYWdlIiwic2hvdyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJGluamVjdCIsIkxlYWQiLCIkcmVzb3VyY2UiLCJDYWNoZUZhY3RvcnkiLCJpZCIsImluZGV4IiwibWV0aG9kIiwidXJsIiwicGFyYW1zIiwidHJhZGVzaG93SWQiLCJnZXQiLCJjYWNoZSIsImxlYWRTZXJ2aWNlIiwiJGh0dHAiLCJuZ0RpYWxvZyIsInJldHJpZXZlIiwidHJhZGVob3dfaWQiLCJwYWdlTnVtYmVyIiwicGVyUGFnZSIsIm9yZGVyQnkiLCJvcmRlckJ5UmV2ZXJzZSIsImZpbHRlciIsInVuZGVmaW5lZCIsInBhcnNlSW50IiwiZGVsZXRlTGVhZCIsImxlYWQiLCJsZWFkX25hbWUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZGlhbG9nX2h0bWwiLCJvcGVuQ29uZmlybSIsInBsYWluIiwiY2xhc3NOYW1lIiwidGVtcGxhdGUiLCJzaG93Q2xvc2UiLCJ0aGVuIiwiJHByb21pc2UiLCJwYXlsb2FkIiwiaGFzT3duUHJvcGVydHkiLCJzdWNjZXNzIiwib3BlbiIsImNsb3NlUHJvbWlzZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXJyb3JSZXNwb25zZSIsImxvZ2luU2VydmljZSIsIiRzdGF0ZSIsIiRxIiwiaHR0cEJ1ZmZlciIsIiRpbmplY3RvciIsImNoZWNrQXBpQWNjZXNzIiwiZGVmZXJyZWQiLCJkZWZlciIsImhhc1Rva2VuIiwiaXNMb2dnZWRJbiIsInJlc29sdmUiLCJsb2dpbkNhbmNlbGxlZCIsInJlamVjdCIsInByb21pc2UiLCJ0IiwidG9rZW4iLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsInBhdHRlcm4iLCJ0ZXN0IiwibG9naW4iLCJjcmVkZW50aWFscyIsInBvc3QiLCJkYXRhIiwicmVhc29uIiwicmVqZWN0QWxsIiwiJGJyb2FkY2FzdCIsImxvZ291dCIsImxvZ2luQ29uZmlybWVkIiwiY29uZmlnVXBkYXRlciIsInVwZGF0ZXIiLCJjb25maWciLCJyZXRyeUFsbCIsInJlbW92ZSIsImdvIiwicmVmcmVzaCIsInRva2VuU3RyaW5nIiwidGhhdCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic2V0IiwidG9rZW5HZXQiLCJ0b2tlblJlbW92ZSIsInRva2VuU2V0IiwicHV0IiwibWF4QWdlIiwiZGVsZXRlT25FeHBpcmUiLCJzdG9yYWdlTW9kZSIsIm9uRXhwaXJlIiwia2V5IiwidmFsdWUiLCJzdmMiLCJtZXNzYWdlU2VydmljZSIsImFkZE1lc3NhZ2UiLCJtZXNzYWdlcyIsImxlbmd0aCIsInB1c2giLCJnZXRNZXNzYWdlcyIsInJlbW92ZU1lc3NhZ2UiLCJzcGxpY2UiLCJwdXJnZSIsInNsaWRlTWVudVByb3ZpZGVyIiwicmVnaXN0ZXJNZW51IiwibmFtZSIsIm1lbnVzIiwic2xpZGVNZW51U2VydmljZSIsImJ1aWxkTWVudSIsIm9iaiIsImh0bWwiLCJhY3Rpb25OYW1lIiwiaXRlbXMiLCJhY3Rpb24iLCJ0aXRsZSIsImxpbmsiLCJjbGljayIsIiRnZXQiLCJwcm92aWRlciIsIlRyYWRlc2hvdyIsImNyZWF0ZSIsImRlbGV0ZSIsInRyYWRlc2hvd1NlcnZpY2UiLCJkZWxldGVUcmFkZXNob3ciLCJ0cmFkZXNob3ciLCJ0cmFkZXNob3dfbmFtZSIsInRyYWRlc2hvd19pZCIsImFjdGl2ZURpYWxvZyIsImJ1c3lJbmRpY2F0b3JEaXJlY3RpdmUiLCJidXN5SW5kaWNhdG9yRGlyZWN0aXZlTGluayIsInNjb3BlIiwiZWxlbSIsImF0dHJzIiwiJG9uIiwiY29uc29sZSIsImxvZyIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwidGVtcGxhdGVVcmwiLCJyZXBsYWNlIiwiY2xpY2thYmxlRGlyZWN0aXZlIiwiY2xpY2thYmxlRGlyZWN0aXZlTGluayIsImFkZENsYXNzIiwib24iLCIkZXZlbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJyZXN0aWN0IiwibWVzc2FnZXNEaXJlY3RpdmUiLCJtZXNzYWdlc0RpcmVjdGl2ZUxpbmsiLCJ2bSIsImN0cmwiLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCIkYXBwbHkiLCJjc3MiLCJhZGRTdWNjZXNzTWVzc2FnZSIsImRlZmF1bHRzIiwiaWNvbiIsInR5cGUiLCJpY29uQ2xhc3MiLCJkaXNtaXNzaWJsZSIsImV4dGVuZCIsImFkZEVycm9yTWVzc2FnZSIsInB1cmdlTWVzc2FnZXMiLCJwYWdlckRpcmVjdGl2ZSIsInBhZ2VyRGlyZWN0aXZlTGluayIsImdldFJhbmdlIiwibnVtIiwiQXJyYXkiLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJnZXRSZXN1bHRzIiwic2xpZGVNZW51RGlyZWN0aXZlIiwiJGNvbXBpbGUiLCJzbGlkZU1lbnVEaXJlY3RpdmVMaW5rIiwiJHNjb3BlIiwic2xpZGVNZW51IiwiY2xvc2VNZW51Iiwib3Blbk1lbnUiLCJtZW51TmFtZSIsIm1lbnUiLCJjb21waWxlZFRpdGxlIiwiZmluZCIsImJ1aWx0IiwiY29tcGlsZWQiLCJzZXRBbGlnbm1lbnQiLCJwb3MiLCJhbGlnbm1lbnQiLCJvdXRlcldpZHRoIiwiYXR0ciIsInRyYW5zY2x1ZGUiLCJ0aW1lYWdvRGlyZWN0aXZlIiwidGltZWFnb0RpcmVjdGl2ZUxpbmsiLCJnZXRUaW1lQWdvIiwidGltZSIsIm1vbWVudCIsIklTT184NjAxIiwiZnJvbU5vdyIsImFwcGVuZCIsImJ1ZmZlciIsImkiLCJyZXRyeUh0dHBSZXF1ZXN0Iiwic3VjY2Vzc0NhbGxiYWNrIiwicmVzcG9uc2UiLCJlcnJvckNhbGxiYWNrIiwiYXV0aEludGVyY2VwdG9yIiwiYXBpUGF0dGVybiIsInJlcXVlc3QiLCJzdGF0dXMiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwiZXJyb3IiLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwiYnVzeVNlcnZpY2VJbnRlcmNlcHRvciIsIkF1dGhDb250cm9sbGVyIiwicmVtZW1iZXJNZSIsInBhc3N3b3JkIiwiY29udHJvbGxlciIsIkxlYWRDb250cm9sbGVyIiwiJHN0YXRlUGFyYW1zIiwibGVhZERhdGEiLCIkbG9nIiwiZ29CYWNrIiwic2F2ZSIsImxlYWRGb3JtIiwiJHZhbGlkIiwicmVtb3ZlQWxsIiwiTG9nb3V0Q29udHJvbGxlciIsIlRyYWRlc2hvd0NyZWF0ZUNvbnRyb2xsZXIiLCJ0cmFkZXNob3dGb3JtIiwiaXNOZXciLCJ0aXRsZVByZWZpeCIsImFjdGl2ZSIsIlRyYWRlc2hvd0RldGFpbENvbnRyb2xsZXIiLCJwcm9taXNlZERhdGEiLCJwcm9taXNlZExlYWREYXRhIiwicHJvbWlzZWRGb3JtQ2FjaGUiLCJmb3JFYWNoIiwiZm9ybUNhY2hlIiwibGVhZF9pZCIsInBsdWNrTGVhZCIsImdldExlYWRzIiwibGFzdEZldGNoZWRQYWdlIiwicXVlcnkiLCJsZWFkcyIsImN1cnJlbnRfcGFnZSIsImxhc3RfcGFnZSIsIm4iLCJyZWZyZXNoTGVhZHMiLCJ1cGRhdGVQYWdpbmF0aW9uIiwiVHJhZGVzaG93TGlzdENvbnRyb2xsZXIiLCJ2YXJOYW1lIiwidmFsIiwicGx1Y2tUcmFkZXNob3ciLCJkb3dubG9hZFJlcG9ydCIsImhyZWYiLCJzZWxlY3RlZFRyYWRlc2hvdyIsImxlYWRDdXJyZW50UGFnZSIsImxlYWRUb3RhbFBhZ2VzIiwiZ2V0VHJhZGVzaG93cyIsInRyYWRlc2hvd3MiLCJyZWZyZXNoVHJhZGVzaG93cyIsInNsaWRlTWVudVNlcnZpY2VQcm92aWRlciIsImVkaXQiLCJyZXBvcnQiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInVzZUxlZ2FjeVByb21pc2VFeHRlbnNpb25zIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJjYWNoZUtleSIsInJ1biIsImNhY2hlRmx1c2hJbnRlcnZhbCIsIiRzY2UiLCJ0cnVzdEFzSHRtbCJdLCJtYXBwaW5ncyI6IkNBSUEsV0FFQSxZQU1BLFNBQUFBLEdBQUFDLEVBQUFDLEdBcUJBLFFBQUFDLEtBQ0FGLEVBQUFHLGVBQUFDLEVBQUFDLGVBR0EsUUFBQUMsR0FBQUMsR0FDQUMsRUFBQUQsR0FBQSxHQUFBLEVBR0EsUUFBQUUsR0FBQUMsR0FDQSxNQUFBQyxHQUdBLFFBQUFDLEtBQ0FDLEdBQUEsRUFHQSxRQUFBQyxLQUNBLE1BQUFELEtBQUFMLEVBR0EsUUFB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QkFDQXVJLFlBQUEsK0JBQ0FxRixXQUFBLHlCQUNBM0ssU0FDQThLLFVBQUEsT0FBQSxlQUFBLFNBQUFyTyxFQUFBb08sR0FDQSxNQUFBcE8sR0FBQVMsS0FBQU4sR0FBQWlPLEVBQUFqTyxLQUFBZ0MsaUJBS0FxUCxLQUFBLFFBQUEsZUFBQSxTQUFBNVEsRUFBQVYsR0FDQUEsRUFBQU8sSUFBQSxpQkFDQSxHQUFBUCxHQUFBLGdCQUNBd0YsT0FBQSxJQUNBK0wsbUJBQUEsS0FDQTlMLGVBQUEsZUFJQS9FLEVBQUF3SixTQUFBMUosTUFBQVIsRUFBQU8sSUFBQSxtQkFFQVcsT0FBQSxVQUFBLE9BQUEsU0FBQXNRLEdBQ0EsTUFBQSxVQUFBckIsR0FDQSxNQUFBcUIsR0FBQUMsWUFBQXRCIiwiZmlsZSI6InB1YmxpYy9qcy9hcHAuYmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQnVzeSBJbmRpY2F0b3IgU2VydmljZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2J1c3lTZXJ2aWNlJyxbXSlcblx0XHQuZmFjdG9yeSgnYnVzeVNlcnZpY2UnLCBidXN5U2VydmljZSk7XG5cblx0ZnVuY3Rpb24gYnVzeVNlcnZpY2UoJHJvb3RTY29wZSwgJHRpbWVvdXQpIHtcblx0XHR2YXIgbWVzc2FnZSwgdGltZXIsIGFtSUJ1c3kgPSBmYWxzZSwgaGlkZGVuQnlGb3JjZSA9IGZhbHNlO1xuXG5cdFx0dmFyIHNlcnZpY2UgPSB7XG5cdFx0XHRkZWZhdWx0TWVzc2FnZTogJ1dvcmtpbmcgb24gaXQnLFxuXHRcdFx0Zm9yY2VIaWRlOiBmb3JjZUhpZGUsXG5cdFx0XHRnZXRNZXNzYWdlOiBnZXRNZXNzYWdlLFxuXHRcdFx0aGlkZTogaGlkZSxcblx0XHRcdGlzQnVzeTogaXNCdXN5LFxuXHRcdFx0aXNWaXNpYmxlOiBpc1Zpc2libGUsXG5cdFx0XHRyZXNldE1lc3NhZ2U6IHJlc2V0TWVzc2FnZSxcblx0XHRcdHNldE1lc3NhZ2U6IHNldE1lc3NhZ2UsXG5cdFx0XHRzaG93OiBzaG93XG5cdFx0fTtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblxuXHRcdC8vLy8vLy8vL1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHQkcm9vdFNjb3BlLndvcmtpbmdNZXNzYWdlID0gc2VydmljZS5kZWZhdWx0TWVzc2FnZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBmb3JjZUhpZGUocmVzZXQpIHtcblx0XHRcdGhpZGRlbkJ5Rm9yY2UgPSByZXNldCA/IGZhbHNlIDogdHJ1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRNZXNzYWdlKG1zZykge1xuXHRcdFx0cmV0dXJuIG1lc3NhZ2U7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGlkZSgpIHtcblx0XHRcdGFtSUJ1c3kgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc0J1c3koKSB7XG5cdFx0XHRyZXR1cm4gYW1JQnVzeSAmJiAhaGlkZGVuQnlGb3JjZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc1Zpc2libGUoKSB7XG5cdFx0XHRyZXR1cm4gJCgnLmxvYWRpbmctaW5kaWNhdG9yJykuaXMoJzp2aXNpYmxlJyk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVzZXRNZXNzYWdlKCkge1xuXHRcdFx0dGhpcy5zZXRNZXNzYWdlKHRoaXMuZGVmYXVsdE1lc3NhZ2UpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNldE1lc3NhZ2UobXNnKSB7XG5cdFx0XHRtZXNzYWdlID0gJHJvb3RTY29wZS53b3JraW5nTWVzc2FnZSA9IG1zZztcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzaG93KCkge1xuXHRcdFx0YW1JQnVzeSA9IHRydWU7XG5cdFx0fVxuXHR9XG59KSgpO1xuIixudWxsLCIoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdsZWFkU2VydmljZXMnLCBbXSlcblx0XHQuZmFjdG9yeSgnTGVhZCcsIExlYWQpO1xuXG5cdGZ1bmN0aW9uIExlYWQoJHJlc291cmNlLCBDYWNoZUZhY3RvcnkpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKCdhcGkvbGVhZHMvOmlkJywge2lkOiAnQGlkJ30sIHtcbiAgICAgICAgICAgIGluZGV4OiB7bWV0aG9kOiAnR0VUJywgdXJsOiAnYXBpL3RyYWRlc2hvd3MvOnRyYWRlc2hvd0lkL2xlYWRzJywgcGFyYW1zOnt0cmFkZXNob3dJZDogJ0B0cmFkZXNob3dJZCd9fSxcblx0XHRcdGdldDoge2NhY2hlOiBDYWNoZUZhY3RvcnkuZ2V0KCdkZWZhdWx0Q2FjaGUnKX1cblx0XHR9KTtcblx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2xlYWRTZXJ2aWNlcycpXG5cdFx0LmZhY3RvcnkoJ2xlYWRTZXJ2aWNlJywgbGVhZFNlcnZpY2UpO1xuXG5cdGZ1bmN0aW9uIGxlYWRTZXJ2aWNlKCRodHRwLCBuZ0RpYWxvZywgTGVhZCwgJHJvb3RTY29wZSwgYnVzeVNlcnZpY2UpIHtcblx0XHRcdHZhciBhY3RpdmVEaWFsb2c7XG5cblx0XHRcdHZhciBzZXJ2aWNlID0ge1xuXHRcdFx0XHRkZWxldGVMZWFkOiBkZWxldGVMZWFkLFxuXHRcdFx0XHRyZXRyaWV2ZTogcmV0cmlldmVcblx0XHRcdH07XG5cblx0XHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0XHQvLy8vLy8vLy9cblxuXHRcdFx0ZnVuY3Rpb24gcmV0cmlldmUodHJhZGVob3dfaWQsIHBhZ2VOdW1iZXIsIHBlclBhZ2UsIG9yZGVyQnksIG9yZGVyQnlSZXZlcnNlLCBmaWx0ZXIpIHtcblx0XHRcdFx0aWYocGFnZU51bWJlcj09PXVuZGVmaW5lZCl7XG5cdFx0XHRcdFx0cGFnZU51bWJlciA9ICcxJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob3JkZXJCeT09PXVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdG9yZGVyQnkgPSAndXBkYXRlZF9hdCc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG9yZGVyQnlSZXZlcnNlPT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0b3JkZXJCeVJldmVyc2UgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChwZXJQYWdlPT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cGVyUGFnZSA9IDE1O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmaWx0ZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGZpbHRlciA9ICcnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiAkaHR0cC5cblx0XHRcdFx0XHRnZXQoJ2FwaS90cmFkZXNob3dzLycgKyB0cmFkZWhvd19pZCArICcvbGVhZHM/cGFnZT0nK3BhZ2VOdW1iZXIrJyZwZXJQYWdlPScrcGVyUGFnZStcblx0XHRcdFx0XHRcdCcmb3JkZXJCeT0nICtvcmRlckJ5ICsgJyZvcmRlckJ5UmV2ZXJzZT0nICsgcGFyc2VJbnQob3JkZXJCeVJldmVyc2UpICsgJyZmaWx0ZXI9JyArIGZpbHRlciwge2NhY2hlOiB0cnVlfSk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGRlbGV0ZUxlYWQobGVhZCkge1xuXHRcdFx0XHR2YXIgbGVhZF9uYW1lID0gbGVhZC5maXJzdF9uYW1lICsgJyAnICsgbGVhZC5sYXN0X25hbWU7XG5cdFx0XHRcdHZhciBkaWFsb2dfaHRtbCA9ICc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdHJhc2ggcmVkIGljb24tbGFyZ2VcIj48L3NwYW4+PHNwYW4+QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBMZWFkIDxlbT4nICsgbGVhZF9uYW1lICtcblx0XHRcdFx0XHRcdFx0XHQgICc8L2VtPj88YnIgLz48c3Ryb25nPlRoaXMgY2Fubm90IGJlIHVuZG9uZS48L3N0cm9uZz48L3NwYW4+PGRpdiBjbGFzcz1cImRpYWxvZy1idXR0b25zXCI+JyArXG5cdFx0XHRcdFx0XHRcdFx0ICAnPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgbmctY2xpY2s9XCJjb25maXJtKClcIj5ZZXMsIGRlbGV0ZTwvYnV0dG9uPiAnICtcblx0XHRcdFx0XHRcdFx0XHQgICc8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1jYW5jZWxcIiBuZy1jbGljaz1cImNsb3NlVGhpc0RpYWxvZygpXCI+Q2FuY2VsPC9idXR0b24+PC9kaXY+Jztcblx0XHRcdFx0bmdEaWFsb2cub3BlbkNvbmZpcm0oe1xuXHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1kZXN0cm95IG5nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuXHRcdFx0XHRcdHRlbXBsYXRlOiBkaWFsb2dfaHRtbCxcblx0XHRcdFx0XHRzaG93Q2xvc2U6IGZhbHNlXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGJ1c3lTZXJ2aWNlLnNldE1lc3NhZ2UoJ0RlbGV0aW5nJyk7XG5cdFx0XHRcdFx0TGVhZC5cblx0XHRcdFx0XHRcdGRlbGV0ZSh7aWQ6bGVhZC5pZH0pLlxuXHRcdFx0XHRcdFx0JHByb21pc2UuXG5cdFx0XHRcdFx0XHR0aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHBheWxvYWQuaGFzT3duUHJvcGVydHkoJ3N1Y2Nlc3MnKSAmJiBwYXlsb2FkLnN1Y2Nlc3MgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0XHRuZ0RpYWxvZy5vcGVuKHtcblx0XHRcdFx0XHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAnZGlhbG9nLXN1Y2Nlc3MgbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGVjayBncmVlbiBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkxlYWQgPGVtPicgKyBsZWFkX25hbWUgKyAnPC9lbT4gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQuPC9zcGFuPicsXG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQuY2xvc2VQcm9taXNlXG5cdFx0XHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0bmdEaWFsb2cub3Blbih7XG5cdFx0XHRcdFx0XHRcdFx0XHRwbGFpbjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1lcnJvciBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlOiAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWV4Y2xhbWF0aW9uLXNpZ24gcmVkIGljb24tbGFyZ2VcIj48L3NwYW4+PHNwYW4+QW4gZXJyb3Igb2NjdXJlZCB3aGVuIHRyeWluZyB0byBkZWxldGUgTGVhZCA8ZW0+JyArIGxlYWRfbmFtZSArICc8L2VtPi48L3NwYW4+ICBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3Qgc3VwcG9ydC4nLFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRcdG5nRGlhbG9nLm9wZW4oe1xuXHRcdFx0XHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1lcnJvciBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFuIGVycm9yIG9jY3VyZWQgd2hlbiB0cnlpbmcgdG8gZGVsZXRlIExlYWQgPGVtPicgKyBsZWFkX25hbWUgKyAnPC9lbT4uPC9zcGFuPiAgUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHN1cHBvcnQuJyxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxufSkoKTtcbiIsIi8qKlxuICogTG9naW4gU2VydmljZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2xvZ2luU2VydmljZScsW10pXG5cdFx0LmZhY3RvcnkoJ2xvZ2luU2VydmljZScsIGxvZ2luU2VydmljZSk7XG5cblx0ZnVuY3Rpb24gbG9naW5TZXJ2aWNlKCRzdGF0ZSwgJHJvb3RTY29wZSwgJHEsIENhY2hlRmFjdG9yeSwgJGh0dHAsIGh0dHBCdWZmZXIsICRpbmplY3Rvcikge1xuXHRcdGlmICghQ2FjaGVGYWN0b3J5LmdldCgnYXV0aENhY2hlJykpIHtcblx0XHRcdG5ldyBDYWNoZUZhY3RvcnkoJ2F1dGhDYWNoZScsIHtcblx0XHRcdFx0bWF4QWdlOiA2MCAqIDU5ICogMTAwMCxcblx0XHRcdFx0ZGVsZXRlT25FeHBpcmU6ICdhZ2dyZXNzaXZlJyxcblx0XHRcdFx0c3RvcmFnZU1vZGU6ICdsb2NhbFN0b3JhZ2UnLFxuXHRcdFx0XHRvbkV4cGlyZTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRcdHZhciBzdmMgPSAkaW5qZWN0b3IuZ2V0KCdsb2dpblNlcnZpY2UnKTtcblx0XHRcdFx0XHRzdmMucmVmcmVzaCh2YWx1ZSkudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0XHRjYWNoZS5wdXQoa2V5LCBwYXlsb2FkLmRhdGEudG9rZW4pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dmFyIGNhY2hlID0gQ2FjaGVGYWN0b3J5LmdldCgnYXV0aENhY2hlJyk7XG5cblx0XHQkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSBjYWNoZS5nZXQoJ3Rva2VuJykgIT09IHVuZGVmaW5lZDtcblxuXHRcdHZhciBzZXJ2aWNlID0ge1xuXHRcdFx0Y2hlY2tBcGlBY2Nlc3M6IGNoZWNrQXBpQWNjZXNzLFxuXHRcdFx0aGFzVG9rZW46IGhhc1Rva2VuLFxuXHRcdFx0aXNWYWxpZEVtYWlsOiBpc1ZhbGlkRW1haWwsXG5cdFx0XHRsb2dpbjogbG9naW4sXG5cdFx0XHRsb2dpbkNhbmNlbGxlZDogbG9naW5DYW5jZWxsZWQsXG5cdFx0XHRsb2dpbkNvbmZpcm1lZDogbG9naW5Db25maXJtZWQsXG5cdFx0XHRsb2dvdXQ6IGxvZ291dCxcblx0XHRcdHJlZnJlc2g6IHJlZnJlc2gsXG5cdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRnZXQ6IHRva2VuR2V0LFxuXHRcdFx0XHRzZXQ6IHRva2VuU2V0LFxuXHRcdFx0XHRyZW1vdmU6IHRva2VuUmVtb3ZlXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBjaGVja0FwaUFjY2VzcygpIHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHRpZiAodGhpcy5oYXNUb2tlbigpKSB7XG5cdFx0XHRcdCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IHRydWU7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aGlzLmxvZ2luQ2FuY2VsbGVkKCk7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFzVG9rZW4oKSB7XG5cdFx0XHR2YXIgdCA9IHRoaXMudG9rZW4uZ2V0KCk7XG5cdFx0XHRyZXR1cm4gdCAhPT0gdW5kZWZpbmVkICYmIHQgIT09IG51bGw7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuXHRcdCAgICByZXR1cm4gcGF0dGVybi50ZXN0KGVtYWlsKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBsb2dpbihjcmVkZW50aWFscykge1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAucG9zdCgnL2FwaS9hdXRoZW50aWNhdGUnLCBjcmVkZW50aWFscywge2NhY2hlOiBmYWxzZX0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHBheWxvYWQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChwYXlsb2FkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBsb2dpbkNhbmNlbGxlZChkYXRhLHJlYXNvbikge1xuXHRcdFx0aHR0cEJ1ZmZlci5yZWplY3RBbGwocmVhc29uKTtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZXZlbnQ6YXV0aC1sb2dpbi1jYW5jZWxsZWQnLCBkYXRhKTtcblx0XHRcdHRoaXMubG9nb3V0KCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbG9naW5Db25maXJtZWQoZGF0YSwgY29uZmlnVXBkYXRlcikge1xuXHRcdFx0dmFyIHVwZGF0ZXIgPSBjb25maWdVcGRhdGVyIHx8IGZ1bmN0aW9uKGNvbmZpZykge3JldHVybiBjb25maWc7fTtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZXZlbnQ6YXV0aC1sb2dnZWQtaW4nLCBkYXRhKTtcblx0XHRcdCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IHRydWU7XG5cdFx0XHRodHRwQnVmZmVyLnJldHJ5QWxsKHVwZGF0ZXIpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGxvZ291dCgpIHtcblx0XHRcdHRoaXMudG9rZW4ucmVtb3ZlKCk7XG5cdFx0XHQkc3RhdGUuZ28oJ2F1dGgnKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZWZyZXNoKHRva2VuU3RyaW5nKSB7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpLFxuXHRcdFx0XHR0aGF0IFx0PSB0aGlzLFxuXHRcdFx0XHRjb25maWcgXHQ9IHtjYWNoZTogZmFsc2UsIGhlYWRlcnM6IHt9fTtcblxuXHRcdFx0aWYgKHR5cGVvZiB0b2tlblN0cmluZyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIgKyB0b2tlblN0cmluZztcblx0XHRcdH1cblxuXHRcdFx0JGh0dHAuZ2V0KCdhcGkvYXV0aGVudGljYXRlL3JlZnJlc2gnLCBjb25maWcpXG5cdFx0XHQudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdHRoYXQudG9rZW4uc2V0KHBheWxvYWQuZGF0YS50b2tlbik7XG5cdFx0XHRcdHRoYXQubG9naW5Db25maXJtZWQoKTtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShwYXlsb2FkKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHR0aGF0LmxvZ2luQ2FuY2VsbGVkKCk7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChwYXlsb2FkKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdG9rZW5HZXQoKSB7XG5cdFx0XHRyZXR1cm4gY2FjaGUuZ2V0KCd0b2tlbicpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRva2VuUmVtb3ZlKCkge1xuXHRcdFx0Y2FjaGUucmVtb3ZlKCd0b2tlbicpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRva2VuU2V0KHRva2VuU3RyaW5nKSB7XG5cdFx0XHRjYWNoZS5wdXQoJ3Rva2VuJywgdG9rZW5TdHJpbmcpO1xuXHRcdH1cblx0fVxufSkoKTtcbiIsIi8qKlxuICogTWVzc2FnZSBzZXJ2aWNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbWVzc2FnZVNlcnZpY2UnLCBbXSlcblx0XHQuZmFjdG9yeSgnbWVzc2FnZVNlcnZpY2UnLCBtZXNzYWdlU2VydmljZSk7XG5cblx0ZnVuY3Rpb24gbWVzc2FnZVNlcnZpY2UoJHRpbWVvdXQsICRxKSB7XG5cdFx0dmFyIG1lc3NhZ2VzID0gW107XG5cblx0XHR2YXIgc2VydmljZSA9IHtcblx0XHRcdGFkZE1lc3NhZ2U6IGFkZE1lc3NhZ2UsXG5cdFx0XHRnZXRNZXNzYWdlczogZ2V0TWVzc2FnZXMsXG5cdFx0XHRwdXJnZTogcHVyZ2UsXG5cdFx0XHRyZW1vdmVNZXNzYWdlOiByZW1vdmVNZXNzYWdlXG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBhZGRNZXNzYWdlKGNvbmZpZykge1xuXHRcdFx0Y29uZmlnLmlkID0gbWVzc2FnZXMubGVuZ3RoICsgMTtcblx0XHRcdG1lc3NhZ2VzLnB1c2goY29uZmlnKTtcblx0XHRcdHJldHVybiBjb25maWc7XG5cdFx0fVxuXG5cblx0XHRmdW5jdGlvbiBnZXRNZXNzYWdlcygpIHtcblx0XHRcdHJldHVybiBtZXNzYWdlcztcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZW1vdmVNZXNzYWdlKGlkKSB7XG5cdFx0XHRpZiAobWVzc2FnZXNbaWQgLSAxXSkge1xuXHRcdFx0XHRtZXNzYWdlcy5zcGxpY2UoaWQgLSAxLCAxKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXJnZSgpIHtcblx0XHRcdG1lc3NhZ2VzID0gW107XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnc2xpZGVNZW51U2VydmljZScsIFtdKVxuXHRcdC5wcm92aWRlcignc2xpZGVNZW51U2VydmljZScsIHNsaWRlTWVudVByb3ZpZGVyKTtcblxuXHRmdW5jdGlvbiBzbGlkZU1lbnVQcm92aWRlcigpIHtcblx0XHR0aGlzLm1lbnVzID0ge307XG5cblx0XHR0aGlzLnJlZ2lzdGVyTWVudSA9IHJlZ2lzdGVyTWVudTtcblx0XHR0aGlzLiRnZXQgPSBzbGlkZU1lbnVTZXJ2aWNlO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0XHQvLy8vLy8vLy9cblxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyTWVudShuYW1lLCBjb25maWcpIHtcblx0XHRcdHRoaXMubWVudXNbbmFtZV0gPSBjb25maWc7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2xpZGVNZW51U2VydmljZSgpIHtcblx0XHRcdHZhciBzZXJ2aWNlID0ge1xuXHRcdFx0XHRtZW51czogdGhpcy5tZW51cyxcblx0XHRcdFx0YnVpbGRNZW51OiBidWlsZE1lbnVcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0XHQvLy8vLy8vLy9cblx0XHRcdFxuXHRcdFx0ZnVuY3Rpb24gYnVpbGRNZW51KGNvbmZpZywgb2JqKSB7XG5cdFx0XHRcdHZhciBodG1sID0gJyc7XG5cdFx0XHRcdGZvciAodmFyIGFjdGlvbk5hbWUgaW4gY29uZmlnLml0ZW1zKSB7XG5cdFx0XHRcdFx0dmFyIGFjdGlvbiBcdD0gY29uZmlnLml0ZW1zW2FjdGlvbk5hbWVdLFxuXHRcdFx0XHRcdFx0dGl0bGUgXHQ9IGFjdGlvbi50aXRsZSB8fCBhY3Rpb25OYW1lLFxuXHRcdFx0XHRcdFx0bGluayBcdD0gJzxhIHRpdGxlPVwiJyArIHRpdGxlICsgJ1wiJztcblxuXHRcdFx0XHRcdGlmIChhY3Rpb24uaGFzT3duUHJvcGVydHkoJ3VybCcpKSB7XG5cdFx0XHRcdFx0XHRsaW5rICs9ICcgaHJlZj1cIi8jLycgKyBhY3Rpb24udXJsICsgJ1wiJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRsaW5rICs9ICcgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYWN0aW9uLmhhc093blByb3BlcnR5KCdjbGljaycpKSB7XG5cdFx0XHRcdFx0XHRsaW5rICs9ICcgbmctY2xpY2s9XCInICsgYWN0aW9uLmNsaWNrICsgJ1wiJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRsaW5rICs9ICc+JyArIHRpdGxlICsgJzwvYT4nO1xuXG5cdFx0XHRcdFx0aHRtbCArPSAnPGxpPicgKyBsaW5rICsgJzwvbGk+Jztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiAnPHVsPicgKyBodG1sICsgJzwvdWw+Jztcblx0XHRcdH1cblxuXHRcdH1cblx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ3RyYWRlc2hvd1NlcnZpY2VzJywgWyduZ1Jlc291cmNlJ10pXG5cdFx0LmZhY3RvcnkoJ1RyYWRlc2hvdycsIFRyYWRlc2hvdyk7XG5cblx0ZnVuY3Rpb24gVHJhZGVzaG93KCRyZXNvdXJjZSwgQ2FjaGVGYWN0b3J5KSB7XG5cdFx0cmV0dXJuICRyZXNvdXJjZSgnYXBpL3RyYWRlc2hvd3MvOmlkJywge2lkOiAnQGlkJ30sIHtcblx0XHRcdGdldDoge2NhY2hlOiBDYWNoZUZhY3RvcnkuZ2V0KCdkZWZhdWx0Q2FjaGUnKX0sXG5cdFx0XHRjcmVhdGU6IHttZXRob2Q6ICdQT1NUJywgdXJsOidhcGkvdHJhZGVzaG93cy9jcmVhdGUnfSxcblx0XHRcdGRlbGV0ZToge21ldGhvZDogJ0RFTEVURSd9XG5cdFx0fSk7XG5cdH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd0cmFkZXNob3dTZXJ2aWNlcycpXG5cdFx0LmZhY3RvcnkoJ3RyYWRlc2hvd1NlcnZpY2UnLCB0cmFkZXNob3dTZXJ2aWNlKTtcblxuXHRmdW5jdGlvbiB0cmFkZXNob3dTZXJ2aWNlKCRodHRwLCBUcmFkZXNob3csICRyb290U2NvcGUsIG5nRGlhbG9nLCBidXN5U2VydmljZSkge1xuXHRcdHZhciBhY3RpdmVEaWFsb2c7XG5cblx0XHR2YXIgc2VydmljZSA9IHtcblx0XHRcdHJldHJpZXZlOiByZXRyaWV2ZSxcblx0XHRcdGRlbGV0ZVRyYWRlc2hvdzogZGVsZXRlVHJhZGVzaG93XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBkZWxldGVUcmFkZXNob3codHJhZGVzaG93KSB7XG5cdFx0XHR2YXIgdHJhZGVzaG93X25hbWUgPSB0cmFkZXNob3cubmFtZSxcblx0XHRcdFx0dHJhZGVzaG93X2lkICAgPSB0cmFkZXNob3cuaWQ7XG5cdFx0XHRhY3RpdmVEaWFsb2cgPSBuZ0RpYWxvZy5vcGVuQ29uZmlybShcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1kZXN0cm95IG5nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuXHRcdFx0XHRcdHRlbXBsYXRlOiAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRyYXNoIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgVHJhZGVzaG93IDxlbT4nICsgdHJhZGVzaG93X25hbWUgKyAnPC9lbT4/PGJyIC8+PHN0cm9uZz5UaGlzIGNhbm5vdCBiZSB1bmRvbmUuPC9zdHJvbmc+PC9zcGFuPjxkaXYgY2xhc3M9XCJkaWFsb2ctYnV0dG9uc1wiPjxidXR0b24gY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiIG5nLWNsaWNrPVwiY29uZmlybSgpXCI+WWVzLCBkZWxldGU8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tY2FuY2VsXCIgbmctY2xpY2s9XCJjbG9zZVRoaXNEaWFsb2coKVwiPkNhbmNlbDwvYnV0dG9uPjwvZGl2PicsXG5cdFx0XHRcdFx0c2hvd0Nsb3NlOiBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHQpLlxuXHRcdFx0dGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gQWx0ZXIgdGhlIHdvcmtpbmcgbWVzc2FnZVxuXHRcdFx0XHRidXN5U2VydmljZS5zZXRNZXNzYWdlKCdEZWxldGluZycpO1xuXG5cdFx0XHRcdFRyYWRlc2hvdy5cblx0XHRcdFx0XHRkZWxldGUoe3RyYWRlc2hvd0lkOnRyYWRlc2hvd19pZH0pLlxuXHRcdFx0XHRcdCRwcm9taXNlLlxuXHRcdFx0XHRcdHRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0aWYgKHBheWxvYWQuaGFzT3duUHJvcGVydHkoJ3N1Y2Nlc3MnKSAmJiBwYXlsb2FkLnN1Y2Nlc3MgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0bmdEaWFsb2cub3Blbih7XG5cdFx0XHRcdFx0XHRcdFx0cGxhaW46IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAnZGlhbG9nLXN1Y2Nlc3MgbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hlY2sgZ3JlZW4gaWNvbi1sYXJnZVwiPjwvc3Bhbj48c3Bhbj5UcmFkZXNob3cgPGVtPicgKyB0cmFkZXNob3dfbmFtZSArICc8L2VtPiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZGVsZXRlZC48L3NwYW4+Jyxcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0LmNsb3NlUHJvbWlzZVxuXHRcdFx0XHRcdFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdG5nRGlhbG9nLm9wZW4oe1xuXHRcdFx0XHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1lcnJvciBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFuIGVycm9yIG9jY3VyZWQgd2hlbiB0cnlpbmcgdG8gZGVsZXRlIFRyYWRlc2hvdyA8ZW0+JyArIHRyYWRlc2hvd19uYW1lICsgJzwvZW0+Ljwvc3Bhbj4gIFBsZWFzZSB0cnkgYWdhaW4gb3IgY29udGFjdCBzdXBwb3J0LicsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdG5nRGlhbG9nLm9wZW4oe1xuXHRcdFx0XHRcdFx0XHRwbGFpbjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAnZGlhbG9nLWVycm9yIG5nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFuIGVycm9yIG9jY3VyZWQgd2hlbiB0cnlpbmcgdG8gZGVsZXRlIFRyYWRlc2hvdyA8ZW0+JyArIHRyYWRlc2hvd19uYW1lICsgJzwvZW0+Ljwvc3Bhbj4gIFBsZWFzZSB0cnkgYWdhaW4gb3IgY29udGFjdCBzdXBwb3J0LicsXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblx0XHRmdW5jdGlvbiByZXRyaWV2ZShwYWdlTnVtYmVyLCBwZXJQYWdlLCBvcmRlckJ5LCBvcmRlckJ5UmV2ZXJzZSwgZmlsdGVyKSB7XG5cdFx0XHRpZihwYWdlTnVtYmVyPT09dW5kZWZpbmVkKXtcblx0XHRcdFx0cGFnZU51bWJlciA9ICcxJztcblx0XHRcdH1cblx0XHRcdGlmIChvcmRlckJ5PT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdG9yZGVyQnkgPSAnaWQnO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG9yZGVyQnlSZXZlcnNlPT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdG9yZGVyQnlSZXZlcnNlID0gMDtcblx0XHRcdH1cblx0XHRcdGlmIChwZXJQYWdlPT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdHBlclBhZ2UgPSAxNTtcblx0XHRcdH1cblx0XHRcdGlmIChmaWx0ZXI9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGZpbHRlciA9ICcnO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICRodHRwLlxuXHRcdFx0XHRnZXQoJ2FwaS90cmFkZXNob3dzP3BhZ2U9JytwYWdlTnVtYmVyKycmcGVyUGFnZT0nICsgcGVyUGFnZSArICcmb3JkZXJCeT0nICsgb3JkZXJCeSArXG5cdFx0XHRcdFx0JyZvcmRlckJ5UmV2ZXJzZT0nICsgcGFyc2VJbnQob3JkZXJCeVJldmVyc2UpICsgJyZmaWx0ZXI9JyArIGZpbHRlciwge2NhY2hlOiB0cnVlfSk7XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RzcG9ydGFsRGlyZWN0aXZlcycsIFtdKVxuICAgICAgICAuZGlyZWN0aXZlKCdidXN5SW5kaWNhdG9yJywgYnVzeUluZGljYXRvckRpcmVjdGl2ZSk7XG5cbiAgICBmdW5jdGlvbiBidXN5SW5kaWNhdG9yRGlyZWN0aXZlKGJ1c3lTZXJ2aWNlLCAkcm9vdFNjb3BlLCAkdGltZW91dCkge1xuICAgICAgICB2YXIgaXNBcHBCdXN5ICAgICAgID0gZmFsc2UsXG4gICAgICAgICAgICBpc1N0YXRlTG9hZGluZyAgPSB0cnVlO1xuXG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuLi9wYXJ0aWFscy9idXN5LWluZGljYXRvci5odG1sJyxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICBsaW5rOiBidXN5SW5kaWNhdG9yRGlyZWN0aXZlTGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gYnVzeUluZGljYXRvckRpcmVjdGl2ZUxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmlzQnVzeSA9IGlzQnVzeTtcblxuICAgICAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICAgICAgLy8vLy8vLy8vXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1c3lTZXJ2aWNlLnJlc2V0TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICBidXN5U2VydmljZS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVzeVNlcnZpY2UuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpc0J1c3koKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1c3lTZXJ2aWNlLmlzQnVzeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCd0c3BvcnRhbERpcmVjdGl2ZXMnKVxuICAgICAgICAuZGlyZWN0aXZlKFwiY2xpY2thYmxlXCIsIGNsaWNrYWJsZURpcmVjdGl2ZSk7XG5cbiAgICBmdW5jdGlvbiBjbGlja2FibGVEaXJlY3RpdmUoKSB7XG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXN0aWN0OiAnQScsXG5cbiAgICAgICAgICAgIGxpbms6IGNsaWNrYWJsZURpcmVjdGl2ZUxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIC8vLy8vLy8vL1xuICAgIFxuICAgICAgICBmdW5jdGlvbiBjbGlja2FibGVEaXJlY3RpdmVMaW5rKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgZWxlbS5hZGRDbGFzcyhcImNsaWNrYWJsZVwiKTtcbiAgICAgICAgICAgIGVsZW0ub24oXCJjbGlja1wiLCBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvUGhhbnRvbUpTL2cpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RzcG9ydGFsRGlyZWN0aXZlcycpXG4gICAgICAgIC5kaXJlY3RpdmUoJ21lc3NhZ2VzJywgbWVzc2FnZXNEaXJlY3RpdmUpO1xuXG4gICAgZnVuY3Rpb24gbWVzc2FnZXNEaXJlY3RpdmUobWVzc2FnZVNlcnZpY2UsICRyb290U2NvcGUsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL21lc3NhZ2VzLmh0bWwnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIGxpbms6IG1lc3NhZ2VzRGlyZWN0aXZlTGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgLy8vLy8vLy8vXG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VzRGlyZWN0aXZlTGluayhzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgICAgIHZhciB2bSA9IHNjb3BlLmhhc093blByb3BlcnR5KCdjdHJsJykgPyBzY29wZS5jdHJsIDogc2NvcGU7XG5cbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBtZXNzYWdlU2VydmljZS5nZXRNZXNzYWdlcygpOyB9LCBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3VmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLm1lc3NhZ2VzID0gbmV3VmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VTZXJ2aWNlLnB1cmdlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdm0uYWRkTWVzc2FnZSA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gbWVzc2FnZVNlcnZpY2UuYWRkTWVzc2FnZShjb25maWcpO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiLm1lc3NhZ2VzIC5hbGVydFttZXNzYWdlLWlkPVwiK2NvbmZpZy5pZCtcIl1cIikuYWRkQ2xhc3MoXCJpblwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZtLnJlbW92ZU1lc3NhZ2UgPSBmdW5jdGlvbiByZW1vdmVNZXNzYWdlKGlkKSB7XG4gICAgICAgICAgICAgICAgJChcIi5tZXNzYWdlcyAuYWxlcnRbbWVzc2FnZS1pZD1cIitpZCtcIl1cIikub24oXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UucmVtb3ZlTWVzc2FnZShpZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2bS5hZGRTdWNjZXNzTWVzc2FnZSA9IGZ1bmN0aW9uIGFkZFN1Y2Nlc3NNZXNzYWdlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ29rJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6ICdpY29uLW1lZGl1bScsXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91ciBjaGFuZ2VzIGhhdmUgYmVlbiBzYXZlZCdcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uZmlnID0gJC5leHRlbmQoZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uYWRkTWVzc2FnZShjb25maWcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdm0uYWRkRXJyb3JNZXNzYWdlID0gZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXhjbGFtYXRpb24tc2lnbicsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogJ2ljb24tbWVkaXVtJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTb3JyeSwgc29tZXRoaW5nIHdlbnQgd3JvbmcuXCJcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uZmlnID0gJC5leHRlbmQoZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uYWRkTWVzc2FnZShjb25maWcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdm0ucHVyZ2VNZXNzYWdlcyA9IGZ1bmN0aW9uIHB1cmdlTWVzc2FnZXMoKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UucHVyZ2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgndHNwb3J0YWxEaXJlY3RpdmVzJylcbiAgICAuZGlyZWN0aXZlKCdwYWdlcicsIHBhZ2VyRGlyZWN0aXZlKTtcblxuICBmdW5jdGlvbiBwYWdlckRpcmVjdGl2ZSgpIHtcbiAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICBjdXJyZW50UGFnZTogJz0nLFxuICAgICAgICAgIHRvdGFsUGFnZXM6ICc9JyxcbiAgICAgICAgICBnZXRSZXN1bHRzOiAnJmdldFJlc3VsdHMnLFxuICAgICAgICAgIHRyYWRlc2hvdzogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vcGFydGlhbHMvcGFnZXIuaHRtbCcsXG4gICAgICAgIGxpbms6IHBhZ2VyRGlyZWN0aXZlTGlua1xuICAgICB9O1xuXG4gICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgLy8vLy8vLy8vXG4gICBcbiAgICAgZnVuY3Rpb24gcGFnZXJEaXJlY3RpdmVMaW5rKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICBzY29wZS5nZXRSYW5nZSA9IGZ1bmN0aW9uKG51bSkge1xuICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkobnVtKTtcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCd0c3BvcnRhbERpcmVjdGl2ZXMnKVxuXHRcdC5kaXJlY3RpdmUoJ3NsaWRlTWVudScsIHNsaWRlTWVudURpcmVjdGl2ZSk7XG5cblx0ZnVuY3Rpb24gc2xpZGVNZW51RGlyZWN0aXZlKCR0aW1lb3V0LCAkcm9vdFNjb3BlLCBzbGlkZU1lbnVTZXJ2aWNlLCAkY29tcGlsZSkge1xuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL3NsaWRlLW1lbnUtZGlyZWN0aXZlLmh0bWwnLFxuXHRcdFx0bGluazogc2xpZGVNZW51RGlyZWN0aXZlTGlua1xuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1xuXG5cdFx0Ly8vLy8vLy9cblx0XHRcblx0XHRmdW5jdGlvbiBzbGlkZU1lbnVEaXJlY3RpdmVMaW5rKCRzY29wZSwgZWxlbSwgYXR0cnMpIHtcblx0XHRcdCRzY29wZS5hbGlnbm1lbnQgPSAkc2NvcGUuYWxpZ25tZW50IHx8ICh3aW5kb3cub3V0ZXJXaWR0aCA8PSA3NjggPyBcImJvdHRvbVwiIDogXCJyaWdodFwiKTtcblxuXHRcdFx0dmFyIHNsaWRlTWVudSA9IHtcblx0XHRcdFx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZWxlbS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRlbGVtLmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNldEFsaWdubWVudDogZnVuY3Rpb24ocG9zKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmFsaWdubWVudCA9IHBvcztcblx0XHRcdFx0XHRlbGVtLmF0dHIoJ2FsaWdubWVudCcsIHBvcyk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5vcGVuTWVudSA9IG9wZW5NZW51O1xuXHRcdFx0JHNjb3BlLmNsb3NlTWVudSA9IGNsb3NlTWVudTtcblx0XHRcdCRzY29wZS5zZXRBbGlnbm1lbnQgPSBzZXRBbGlnbm1lbnQ7XG5cblx0XHRcdGFjdGl2YXRlKCk7XG5cblx0XHRcdC8vLy8vLy8vL1xuXHRcdFx0XG5cdFx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdFx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2xpZGVNZW51LmhpZGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGNsb3NlTWVudSgpIHtcblx0XHRcdFx0c2xpZGVNZW51LmhpZGUoKTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gb3Blbk1lbnUobWVudU5hbWUsIG9iaikge1xuXHRcdFx0XHRpZiAoc2xpZGVNZW51U2VydmljZS5tZW51cyAmJiBzbGlkZU1lbnVTZXJ2aWNlLm1lbnVzLmhhc093blByb3BlcnR5KG1lbnVOYW1lKSkge1xuXHRcdFx0XHRcdCRzY29wZVttZW51TmFtZV0gPSBvYmo7XG5cdFx0XHRcdFx0dmFyIG1lbnUgPSBzbGlkZU1lbnVTZXJ2aWNlLm1lbnVzW21lbnVOYW1lXTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR2YXIgY29tcGlsZWRUaXRsZSA9ICRjb21waWxlKCc8aDM+JyArIG1lbnUudGl0bGUgKyAnPC9oMz4nKSgkc2NvcGUpO1xuXG5cdFx0XHRcdFx0ZWxlbS5maW5kKCdoMycpLmh0bWwoY29tcGlsZWRUaXRsZSk7XG5cblx0XHRcdFx0XHR2YXIgYnVpbHQgPSBzbGlkZU1lbnVTZXJ2aWNlLmJ1aWxkTWVudShtZW51LCBvYmopO1xuXHRcdFx0XHRcdHZhciBjb21waWxlZCA9ICRjb21waWxlKGJ1aWx0KSgkc2NvcGUpO1xuXHRcdFx0XHRcdGVsZW0uZmluZCgnLnNsaWRlLW1lbnUtY29udGVudCcpLmh0bWwoY29tcGlsZWQpO1xuXG5cdFx0XHRcdFx0c2xpZGVNZW51LnNob3coKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBzZXRBbGlnbm1lbnQocG9zKSB7XG5cdFx0XHRcdHNsaWRlTWVudS5zZXRBbGlnbm1lbnQocG9zKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgndHNwb3J0YWxEaXJlY3RpdmVzJylcbiAgICAgICAgLmRpcmVjdGl2ZShcInRpbWVhZ29cIiwgdGltZWFnb0RpcmVjdGl2ZSk7XG5cbiAgICBmdW5jdGlvbiB0aW1lYWdvRGlyZWN0aXZlKCkge1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgdGltZTogJz0nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHNwYW4gY2xhc3M9XCJ0aW1lLWFnb1wiPnt7Z2V0VGltZUFnbyh0aW1lKX19PC9zcGFuPicsXG4gICAgICAgICAgICBsaW5rOiB0aW1lYWdvRGlyZWN0aXZlTGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgLy8vLy8vLy8vXG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIHRpbWVhZ29EaXJlY3RpdmVMaW5rKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuZ2V0VGltZUFnbyA9IGZ1bmN0aW9uKHRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KHRpbWUsIG1vbWVudC5JU09fODYwMSkuZnJvbU5vdygpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0gICAgXG59KSgpO1xuIiwiLyoqXG4gKiBBdXRoIEludGVyY2VwdG9yXG4gKiBcdEBjcmVkaXQgOiBsYXJnZWx5IG1vZGlmaWVkIGZyb20gaHR0cC1hdXRoLWludGVyY2VwdG9yIHBhY2thZ2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhdXRoSW50ZXJjZXB0b3InLFtdKVxuXHRcdC5mYWN0b3J5KCdodHRwQnVmZmVyJywgaHR0cEJ1ZmZlcilcblx0XHQuY29uZmlnKGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcblx0XHRcdCRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goYXV0aEludGVyY2VwdG9yKTtcblx0XHR9KTtcblxuXHRmdW5jdGlvbiBodHRwQnVmZmVyKCRpbmplY3Rvcikge1xuXHRcdHZhciBidWZmZXIgPSBbXSwgJGh0dHA7XG5cblx0XHR2YXIgc2VydmljZSA9IHtcblx0XHRcdGFwcGVuZDogYXBwZW5kLFxuXHRcdFx0cmVqZWN0QWxsOiByZWplY3RBbGwsXG5cdFx0XHRyZXRyeUFsbDogcmV0cnlBbGwsXG5cdFx0XHRyZXRyeUh0dHBSZXF1ZXN0OiByZXRyeUh0dHBSZXF1ZXN0XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0LyoqXG5cdFx0ICogQXBwZW5kcyBIVFRQIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCBkZWZlcnJlZCByZXNwb25zZSBhdHRhY2hlZCB0byBidWZmZXIuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYXBwZW5kKGNvbmZpZywgZGVmZXJyZWQpIHtcblx0XHRcdGJ1ZmZlci5wdXNoKHtcblx0XHRcdCAgY29uZmlnOiBjb25maWcsXG5cdFx0XHQgIGRlZmVycmVkOiBkZWZlcnJlZFxuXHRcdFx0fSk7XG5cdCAgXHR9XG5cblx0ICBcdC8qKlxuXHQgIFx0ICogQWJhbmRvbiBvciByZWplY3QgKGlmIHJlYXNvbiBwcm92aWRlZCkgYWxsIHRoZSBidWZmZXJlZCByZXF1ZXN0cy5cblx0ICBcdCAqL1xuXHQgIFx0ZnVuY3Rpb24gcmVqZWN0QWxsKHJlYXNvbikge1xuXHQgIFx0ICBpZiAocmVhc29uKSB7XG5cdCAgXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyArK2kpIHtcblx0ICBcdCAgICAgIGJ1ZmZlcltpXS5kZWZlcnJlZC5yZWplY3QocmVhc29uKTtcblx0ICBcdCAgICB9XG5cdCAgXHQgIH1cblx0ICBcdCAgYnVmZmVyID0gW107XG5cdCAgXHR9XG5cblx0ICBcdC8qKlxuXHQgIFx0ICogUmV0cmllcyBhbGwgdGhlIGJ1ZmZlcmVkIHJlcXVlc3RzIGNsZWFycyB0aGUgYnVmZmVyLlxuXHQgIFx0ICovXG5cdFx0ZnVuY3Rpb24gcmV0cnlBbGwodXBkYXRlcikge1xuXHRcdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7ICsraSkge1xuXHRcdCAgICAgIHJldHJ5SHR0cFJlcXVlc3QodXBkYXRlcihidWZmZXJbaV0uY29uZmlnKSwgYnVmZmVyW2ldLmRlZmVycmVkKTtcblx0XHQgIFx0fVxuXHQgICAgXHRidWZmZXIgPSBbXTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZXRyeSBvbmUgSFRUUCByZXF1ZXN0XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gcmV0cnlIdHRwUmVxdWVzdChjb25maWcsIGRlZmVycmVkKSB7XG5cdFx0ICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHQgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0ICB9XG5cdFx0ICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0ICAgIGRlZmVycmVkLnJlamVjdChyZXNwb25zZSk7XG5cdFx0ICB9XG5cdFx0ICAkaHR0cCA9ICRodHRwIHx8ICRpbmplY3Rvci5nZXQoJyRodHRwJyk7XG5cdFx0ICAkaHR0cChjb25maWcpLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBhdXRoSW50ZXJjZXB0b3IgKCRpbmplY3RvciwgJHJvb3RTY29wZSwgJHEsIGh0dHBCdWZmZXIpIHtcblx0XHQvLyBXaWxsIGdldCByZXNvbHZlZCBsYXRlciB1c2luZyAkaW5qZWN0b3IgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jeSBpc3N1ZXNcblx0XHR2YXIgbG9naW5TZXJ2aWNlLCBuZ0RpYWxvZywgJHN0YXRlO1xuXHRcdHZhciBhcGlQYXR0ZXJuID0gL1xcL3swLDF9YXBpXFwvW2EtekEtWlxcLzAtOVxcP1xcPVxcJlxcJVxcK1xcLVxcX10qL2c7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVxdWVzdDogZnVuY3Rpb24oY29uZmlnKSB7XG5cdFx0XHRcdGxvZ2luU2VydmljZSA9IGxvZ2luU2VydmljZSB8fCAkaW5qZWN0b3IuZ2V0KCdsb2dpblNlcnZpY2UnKTtcblxuXHRcdFx0XHQvLyBBcHBlbmQgdGhlIHRva2VuIHRvIGFueSByZXF1ZXN0IHRoYXQgaXNuJ3QgdG8gbG9naW4gVVJMIG9yIGRvZXNuJ3QgaGF2ZSBhIHRva2VuIHNldFxuXHRcdFx0XHRpZiAoY29uZmlnLnVybC5tYXRjaChhcGlQYXR0ZXJuKSAmJiBjb25maWcudXJsICE9ICcvYXBpL2F1dGhlbnRpY2F0ZScgJiYgIWNvbmZpZy5oZWFkZXJzLmhhc093blByb3BlcnR5KCdBdXRob3JpemF0aW9uJykpIHtcblx0XHRcdFx0XHRpZiAobG9naW5TZXJ2aWNlLmhhc1Rva2VuKCkpIHtcblx0XHRcdFx0XHRcdGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBsb2dpblNlcnZpY2UudG9rZW4uZ2V0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0JHN0YXRlID0gJHN0YXRlIHx8ICRpbmplY3Rvci5nZXQoJyRzdGF0ZScpO1xuXHRcdFx0XHRcdFx0JHN0YXRlLmdvKCdhdXRoJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGNvbmZpZztcblx0XHRcdH0sXG5cdFx0XHRyZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0dmFyIGNvbmZpZyBcdCA9IHJlc3BvbnNlLmNvbmZpZztcblxuXHRcdFx0XHQvLyBJbnRlcmNlcHQgYW5kIHNuYXRjaCBhIHN1Y2Nlc3NmdWwgdG9rZW4gZnJvbSB0aGUgSFRUUCByZXNwb25zZVxuXHRcdFx0XHRpZiAoY29uZmlnLnVybCA9PSAnL2FwaS9hdXRoZW50aWNhdGUnICYmIGNvbmZpZy5tZXRob2QgPT0gXCJQT1NUXCIgJiYgcmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xuXHRcdFx0XHRcdGxvZ2luU2VydmljZSA9IGxvZ2luU2VydmljZSB8fCAkaW5qZWN0b3IuZ2V0KCdsb2dpblNlcnZpY2UnKTtcblxuXHRcdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhLmhhc093blByb3BlcnR5KCd0b2tlbicpKSB7XG5cdFx0XHRcdFx0XHRsb2dpblNlcnZpY2UudG9rZW4uc2V0KHJlc3BvbnNlLmRhdGEudG9rZW4pO1xuXHRcdFx0XHRcdFx0bG9naW5TZXJ2aWNlLmxvZ2luQ29uZmlybWVkKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gYnVzeVNlcnZpY2UuaGlkZSgpO1xuXG5cdFx0XHRcdHJldHVybiByZXNwb25zZTtcblx0XHRcdH0sXG5cdFx0XHRyZXNwb25zZUVycm9yOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcblx0XHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0XHRsb2dpblNlcnZpY2UgPSBsb2dpblNlcnZpY2UgfHwgJGluamVjdG9yLmdldCgnbG9naW5TZXJ2aWNlJyk7XG5cdFx0XHRcdCRzdGF0ZSBcdFx0ID0gJHN0YXRlIHx8ICRpbmplY3Rvci5nZXQoJyRzdGF0ZScpO1xuXG5cdFx0XHRcdHN3aXRjaCAocmVqZWN0aW9uLnN0YXR1cykge1xuXHRcdFx0XHRcdGNhc2UgNDAwOlxuXHRcdFx0XHRcdFx0bG9naW5TZXJ2aWNlLmxvZ2luQ2FuY2VsbGVkKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSA0MDE6XG5cdFx0XHRcdFx0XHQvLyBJZiB0b2tlbiBpcyBleHBpcmVkLCByZWZyZXNoIGl0XG5cdFx0XHRcdFx0XHRpZiAocmVqZWN0aW9uLmRhdGEuaGFzT3duUHJvcGVydHkoJ2Vycm9yJykgJiYgcmVqZWN0aW9uLmRhdGEuZXJyb3IgPT0gJ3Rva2VuX2V4cGlyZWQnKSB7XG5cdFx0XHRcdFx0ICAgIFx0aHR0cEJ1ZmZlci5hcHBlbmQocmVqZWN0aW9uLmNvbmZpZywgZGVmZXJyZWQpO1xuXHRcdFx0XHRcdCAgICBcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZXZlbnQ6YXV0aC1sb2dpbi1yZXF1aXJlZCcsIHJlamVjdGlvbik7XG5cdFx0XHRcdFx0ICAgIFx0aWYgKGxvZ2luU2VydmljZS5oYXNUb2tlbigpKSB7XG5cdFx0XHRcdFx0XHQgICAgXHRsb2dpblNlcnZpY2UucmVmcmVzaCgpO1xuXHRcdFx0XHRcdCAgICBcdH1cblx0XHRcdFx0XHQgICAgXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHQgICAgY2FzZSA0MDM6XG5cdFx0XHRcdCAgICBcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZXZlbnQ6YXV0aC1mb3JiaWRkZW4nLCByZWplY3Rpb24pO1xuXHRcdFx0XHQgICAgXHRsb2dpblNlcnZpY2UubG9naW5DYW5jZWxsZWQoKTtcblx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHQgICAgY2FzZSA1MDA6XG5cdFx0XHRcdCAgICBcdG5nRGlhbG9nID0gbmdEaWFsb2cgfHwgJGluamVjdG9yLmdldCgnbmdEaWFsb2cnKTtcblx0XHRcdFx0ICAgIFx0bmdEaWFsb2cub3Blbih7XG5cdFx0XHRcdCAgICBcdFx0cGxhaW46IHRydWUsXG5cdFx0XHRcdCAgICBcdFx0Y2xhc3NOYW1lOiAnZGlhbG9nLXNhdmUgbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXG5cdFx0XHRcdCAgICBcdFx0dGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tZXhjbGFtYXRpb24tc2lnbiByZWQgaWNvbi1sYXJnZVwiPjwvc3Bhbj48c3Bhbj5Tb3JyeSwgc29tZXRoaW5nIHdlbnQgd3JvbmcuICBUcnkgYWdhaW4gbGF0ZXIuPC9zcGFuPidcblx0XHRcdFx0ICAgIFx0fSk7XG5cdFx0XHQgICAgICBcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHJlamVjdGlvbik7XG5cblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2J1c3lTZXJ2aWNlJylcbiAgICAgICAgLmNvbmZpZyhmdW5jdGlvbigkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGJ1c3lTZXJ2aWNlSW50ZXJjZXB0b3IpO1xuICAgICAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGJ1c3lTZXJ2aWNlSW50ZXJjZXB0b3IoYnVzeVNlcnZpY2UsICRxKSB7XG5cbiAgICAgICAgdmFyIGFwaVBhdHRlcm4gPSAvXFwvezAsMX1hcGlcXC9bYS16QS1aXFwvMC05XFw/XFw9XFwmXFwlXFwrXFwtXFxfXSovZztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy51cmwubWF0Y2goYXBpUGF0dGVybikpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVzeVNlcnZpY2Uuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb25maWcudXJsLm1hdGNoKGFwaVBhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1c3lTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChyZWplY3Rpb24uY29uZmlnLnVybC5tYXRjaChhcGlQYXR0ZXJuKSkge1xuICAgICAgICAgICAgICAgICAgICBidXN5U2VydmljZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KSgpOyIsIlxuLyoqXG4gKiBBdXRoIENvbnRyb2xsZXJcbiAqL1xuKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXV0aENvbnRyb2xsZXJzJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ0F1dGhDb250cm9sbGVyJywgQXV0aENvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIEF1dGhDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBsb2dpblNlcnZpY2UsICR0aW1lb3V0LCBDYWNoZUZhY3RvcnkpIHtcblxuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHR2bS5jYWNoZSA9IG51bGw7XG5cdFx0dm0ucmVtZW1iZXJNZSA9IGZhbHNlO1xuXHRcdHZtLmxvZ2luID0gbG9naW47XG5cblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0Ly8vLy8vLy9cblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0aWYgKCFDYWNoZUZhY3RvcnkuZ2V0KCdsb2dpbkZvcm0nKSkge1xuXHRcdFx0XHRuZXcgQ2FjaGVGYWN0b3J5KCdsb2dpbkZvcm0nLCB7XG5cdFx0XHRcdFx0bWF4QWdlOiA2MCAqIDYwICogMjQgKiA3ICogNCAqIDEwMDAsXG5cdFx0XHRcdFx0ZGVsZXRlT25FeHBpcmU6ICdhZ2dyZXNzaXZlJyxcblx0XHRcdFx0XHRzdG9yYWdlTW9kZTogJ2xvY2FsU3RvcmFnZSdcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHZtLmNhY2hlID0gQ2FjaGVGYWN0b3J5LmdldCgnbG9naW5Gb3JtJyk7XG5cdFx0XHRcblx0XHRcdGlmICh2bS5jYWNoZS5nZXQoJ3JlbWVtYmVyTWUnKSAmJiB2bS5jYWNoZS5nZXQoJ2VtYWlsJykpIHtcblx0XHRcdFx0dm0ucmVtZW1iZXJNZSA9IHZtLmNhY2hlLmdldCgncmVtZW1iZXJNZScpO1xuXHRcdFx0XHR2bS5lbWFpbCA9IHZtLmNhY2hlLmdldCgnZW1haWwnKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSB0b2tlbiBpcyBhbHJlYWR5IHN0b3JlZCwgdHJ5IGFwcFxuXHRcdFx0aWYgKGxvZ2luU2VydmljZS5oYXNUb2tlbigpKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygndHJhZGVzaG93cycpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFVzZSBsb2dpblNlcnZpY2UgdG8gbG9naW5cblx0XHQgKiBAcmV0dXJuIHtbdm9pZF19XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gbG9naW4oKSB7XG5cdFx0XHR2YXIgY3JlZGVudGlhbHMgPSB7XG5cdFx0XHRcdGVtYWlsOiB2bS5lbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnBhc3N3b3JkXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBQcm92aWRlZCBieSBtZXNzYWdlc0RpcmVjdGl2ZVxuXHRcdFx0dm0ucHVyZ2VNZXNzYWdlcygpO1xuXG5cdFx0XHRsb2dpblNlcnZpY2UubG9naW4oY3JlZGVudGlhbHMpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRpZiAodm0ucmVtZW1iZXJNZSkge1xuXHRcdFx0XHRcdFx0dm0uY2FjaGUucHV0KCdlbWFpbCcsIHZtLmVtYWlsKTtcblx0XHRcdFx0XHRcdHZtLmNhY2hlLnB1dCgncmVtZW1iZXJNZScsIHZtLnJlbWVtYmVyTWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc3RhdGUuZ28oXCJ0cmFkZXNob3dzXCIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdC8vIFByb3ZpZGVkIGJ5IG1lc3NhZ2VzRGlyZWN0aXZlXG5cdFx0XHRcdFx0dm0uYWRkRXJyb3JNZXNzYWdlKHtcblx0XHRcdFx0XHRcdG1lc3NhZ2U6ICdUaGUgZW1haWwgb3IgcGFzc3dvcmQgZW50ZXJlZCB3YXMgaW5jb3JyZWN0Lidcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cbn0pKCk7XG4iLCIvKipcbiAqIEVkaXQgTGVhZCBDb250cm9sbGVyXG4gKiBAY2xhc3MgTGVhZENvbnRyb2xsZXJcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdsZWFkQ29udHJvbGxlcnMnLCBbXSlcblx0XHQuY29udHJvbGxlcignTGVhZENvbnRyb2xsZXInLCBMZWFkQ29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gTGVhZENvbnRyb2xsZXIoJHNjb3BlLCAkcSwgJGh0dHAsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBuZ0RpYWxvZywgTGVhZCwgVHJhZGVzaG93LCBidXN5U2VydmljZSwgbWVzc2FnZVNlcnZpY2UsIGxlYWREYXRhLCR0aW1lb3V0LCAkbG9nKSB7XG5cblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0dm0uZ29CYWNrID0gZ29CYWNrO1xuXHRcdHZtLnNhdmUgPSBzYXZlO1xuXG5cdFx0dm0ubGVhZCA9IGxlYWREYXRhO1xuXHRcdHZtLnRpdGxlID0gJ0VkaXRpbmcgTGVhZCc7XG5cblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFtDYWxsYmFjayB0byAnQmFjaycgYnV0dG9uXVxuXHRcdCAqXG5cdFx0ICogQHJldHVybiB7W3ZvaWRdfVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGdvQmFjaygpIHtcblx0XHRcdCRzdGF0ZS5nbygndHJhZGVzaG93RWRpdCcsIHtpZDogdm0ubGVhZC50cmFkZXNob3dfaWR9KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTYXZlIHRoZSBMZWFkXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHtbdm9pZF19XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpIHtcblx0XHRcdGlmICh2bS5sZWFkRm9ybS4kdmFsaWQpIHtcblx0XHRcdFx0Ly8gQWx0ZXIgdGhlIHdvcmtpbmcgbWVzc2FnZVxuXHRcdFx0XHRidXN5U2VydmljZS5zZXRNZXNzYWdlKCdTYXZpbmcnKTtcblxuXHRcdFx0XHQvLyBTYXZlIHRoZSBMZWFkIHVzaW5nIHRoZSBMZWFkIHJlc291cmNlXG5cdFx0XHRcdExlYWQuXG5cdFx0XHRcdFx0c2F2ZSh2bS5sZWFkKS5cblx0XHRcdFx0XHQkcHJvbWlzZS5cblx0XHRcdFx0XHR0aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdHZtLmxlYWQgPSBwYXlsb2FkO1xuXG5cdFx0XHRcdFx0XHR2bS5hZGRTdWNjZXNzTWVzc2FnZSgpO1xuXG5cdFx0XHRcdFx0XHQkaHR0cC5kZWZhdWx0cy5jYWNoZS5yZW1vdmVBbGwoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0XHR2bS5hZGRFcnJvck1lc3NhZ2UoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhdXRoQ29udHJvbGxlcnMnKVxuXHQuY29udHJvbGxlcignTG9nb3V0Q29udHJvbGxlcicsIExvZ291dENvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIExvZ291dENvbnRyb2xsZXIobG9naW5TZXJ2aWNlKSB7XG5cdFx0bG9naW5TZXJ2aWNlLmxvZ291dCgpO1xuXHR9XG59KSgpO1xuIiwiLyoqXG4gKiBDcmVhdGUgYSBUcmFkZXNob3cgQ29udHJvbGxlclxuICogQGNsYXNzIFRyYWRlc2hvd0NyZWF0ZUNvbnRyb2xsZXJcbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIERpc3BsYXlzIGEgZm9ybSBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgbmV3IHRyYWRlc2hvd1xuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ3RyYWRlc2hvd0NvbnRyb2xsZXJzJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ1RyYWRlc2hvd0NyZWF0ZUNvbnRyb2xsZXInLCBUcmFkZXNob3dDcmVhdGVDb250cm9sbGVyKTtcblxuXHRmdW5jdGlvbiBUcmFkZXNob3dDcmVhdGVDb250cm9sbGVyKCRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBuZ0RpYWxvZywgVHJhZGVzaG93LCBsb2dpblNlcnZpY2UsIGJ1c3lTZXJ2aWNlLCBtZXNzYWdlU2VydmljZSkge1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHR2bS5nb0JhY2sgPSBnb0JhY2s7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7XG5cblx0XHR2bS5pc05ldyA9IHRydWU7XG5cdFx0dm0udGl0bGVQcmVmaXggPSBcIkNyZWF0aW5nIG5ld1wiO1xuXHRcdHZtLnRyYWRlc2hvdyA9IHthY3RpdmU6IDB9O1xuXG5cdFx0YWN0aXZhdGUoKTtcblxuXHRcdC8vLy8vLy8vL1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHRsb2dpblNlcnZpY2UuY2hlY2tBcGlBY2Nlc3MoKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDYWxsYmFjayB0byAnQmFjaycgYnV0dG9uXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZ29CYWNrKCkge1xuXHRcdFx0JHN0YXRlLmdvKFwidHJhZGVzaG93c1wiKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTYXZlIHRoZSBuZXcgdHJhZGVzaG93IHVzaW5nIHRoZSBUcmFkZXNob3cgcmVzb3VyY2Vcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBzYXZlKCkge1xuXHRcdFx0aWYgKHZtLnRyYWRlc2hvd0Zvcm0uJHZhbGlkKSB7XG5cdFx0XHRcdC8vIEFsdGVyIHRoZSB3b3JraW5nIG1lc3NhZ2Vcblx0XHRcdFx0YnVzeVNlcnZpY2Uuc2V0TWVzc2FnZSgnU2F2aW5nIG5ldycpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSBUcmFkZXNob3cgdXNpbmcgVHJhZGVzaG93IHJlc291cmNlXG5cdFx0XHRcdFRyYWRlc2hvd1xuXHRcdFx0XHRcdC5jcmVhdGUodm0udHJhZGVzaG93KVxuXHRcdFx0XHRcdC4kcHJvbWlzZVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdHZhciB0cmFkZXNob3dfaWQgPSBwYXlsb2FkLmlkO1xuXG5cdFx0XHRcdFx0XHQvLyBTaG93IGEgY29uZmlybWF0aW9uIGRpYWxvZ1xuXHRcdFx0XHRcdFx0bmdEaWFsb2cub3Blbih7XG5cdFx0XHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRjbGFzc05hbWU6ICdkaWFsb2ctc2F2ZSBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hlY2sgZ3JlZW4gaWNvbi1sYXJnZVwiPjwvc3Bhbj48c3Bhbj5Zb3VyIG5ldyB0cmFkZXNob3cgaGFzIGJlZW4gY3JlYXRlZCBzdWNjZXNzZnVsbHkuJyArXG5cdFx0XHRcdFx0XHRcdCcgIENsb3NlIHRoaXMgbWVzc2FnZSBib3ggdG8gcHJvY2VlZCB0byB0aGUgdHJhZGVzaG93XFwncyBlZGl0IHBhZ2UuPC9zcGFuPidcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuY2xvc2VQcm9taXNlXG5cdFx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdC8vIE5hdmlnYXRlIHRvIHRoZSBuZXcgdHJhZGVzaG93J3MgRWRpdCBwYWdlIG9uIGRpYWxvZyBjbG9zZVxuXHRcdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ3RyYWRlc2hvd0VkaXQnLCB7aWQ6IHRyYWRlc2hvd19pZH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0dm0uYWRkRXJyb3JNZXNzYWdlKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiLyoqXG4gKiBUcmFkZXNob3cgRWRpdCBDb250cm9sbGVyXG4gKiBAY2xhc3MgVHJhZGVzaG93RGV0YWlsQ29udHJvbGxlclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBEaXNwbGF5cyBhbiBlZGl0IGZvcm0gZm9yIGEgdHJhZGVzaG93XG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgndHJhZGVzaG93Q29udHJvbGxlcnMnKVxuXHRcdC5jb250cm9sbGVyKCdUcmFkZXNob3dEZXRhaWxDb250cm9sbGVyJywgVHJhZGVzaG93RGV0YWlsQ29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gVHJhZGVzaG93RGV0YWlsQ29udHJvbGxlcigkc2NvcGUsICRxLCAkaHR0cCwgQ2FjaGVGYWN0b3J5LCAkc3RhdGUsIG5nRGlhbG9nLCBsb2dpblNlcnZpY2UsXG5cdFx0YnVzeVNlcnZpY2UsIG1lc3NhZ2VTZXJ2aWNlLCBUcmFkZXNob3csIGxlYWRTZXJ2aWNlLCBwcm9taXNlZERhdGEsIHByb21pc2VkTGVhZERhdGEsIHByb21pc2VkRm9ybUNhY2hlKVxuXHR7XG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLmRlbGV0ZUxlYWQgPSBkZWxldGVMZWFkO1xuXHRcdHZtLmdldExlYWRzID0gZ2V0TGVhZHM7XG5cdFx0dm0uZ29CYWNrID0gZ29CYWNrO1xuXHRcdHZtLnBsdWNrTGVhZCA9IHBsdWNrTGVhZDtcblx0XHR2bS5yZWZyZXNoTGVhZHMgPSByZWZyZXNoTGVhZHM7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7XG5cdFx0dm0udXBkYXRlUGFnaW5hdGlvbiA9IHVwZGF0ZVBhZ2luYXRpb247XG5cblx0XHR2bS5jdXJyZW50UGFnZSA9IHByb21pc2VkTGVhZERhdGEuZGF0YS5jdXJyZW50X3BhZ2U7XG5cdFx0dm0uZm9ybUNhY2hlID0gcHJvbWlzZWRGb3JtQ2FjaGU7XG5cdFx0dm0uaXNOZXcgPSBmYWxzZTtcblx0XHR2bS5sYXN0RmV0Y2hlZFBhZ2UgPSAxO1xuXHRcdHZtLmxlYWRzID0gcHJvbWlzZWRMZWFkRGF0YS5kYXRhLmRhdGE7XG5cdFx0dm0ub3JkZXJCeSA9IFwidXBkYXRlZF9hdFwiO1xuXHRcdHZtLm9yZGVyQnlSZXZlcnNlID0gXCIwXCI7XG5cdFx0dm0ucGVyUGFnZSA9IFwiMTVcIjtcblx0XHR2bS5xdWVyeSA9IFwiXCI7XG5cdFx0dm0udGl0bGVQcmVmaXggPSBcIkVkaXRpbmdcIjtcblx0XHR2bS50cmFkZXNob3cgPSBwcm9taXNlZERhdGE7XG5cdFx0dm0udG90YWxQYWdlcyA9IHByb21pc2VkTGVhZERhdGEuZGF0YS5sYXN0X3BhZ2U7XG5cblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0Ly8vLy8vLy8vL1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHQvLyBXYXRjaCBzY29wZSB2YXJpYWJsZXMgdG8gdXBkYXRlIGNhY2hlXG5cdFx0XHRhbmd1bGFyLmZvckVhY2goWydjdXJyZW50UGFnZScsICdvcmRlckJ5JywgJ29tZycsICdvcmRlckJ5UmV2ZXJzZScsICdwZXJQYWdlJywgJ3F1ZXJ5J10sIGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRpZiAodm0uZm9ybUNhY2hlLmdldChrZXkpKSB7XG5cdFx0XHRcdFx0dm1ba2V5XSA9IHZtLmZvcm1DYWNoZS5nZXQoa2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuJHdhdGNoKCdjdHJsLicgKyBrZXksIGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBuZXdWYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0ICAgIHZtLmZvcm1DYWNoZS5wdXQoa2V5LCBuZXdWYWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBEZWxldGUgYSBsZWFkXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZGVsZXRlTGVhZChsZWFkX2lkKSB7XG5cdFx0XHRsZWFkU2VydmljZS5kZWxldGVMZWFkKCB2bS5wbHVja0xlYWQobGVhZF9pZCkgKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBHZXQgdGhlIGxlYWRzIHVzaW5nIHRoZSBsZWFkU2VydmljZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGdldExlYWRzKHBhZ2VOdW1iZXIpIHtcblx0XHRcdGlmIChwYWdlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0cGFnZU51bWJlciA9IHZtLmN1cnJlbnRQYWdlO1xuXHRcdFx0fVxuXHRcdFx0dm0ubGFzdEZldGNoZWRQYWdlID0gcGFnZU51bWJlcjtcblxuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0bGVhZFNlcnZpY2Vcblx0XHRcdFx0LnJldHJpZXZlKFxuXHRcdFx0XHRcdHZtLnRyYWRlc2hvdy5pZCxcblx0XHRcdFx0XHRwYWdlTnVtYmVyLFxuXHRcdFx0XHRcdHZtLnBlclBhZ2UsXG5cdFx0XHRcdFx0dm0ub3JkZXJCeSxcblx0XHRcdFx0XHR2bS5vcmRlckJ5UmV2ZXJzZSxcblx0XHRcdFx0XHR2bS5xdWVyeVxuXHRcdFx0XHQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHR2YXIgcmVzcG9uc2UgPSBwYXlsb2FkLmRhdGE7XG5cdFx0XHRcdFx0dm0ubGVhZHMgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdHZtLmN1cnJlbnRQYWdlID0gcmVzcG9uc2UuY3VycmVudF9wYWdlO1xuXHRcdFx0XHRcdHZtLnRvdGFsUGFnZXMgPSByZXNwb25zZS5sYXN0X3BhZ2U7XG5cblx0XHRcdFx0XHQvLyBSZXNvbHZlIHByb21pc2Vcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHBheWxvYWQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdC8vIFJlamVjdCBwcm9taXNlXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHBheWxvYWQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENhbGxiYWNrIHRvICdnbyBiYWNrJyBidXR0b25cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBnb0JhY2soKSB7XG5cdFx0XHQkc3RhdGUuZ28oJ3RyYWRlc2hvd3MnKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBGaW5kIGEgbGVhZCBpbiB0aGUgbG9jYWwgYXJyYXkgaW4gc2NvcGUgYnkgaWRcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBwbHVja0xlYWQobGVhZF9pZCkge1xuXHRcdFx0Zm9yICh2YXIgbiA9IDAsIGxlYWQ7IChsZWFkID0gdm0ubGVhZHNbbl0pOyBuKyspIHtcblx0XHRcdFx0aWYgKGxlYWQuaWQgPT0gbGVhZF9pZCkgeyByZXR1cm4gbGVhZDsgfVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJlZnJlc2ggdGhlIGxlYWRzXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gcmVmcmVzaExlYWRzKCkge1xuXHRcdFx0dm0uZ2V0TGVhZHMoKS50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0Ly8gUGFnZSBudW1iZXIgd2FzIG91dCBvZiByYW5nZSwgZmV0Y2hpbmcgbGFzdCBwYWdlIGF2YWlsYWJsZVxuXHRcdFx0XHRpZiAodm0ubGFzdEZldGNoZWRQYWdlID4gcGF5bG9hZC5kYXRhLmN1cnJlbnRfcGFnZSkge1xuXHRcdFx0XHRcdHZtLmdldExlYWRzKHBheWxvYWQuZGF0YS5sYXN0X3BhZ2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTYXZlIHRoZSBjdXJyZW50bHkgc2NvcGVkIHRyYWRlc2hvdyB1c2luZyBUcmFkZXNob3cgcmVzb3VyY2Vcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBzYXZlKCkge1xuXHRcdFx0aWYgKHZtLnRyYWRlc2hvd0Zvcm0uJHZhbGlkKSB7XG5cdFx0XHRcdC8vIEFsdGVyIHRoZSBcImJ1c3lcIiBpbmRpY2F0b3IgbWVzc2FnZVxuXHRcdFx0XHRidXN5U2VydmljZS5zZXRNZXNzYWdlKCdTYXZpbmcnKTtcblxuXHRcdFx0XHQvLyBVc2UgVHJhZGVzaG93IHJlc291cmNlIHRvIHNhdmUgY3VycmVudGx5IHNjb3BlZCB0cmFkZXNob3dcblx0XHRcdFx0VHJhZGVzaG93LnNhdmUodm0udHJhZGVzaG93KS4kcHJvbWlzZVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdC8vIFNldCB0aGUgdHJhZGVzaG93IGluIHNjb3BlXG5cdFx0XHRcdFx0XHR2bS50cmFkZXNob3cgPSBwYXlsb2FkO1xuXG5cdFx0XHRcdFx0XHQvLyBTaG93IHN1Y2Nlc3MgYWxlcnRcblx0XHRcdFx0XHRcdHZtLmFkZFN1Y2Nlc3NNZXNzYWdlKCk7XG5cblx0XHRcdFx0XHRcdCRodHRwLmRlZmF1bHRzLmNhY2hlLnJlbW92ZUFsbCgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdC8vIFNob3cgZXJyb3IgYWxlcnRcblx0XHRcdFx0XHRcdHZtLmFkZEVycm9yTWVzc2FnZSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEVuc3VyZSB3ZSBkb24ndCBnbyBvdXQtb2YtYm91bmRzXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gdXBkYXRlUGFnaW5hdGlvbigpIHtcblx0XHRcdGlmICh2bS5jdXJyZW50UGFnZSAhPSAxKSB7XG5cdFx0XHRcdHZtLmdldExlYWRzKDEpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSkoKTtcbiIsIi8qKlxuICogVHJhZGVzaG93IExpc3QgQ29udHJvbGxlclxuICogQGNsYXNzIFRyYWRlc2hvd0xpc3RDb250cm9sbGVyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIERpc3BsYXlzIGEgcGFnaW5hdGVkLCBmaWx0ZXJlZCB0YWJsZSBvZiBhbGwgdHJhZGVzaG93cy5cbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd0cmFkZXNob3dDb250cm9sbGVycycpXG5cdFx0LmNvbmZpZyhmdW5jdGlvbihzbGlkZU1lbnVTZXJ2aWNlUHJvdmlkZXIpIHtcblx0XHRcdHNsaWRlTWVudVNlcnZpY2VQcm92aWRlci5yZWdpc3Rlck1lbnUoJ3RyYWRlc2hvdycsIHtcblx0XHRcdFx0dGl0bGU6ICdUcmFkZXNob3cge3t0cmFkZXNob3cubmFtZX19Jyxcblx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHRlZGl0OiB7XG5cdFx0XHRcdFx0XHR1cmw6ICd0cmFkZXNob3dzL3t7dHJhZGVzaG93LmlkfX0vZWRpdCcsXG5cdFx0XHRcdFx0XHR0aXRsZTogJ0VkaXQnXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWxldGU6IHtcblx0XHRcdFx0XHRcdGNsaWNrOiAnY3RybC5kZWxldGVUcmFkZXNob3codHJhZGVzaG93LmlkKScsXG5cdFx0XHRcdFx0XHR0aXRsZTogJ0RlbGV0ZSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcG9ydDoge1xuXHRcdFx0XHRcdFx0Y2xpY2s6ICdjdHJsLmRvd25sb2FkUmVwb3J0KHRyYWRlc2hvdy5pZCknLFxuXHRcdFx0XHRcdFx0dGl0bGU6ICdFeGNlbCBSZXBvcnQnXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0c2xpZGVNZW51U2VydmljZVByb3ZpZGVyLnJlZ2lzdGVyTWVudSgnbGVhZCcsIHtcblx0XHRcdFx0dGl0bGU6ICdMZWFkIHt7bGVhZC5lbWFpbF9hZGRyZXNzfX0nLFxuXHRcdFx0XHRpdGVtczoge1xuXHRcdFx0XHRcdGVkaXQ6IHtcblx0XHRcdFx0XHRcdHVybDogJ2xlYWRzL3t7bGVhZC5pZH19L2VkaXQnLFxuXHRcdFx0XHRcdFx0dGl0bGU6ICdFZGl0J1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBkZWxldGU6IHtcblx0XHRcdFx0Ly8gXHRjbGljazogJ2N0cmwuZGVsZXRlVHJhZGVzaG93KHRyYWRlc2hvdy5pZCknLFxuXHRcdFx0XHQvLyBcdHRpdGxlOiAnRGVsZXRlJ1xuXHRcdFx0XHQvLyB9LFxuXHRcdFx0fSk7XG5cdFx0fSlcblx0XHQuY29udHJvbGxlcignVHJhZGVzaG93TGlzdENvbnRyb2xsZXInLCBUcmFkZXNob3dMaXN0Q29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gVHJhZGVzaG93TGlzdENvbnRyb2xsZXIoJHNjb3BlLCAkcSwgJHRpbWVvdXQsIENhY2hlRmFjdG9yeSwgbmdEaWFsb2csIGxvZ2luU2VydmljZSwgYnVzeVNlcnZpY2UsIG1lc3NhZ2VTZXJ2aWNlLCB0cmFkZXNob3dTZXJ2aWNlLCBsZWFkU2VydmljZSwgcHJvbWlzZWREYXRhLCBwcm9taXNlZEZvcm1DYWNoZSkge1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHR2bS5kZWxldGVUcmFkZXNob3cgXHQgPSBkZWxldGVUcmFkZXNob3c7XG5cdFx0dm0uZG93bmxvYWRSZXBvcnQgXHQgPSBkb3dubG9hZFJlcG9ydDtcblx0XHR2bS5nZXRMZWFkcyBcdFx0ID0gZ2V0TGVhZHM7XG5cdFx0dm0uZ2V0VHJhZGVzaG93cyBcdCA9IGdldFRyYWRlc2hvd3M7XG5cdFx0dm0ucGx1Y2tUcmFkZXNob3cgXHQgPSBwbHVja1RyYWRlc2hvdztcblx0XHR2bS5yZWZyZXNoVHJhZGVzaG93cyA9IHJlZnJlc2hUcmFkZXNob3dzO1xuXG5cdFx0dm0uY3VycmVudFBhZ2UgXHRcdD0gcHJvbWlzZWREYXRhLmRhdGEuY3VycmVudF9wYWdlO1xuXHRcdHZtLmZvcm1DYWNoZVx0XHQ9IHByb21pc2VkRm9ybUNhY2hlO1xuXHRcdHZtLmxhc3RGZXRjaGVkUGFnZSAgPSAxO1xuXHRcdHZtLm9yZGVyQnkgXHRcdFx0PSBcInVwZGF0ZWRfYXRcIjtcblx0XHR2bS5vcmRlckJ5UmV2ZXJzZSBcdD0gXCIwXCI7XG5cdFx0dm0ucGVyUGFnZSBcdFx0XHQ9IFwiMTVcIjtcblx0XHR2bS5xdWVyeSBcdFx0XHQ9IFwiXCI7XG5cdFx0dm0udG90YWxQYWdlc1x0XHQ9IHByb21pc2VkRGF0YS5kYXRhLmxhc3RfcGFnZTtcblx0XHR2bS50cmFkZXNob3dzXHRcdD0gcHJvbWlzZWREYXRhLmRhdGEuZGF0YTtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHQvLy8vLy8vLy9cblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0Ly8gV2F0Y2ggc2NvcGUgdmFyaWFibGVzIHRvIHVwZGF0ZSBjYWNoZVxuXHRcdFx0YW5ndWxhci5mb3JFYWNoKFsnY3VycmVudFBhZ2UnLCAnb3JkZXJCeScsICdvcmRlckJ5UmV2ZXJzZScsICdwZXJQYWdlJywgJ3F1ZXJ5J10sIGZ1bmN0aW9uKHZhck5hbWUpIHtcblx0XHRcdFx0dmFyIHZhbCA9IHZtLmZvcm1DYWNoZS5nZXQodmFyTmFtZSk7XG5cdFx0XHRcdGlmICh2YWwgIT09IHVuZGVmaW5lZCAmJiB2YWwgIT09IG51bGwpIHtcblx0XHRcdFx0XHR2bVt2YXJOYW1lXSA9IHZhbDtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuJHdhdGNoKCdjdHJsLicgKyB2YXJOYW1lLCBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgbmV3VmFsICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdCAgICB2bS5mb3JtQ2FjaGUucHV0KHZhck5hbWUsIG5ld1ZhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogRGVsZXRlIGEgdHJhZGVzaG93IHVzaW5nIHRoZSB0cmFkZXNob3cgc2VydmljZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGRlbGV0ZVRyYWRlc2hvdyh0cmFkZXNob3dfaWQpIHtcblx0XHRcdHZhciB0cmFkZXNob3cgPSB2bS5wbHVja1RyYWRlc2hvdyh0cmFkZXNob3dfaWQpO1xuXHRcdFx0dHJhZGVzaG93U2VydmljZS5kZWxldGVUcmFkZXNob3codHJhZGVzaG93KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYSB0cmFkZXNob3cgaGFzIGxlYWRzLCBhbmQgcm91dGVzIHVzZXIgdG8gVVJMIHRvIGRvd25sb2FkIHJlcG9ydFxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGRvd25sb2FkUmVwb3J0KHRyYWRlc2hvd19pZCkge1xuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS90cmFkZXNob3dzLycgKyB0cmFkZXNob3dfaWQgKyAnL3JlcG9ydD90b2tlbj0nICsgbG9naW5TZXJ2aWNlLnRva2VuLmdldCgpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFVzZSBsZWFkU2VydmljZSB0byBmZXRjaCBsZWFkcyBmb3IgdGhlIHRyYWRlc2hvd1xuXHRcdCAqL1xuXHRcdCBmdW5jdGlvbiBnZXRMZWFkcyhwYWdlTnVtYmVyLCB0cmFkZXNob3cpIHtcblx0XHQgXHRidXN5U2VydmljZS5mb3JjZUhpZGUoKTtcblx0XHRcdGlmICh0cmFkZXNob3cgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR0cmFkZXNob3cgPSB2bS5zZWxlY3RlZFRyYWRlc2hvdztcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR2bS5zZWxlY3RlZFRyYWRlc2hvdyA9IHRyYWRlc2hvdztcblx0XHRcdH1cblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsZWFkU2VydmljZVxuXHRcdFx0XHRcdC5yZXRyaWV2ZSh0cmFkZXNob3cuaWQsIHBhZ2VOdW1iZXIsIDUwLCAnaWQnLCAwKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdGJ1c3lTZXJ2aWNlLmZvcmNlSGlkZSh0cnVlKTtcblx0XHRcdFx0XHRcdHZhciByZXNwb25zZSA9IHBheWxvYWQuZGF0YTtcblxuXHRcdFx0XHRcdFx0dm0ubGVhZHMgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdFx0dm0ubGVhZEN1cnJlbnRQYWdlID0gcmVzcG9uc2UuY3VycmVudF9wYWdlO1xuXHRcdFx0XHRcdFx0dm0ubGVhZFRvdGFsUGFnZXMgPSByZXNwb25zZS5sYXN0X3BhZ2U7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0dm0uYWRkRXJyb3JNZXNzYWdlKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBbZ2V0VHJhZGVzaG93cyB1c2UgdHJhZGVzaG93U2VydmljZSB0byBmZXRjaCB0cmFkZXNob3dzXVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGdldFRyYWRlc2hvd3MocGFnZU51bWJlcikge1xuXHRcdFx0aWYgKHBhZ2VOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRwYWdlTnVtYmVyID0gdm0uY3VycmVudFBhZ2U7XG5cdFx0XHR9XG5cdFx0XHR2bS5sYXN0RmV0Y2hlZFBhZ2UgPSBwYWdlTnVtYmVyO1xuXG5cdFx0XHRidXN5U2VydmljZS5zZXRNZXNzYWdlKCdXb3JraW5nIG9uIGl0Jyk7XG5cblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdHRyYWRlc2hvd1NlcnZpY2Vcblx0XHRcdFx0LnJldHJpZXZlKFxuXHRcdFx0XHRcdHBhZ2VOdW1iZXIsXG5cdFx0XHRcdFx0dm0ucGVyUGFnZSxcblx0XHRcdFx0XHR2bS5vcmRlckJ5LFxuXHRcdFx0XHRcdHZtLm9yZGVyQnlSZXZlcnNlLFxuXHRcdFx0XHRcdHZtLnF1ZXJ5XG5cdFx0XHRcdClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdHZhciByZXNwb25zZSA9IHBheWxvYWQuZGF0YTtcblxuXHRcdFx0XHRcdHZtLnRyYWRlc2hvd3MgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdHZtLmN1cnJlbnRQYWdlID0gcmVzcG9uc2UuY3VycmVudF9wYWdlO1xuXHRcdFx0XHRcdHZtLnRvdGFsUGFnZXMgPSByZXNwb25zZS5sYXN0X3BhZ2U7XG5cblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHBheWxvYWQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChwYXlsb2FkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBGaW5kIGEgdHJhZGVzaG93IGluIHRoZSBsb2NhbCBhcnJheSBieSBpZFxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHBsdWNrVHJhZGVzaG93KHRyYWRlc2hvd19pZCkge1xuXHRcdFx0Zm9yICh2YXIgbiA9IDAsIHRyYWRlc2hvdzsgKHRyYWRlc2hvdyA9IHZtLnRyYWRlc2hvd3Nbbl0pOyBuKyspIHtcblx0XHRcdFx0aWYgKHRyYWRlc2hvdy5pZCA9PSB0cmFkZXNob3dfaWQpIHsgcmV0dXJuIHRyYWRlc2hvdzsgfVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFtyZWZyZXNoVHJhZGVzaG93cyBDYWxscyBnZXRUcmFkZXNob3dzIHdpdGggdGhlIGN1cnJlbnRseSBzY29wZWQgcGFnZSBudW1iZXJdXG5cdFx0ICovXG5cdFx0IGZ1bmN0aW9uIHJlZnJlc2hUcmFkZXNob3dzKCkge1xuXHRcdFx0dm0uZ2V0VHJhZGVzaG93cygpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHQvLyBQYWdlIG51bWJlciB3YXMgb3V0IG9mIHJhbmdlLCBmZXRjaGluZyBsYXN0IHBhZ2UgYXZhaWxhYmxlXG5cdFx0XHRcdGlmICh2bS5sYXN0RmV0Y2hlZFBhZ2UgPiBwYXlsb2FkLmRhdGEuY3VycmVudF9wYWdlKSB7XG5cdFx0XHRcdFx0dm0uZ2V0VHJhZGVzaG93cyhwYXlsb2FkLmRhdGEubGFzdF9wYWdlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RzcG9ydGFsJywgW1xuICAgICAgICAvLyBDb250cmliXG4gICAgICAgICd1aS5yb3V0ZXInLFxuICAgICAgICAnYW5ndWxhci1qd3QnLFxuICAgICAgICAnYW5ndWxhci1jYWNoZScsXG4gICAgICAgICdhbmd1bGFyLXNwaW5raXQnLFxuICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgJ25nRGlhbG9nJyxcbiAgICAgICAgJ2ZyYXBvbnRpbGxvLmJvb3RzdHJhcC1zd2l0Y2gnLFxuXG4gICAgICAgIC8vIEFwcFxuICAgICAgICAndHNwb3J0YWxEaXJlY3RpdmVzJyxcbiAgICAgICAgJ2xvZ2luU2VydmljZScsXG4gICAgICAgICdidXN5U2VydmljZScsXG4gICAgICAgICdtZXNzYWdlU2VydmljZScsXG4gICAgICAgICdzbGlkZU1lbnVTZXJ2aWNlJyxcbiAgICAgICAgJ2F1dGhJbnRlcmNlcHRvcicsXG4gICAgICAgICdhdXRoQ29udHJvbGxlcnMnLFxuICAgICAgICAndHJhZGVzaG93Q29udHJvbGxlcnMnLFxuICAgICAgICAndHJhZGVzaG93U2VydmljZXMnLFxuICAgICAgICAnbGVhZENvbnRyb2xsZXJzJyxcbiAgICAgICAgJ2xlYWRTZXJ2aWNlcydcbiAgICBdKVxuICAgIC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xuICAgICAgICAkaHR0cFByb3ZpZGVyLnVzZUxlZ2FjeVByb21pc2VFeHRlbnNpb25zID0gZmFsc2U7XG5cbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2F1dGgnKTtcblxuICAgICAgICAkc3RhdGVQcm92aWRlci5cbiAgICAgICAgICAgIHN0YXRlKCdhdXRoJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9hdXRoJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL2xvZ2luLWZvcm0uaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDb250cm9sbGVyIGFzIGN0cmwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHN0YXRlKCdsb2dvdXQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2xvZ291dCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6JycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ291dENvbnRyb2xsZXIgYXMgY3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgc3RhdGUoJ3RyYWRlc2hvd3MnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3RyYWRlc2hvd3MnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vcGFydGlhbHMvdHJhZGVzaG93LWxpc3QuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RyYWRlc2hvd0xpc3RDb250cm9sbGVyIGFzIGN0cmwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZWREYXRhOiBmdW5jdGlvbiBwcm9taXNlZERhdGEodHJhZGVzaG93U2VydmljZSwgQ2FjaGVGYWN0b3J5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUNhY2hlRmFjdG9yeS5nZXQoJ2Zvcm1DYWNoZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENhY2hlRmFjdG9yeSgnZm9ybUNhY2hlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZU9uRXhwaXJlOiAnYWdncmVzc2l2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlTW9kZTogJ2xvY2FsU3RvcmFnZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gQ2FjaGVGYWN0b3J5LmdldCgnZm9ybUNhY2hlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFkZXNob3dTZXJ2aWNlLnJldHJpZXZlKGNhY2hlLmdldCgnY3VycmVudFBhZ2UnKSwgY2FjaGUuZ2V0KCdwZXJQYWdlJyksIGNhY2hlLmdldCgnb3JkZXJCeScpLCBjYWNoZS5nZXQoJ29yZGVyQnlSZXZlcnNlJyksIGNhY2hlLmdldCgncXVlcnknKSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VkRm9ybUNhY2hlOiBmdW5jdGlvbiBwcm9taXNlZEZvcm1DYWNoZShDYWNoZUZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENhY2hlRmFjdG9yeS5nZXQoJ2Zvcm1DYWNoZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBzdGF0ZSgndHJhZGVzaG93RWRpdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvdHJhZGVzaG93cy86aWQvZWRpdCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuLi9wYXJ0aWFscy90cmFkZXNob3ctZGV0YWlsLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUcmFkZXNob3dEZXRhaWxDb250cm9sbGVyIGFzIGN0cmwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZWREYXRhOiBmdW5jdGlvbiBwcm9taXNlZERhdGEoVHJhZGVzaG93LCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRyYWRlc2hvdy5nZXQoe2lkOiRzdGF0ZVBhcmFtcy5pZH0pLiRwcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlZExlYWREYXRhOiBmdW5jdGlvbiBwcm9taXNlZExlYWREYXRhKGxlYWRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMsIENhY2hlRmFjdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlS2V5ID0gJ3RyYWRlc2hvdycgKyAkc3RhdGVQYXJhbXMuaWQgKyAnTGVhZHNGb3JtJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ2FjaGVGYWN0b3J5LmdldChjYWNoZUtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ2FjaGVGYWN0b3J5KGNhY2hlS2V5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAxMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlT25FeHBpcmU6ICdhZ2dyZXNzaXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VNb2RlOiAnbG9jYWxTdG9yYWdlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gQ2FjaGVGYWN0b3J5LmdldChjYWNoZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGVhZFNlcnZpY2UucmV0cmlldmUoJHN0YXRlUGFyYW1zLmlkLCBjYWNoZS5nZXQoJ2N1cnJlbnRQYWdlJyksIGNhY2hlLmdldCgncGVyUGFnZScpLCBjYWNoZS5nZXQoJ29yZGVyQnknKSwgY2FjaGUuZ2V0KCdvcmRlckJ5UmV2ZXJzZScpLCBjYWNoZS5nZXQoJ3F1ZXJ5JykpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlZEZvcm1DYWNoZTogZnVuY3Rpb24gcHJvbWlzZWRGb3JtQ2FjaGUoQ2FjaGVGYWN0b3J5LCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZUtleSA9ICd0cmFkZXNob3cnICsgJHN0YXRlUGFyYW1zLmlkICsgJ0xlYWRzRm9ybSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ2FjaGVGYWN0b3J5LmdldChjYWNoZUtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHN0YXRlKCd0cmFkZXNob3dDcmVhdGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3RyYWRlc2hvd3MvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL3RyYWRlc2hvdy1kZXRhaWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RyYWRlc2hvd0NyZWF0ZUNvbnRyb2xsZXIgYXMgY3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgc3RhdGUoJ2xlYWRFZGl0Jywge1xuICAgICAgICAgICAgICAgIHVybDonL2xlYWRzLzppZC9lZGl0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL2xlYWQtZGV0YWlsLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMZWFkQ29udHJvbGxlciBhcyBjdHJsJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlYWREYXRhOiBmdW5jdGlvbiBsZWFkRGF0YShMZWFkLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMZWFkLmdldCh7aWQ6JHN0YXRlUGFyYW1zLmlkfSkuJHByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9KVxuICAgIC5ydW4oZnVuY3Rpb24gKCRodHRwLCBDYWNoZUZhY3RvcnkpIHtcbiAgICAgIGlmICghQ2FjaGVGYWN0b3J5LmdldCgnZGVmYXVsdENhY2hlJykpIHtcbiAgICAgICAgbmV3IENhY2hlRmFjdG9yeSgnZGVmYXVsdENhY2hlJywge1xuICAgICAgICAgICAgbWF4QWdlOiAxNSAqIDYwICogMTAwMCxcbiAgICAgICAgICAgIGNhY2hlRmx1c2hJbnRlcnZhbDogNjAgKiA2MCAqIDEwMDAsXG4gICAgICAgICAgICBkZWxldGVPbkV4cGlyZTogJ2FnZ3Jlc3NpdmUnXG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgICRodHRwLmRlZmF1bHRzLmNhY2hlID0gQ2FjaGVGYWN0b3J5LmdldCgnZGVmYXVsdENhY2hlJyk7XG4gICAgfSlcbiAgICAuZmlsdGVyKCd1bnNhZmUnLCBmdW5jdGlvbigkc2NlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKHZhbCk7XG4gICAgICAgIH07XG4gICAgfSk7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
