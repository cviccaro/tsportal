!function(){"use strict";function e(e,t){function r(){e.workingMessage=f.defaultMessage}function a(e){h=e?!1:!0}function n(e){return d}function o(){g=!1}function s(){return g&&!h}function i(){return $(".loading-indicator").is(":visible")}function c(){this.setMessage(this.defaultMessage)}function l(t){d=e.workingMessage=t}function u(){g=!0}var d,g=!1,h=!1,f={defaultMessage:"Working on it",forceHide:a,getMessage:n,hide:o,isBusy:s,isVisible:i,resetMessage:c,setMessage:l,show:u};return r(),f}angular.module("busyService",[]).factory("busyService",e),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t){return e("api/leads/:id",{id:"@id"},{index:{method:"GET",url:"api/tradeshows/:tradeshowId/leads",params:{tradeshowId:"@tradeshowId"}},get:{cache:t.get("defaultCache")}})}angular.module("leadServices",[]).factory("Lead",e),e.$inject=["$resource","CacheFactory"]}(),function(){"use strict";function e(e,t,r,a,n){function o(t,r,a,n,o,s){return void 0===r&&(r="1"),void 0===n&&(n="updated_at"),void 0===o&&(o=1),void 0===a&&(a=15),void 0===s&&(s=""),e.get("api/tradeshows/"+t+"/leads?page="+r+"&perPage="+a+"&orderBy="+n+"&orderByReverse="+parseInt(o)+"&filter="+s,{cache:!0})}function s(e){var a=e.first_name+" "+e.last_name,o='<span class="glyphicon glyphicon-trash red icon-large"></span><span>Are you sure you want to delete Lead <em>'+a+'</em>?<br /><strong>This cannot be undone.</strong></span><div class="dialog-buttons"><button class="btn btn-danger" ng-click="confirm()">Yes, delete</button> <button class="btn btn-cancel" ng-click="closeThisDialog()">Cancel</button></div>';t.openConfirm({plain:!0,className:"dialog-destroy ngdialog-theme-default",template:o,showClose:!1}).then(function(){n.setMessage("Deleting"),r["delete"]({id:e.id}).$promise.then(function(e){e.hasOwnProperty("success")&&e.success===!0?t.open({plain:!0,className:"dialog-success ngdialog-theme-default",template:'<span class="glyphicon glyphicon-check green icon-large"></span><span>Lead <em>'+a+"</em> has been successfully deleted.</span>"}).closePromise.then(function(){window.location.reload()}):t.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Lead <em>'+a+"</em>.</span>  Please try again or contact support."})},function(e){t.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Lead <em>'+a+"</em>.</span>  Please try again or contact support."})})})}var i={deleteLead:s,retrieve:o};return i}angular.module("leadServices").factory("leadService",e),e.$inject=["$http","ngDialog","Lead","$rootScope","busyService"]}(),function(){"use strict";function e(e,t,r,a,n,o,s){function i(){var e=r.defer();return this.hasToken()?(t.isLoggedIn=!0,e.resolve()):(this.loginCancelled(),e.reject()),e.promise}function c(){var e=this.token.get();return void 0!==e&&null!==e}function l(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function u(e){var t=r.defer();return n.post("/api/authenticate",e,{cache:!1}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise}function d(e,r){o.rejectAll(r),t.$broadcast("event:auth-login-cancelled",e),this.logout()}function g(e,r){var a=r||function(e){return e};t.$broadcast("event:auth-logged-in",e),t.isLoggedIn=!0,o.retryAll(a)}function h(){this.token.remove(),e.go("auth")}function f(e){var t=r.defer(),a=this,o={cache:!1,headers:{}};return"undefined"!=typeof e&&(o.headers.Authorization="Bearer "+e),n.get("api/authenticate/refresh",o).then(function(e){a.token.set(e.data.token),a.loginConfirmed(),t.resolve(e)})["catch"](function(e){a.loginCancelled(),t.reject(e)}),t.promise}function p(){return w.get("token")}function m(){w.remove("token")}function v(e){w.put("token",e)}a.get("authCache")||new a("authCache",{maxAge:354e4,deleteOnExpire:"aggressive",storageMode:"localStorage",onExpire:function(e,t){var r=s.get("loginService");r.refresh(t).then(function(t){w.put(e,t.data.token)})}});var w=a.get("authCache");t.isLoggedIn=void 0!==w.get("token");var y={checkApiAccess:i,hasToken:c,isValidEmail:l,login:u,loginCancelled:d,loginConfirmed:g,logout:h,refresh:f,token:{get:p,set:v,remove:m}};return y}angular.module("loginService",[]).factory("loginService",e),e.$inject=["$state","$rootScope","$q","CacheFactory","$http","httpBuffer","$injector"]}(),function(){"use strict";function e(e,t){function r(e){return e.id=s.length+1,s.push(e),e}function a(){return s}function n(e){s[e-1]&&s.splice(e-1,1)}function o(){s=[]}var s=[],i={addMessage:r,getMessages:a,purge:o,removeMessage:n};return i}angular.module("messageService",[]).factory("messageService",e),e.$inject=["$timeout","$q"]}(),function(){"use strict";function e(){function e(e,t){this.menus[e]=t}function t(e){function t(){}function r(e){var t="";for(var r in e.items){var a=e.items[r],n=a.title||r,o='<a title="'+n+'"',s=a.url,i=a.click,c=a.show;o+=s?' href="/#/'+s+'"':' href="javascript:void(0)"',i&&(o+=' ng-click="'+i+'"'),c&&(o+=' ng-show="'+c+'"'),o+=">"+n+"</a>",t+="<li>"+o+"</li>"}return"<ul>"+t+"</ul>"}var a={menus:this.menus,buildMenu:r};return t(),a}return this.menus={},this.registerMenu=e,this.$get=t,t.$inject=["$rootScope"],this}angular.module("slideMenuService",[]).provider("slideMenuService",e)}(),function(){"use strict";function e(e,t){return e("api/tradeshows/:id",{id:"@id"},{get:{cache:t.get("defaultCache")},create:{method:"POST",url:"api/tradeshows/create"},"delete":{method:"DELETE"}})}angular.module("tradeshowServices",["ngResource"]).factory("Tradeshow",e),e.$inject=["$resource","CacheFactory"]}(),function(){"use strict";function e(e,t,r,a,n){function o(e){var r=e.name,o=e.id;i=a.openConfirm({plain:!0,className:"dialog-destroy ngdialog-theme-default",template:'<span class="glyphicon glyphicon-trash red icon-large"></span><span>Are you sure you want to delete Tradeshow <em>'+r+'</em>?<br /><strong>This cannot be undone.</strong></span><div class="dialog-buttons"><button class="btn btn-danger" ng-click="confirm()">Yes, delete</button> <button class="btn btn-cancel" ng-click="closeThisDialog()">Cancel</button></div>',showClose:!1}).then(function(){n.setMessage("Deleting"),t["delete"]({tradeshowId:o}).$promise.then(function(e){e.hasOwnProperty("success")&&e.success===!0?a.open({plain:!0,className:"dialog-success ngdialog-theme-default",template:'<span class="glyphicon glyphicon-check green icon-large"></span><span>Tradeshow <em>'+r+"</em> has been successfully deleted.</span>"}).closePromise.then(function(){window.location.reload()}):a.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Tradeshow <em>'+r+"</em>.</span>  Please try again or contact support."})},function(e){a.open({plain:!0,className:"dialog-error ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>An error occured when trying to delete Tradeshow <em>'+r+"</em>.</span>  Please try again or contact support."})})})}function s(t,r,a,n,o){return void 0===t&&(t="1"),void 0===a&&(a="updated_at"),void 0===n&&(n=1),void 0===r&&(r=15),void 0===o&&(o=""),e.get("api/tradeshows?page="+t+"&perPage="+r+"&orderBy="+a+"&orderByReverse="+parseInt(n)+"&filter="+o,{cache:!0})}var i,c={retrieve:s,deleteTradeshow:o};return c}angular.module("tradeshowServices").factory("tradeshowService",e),e.$inject=["$http","Tradeshow","$rootScope","ngDialog","busyService"]}(),function(){"use strict";function e(e,t,r){function a(r,a,n){function o(){t.$on("$stateChangeStart",function(){e.resetMessage(),e.show()}),t.$on("$stateChangeSuccess",function(){e.hide()})}function s(){return e.isBusy()}t.isBusy=s,o()}var n={restrict:"E",templateUrl:"../partials/busy-indicator.html",replace:!0,link:a};return n}angular.module("tsportalDirectives",[]).directive("busyIndicator",e),e.$inject=["busyService","$rootScope","$timeout"]}(),function(){"use strict";function e(){function e(e,t,r){t.addClass("clickable"),t.on("click",function(e){null===navigator.userAgent.match(/PhantomJS/g)&&(t.siblings().removeClass("active"),t.addClass("active"))})}var t={restict:"A",link:e};return t}angular.module("tsportalDirectives").directive("clickable",e)}(),function(){"use strict";function e(e,t,r){function a(a,n,o){var s=a.hasOwnProperty("ctrl")?a.ctrl:a;a.$watch(function(){return e.getMessages()},function(e,t){"undefined"!=typeof e&&(s.messages=e)}),t.$on("$stateChangeSuccess",function(){e.purge()}),s.addMessage=function(t){t=e.addMessage(t),r(function(){$(".messages .alert[message-id="+t.id+"]").addClass("in")})},s.removeMessage=function(t){$(".messages .alert[message-id="+t+"]").on("transitionend",function(){a.$apply()}).css("opacity",0),r(function(){e.removeMessage(t)})},s.addSuccessMessage=function(e){var t={icon:"ok",type:"success",iconClass:"icon-medium",dismissible:!0,message:"Your changes have been saved"};return e=$.extend(t,e),s.addMessage(e)},s.addErrorMessage=function(e){var t={type:"danger",dismissible:!0,icon:"exclamation-sign",iconClass:"icon-medium",message:"Sorry, something went wrong."};return e=$.extend(t,e),s.addMessage(e)},s.purgeMessages=function(){e.purge()}}var n={restrict:"E",templateUrl:"../partials/messages.html",replace:!0,link:a};return n}angular.module("tsportalDirectives").directive("messages",e),e.$inject=["messageService","$rootScope","$timeout"]}(),function(){"use strict";function e(){function e(e,t,r){e.getRange=function(e){return new Array(e)}}var t={restrict:"E",scope:{currentPage:"=",totalPages:"=",getResults:"&getResults",tradeshow:"="},templateUrl:"../partials/pager.html",link:e};return t}angular.module("tsportalDirectives").directive("pager",e)}(),function(){"use strict";function e(e,t,r,a,n){function o(o,s,i){function c(){g={hide:function(){s.removeClass("visible")},show:function(){s.addClass("visible")},setAlignment:function(e){o.alignment=e,s.attr("alignment",e)}},o.alignment=o.alignment||(window.outerWidth<=768?"bottom":"right"),t.$on("$stateChangeStart",function(){g.hide()}),n.bind("keyup",function(e){27===e.which&&g.hide()})}function l(){g.hide()}function u(t,n){if(r.menus&&r.menus.hasOwnProperty(t)){for(var i in n)o[i]=n[i];var c=r.menus[t],l=a('<h5 class="slide-menu-title">'+c.title+"</h5>")(o);s.find("h5").replaceWith(l);var u=r.buildMenu(c),d=a(u)(o);e(function(){s.find(".slide-menu-content").html(d),g.show()})}}function d(e){g.setAlignment(e)}var g;o.openMenu=u,o.closeMenu=l,o.setAlignment=d,c()}var s={restrict:"E",replace:!0,transclude:!0,templateUrl:"../partials/slide-menu-directive.html",link:o};return s}angular.module("tsportalDirectives").directive("slideMenu",e),e.$inject=["$timeout","$rootScope","slideMenuService","$compile","$document"]}(),function(){"use strict";function e(){function e(e,t,r){e.getTimeAgo=function(e){return moment(e,moment.ISO_8601).fromNow()}}var t={restrict:"E",scope:{time:"="},template:'<span class="time-ago">{{getTimeAgo(time)}}</span>',link:e};return t}angular.module("tsportalDirectives").directive("timeago",e)}(),function(){"use strict";function e(e){function t(e,t){s.push({config:e,deferred:t})}function r(e){if(e)for(var t=0;t<s.length;++t)s[t].deferred.reject(e);s=[]}function a(e){for(var t=0;t<s.length;++t)n(e(s[t].config),s[t].deferred);s=[]}function n(t,r){function a(e){r.resolve(e)}function n(e){r.reject(e)}o=o||e.get("$http"),o(t).then(a,n)}var o,s=[],i={append:t,rejectAll:r,retryAll:a,retryHttpRequest:n};return i}function t(e,t,r,a){var n,o,s,i=/\/{0,1}api\/[a-zA-Z\/0-9\?\=\&\%\+\-\_]*/g;return{request:function(t){return n=n||e.get("loginService"),t.url.match(i)&&"/api/authenticate"!=t.url&&!t.headers.hasOwnProperty("Authorization")&&(n.hasToken()?t.headers.Authorization="Bearer "+n.token.get():(s=s||e.get("$state"),s.go("auth"))),t},response:function(t){var r=t.config;return"/api/authenticate"==r.url&&"POST"==r.method&&200==t.status&&(n=n||e.get("loginService"),t.data.hasOwnProperty("token")&&(n.token.set(t.data.token),n.loginConfirmed())),t},responseError:function(i){var c=r.defer();switch(n=n||e.get("loginService"),s=s||e.get("$state"),i.status){case 400:n.loginCancelled();break;case 401:if(i.data.hasOwnProperty("error")&&"token_expired"==i.data.error)return a.append(i.config,c),t.$broadcast("event:auth-login-required",i),n.hasToken()&&n.refresh(),c.promise;break;case 403:t.$broadcast("event:auth-forbidden",i),n.loginCancelled();break;case 500:o=o||e.get("ngDialog"),o.open({plain:!0,className:"dialog-save ngdialog-theme-default",template:'<span class="glyphicon glyphicon-exclamation-sign red icon-large"></span><span>Sorry, something went wrong.  Try again later.</span>'})}return c.reject(i),c.promise}}}angular.module("authInterceptor",[]).factory("httpBuffer",e).config(["$httpProvider",function(e){e.interceptors.push(t)}]),e.$inject=["$injector"],t.$inject=["$injector","$rootScope","$q","httpBuffer"]}(),function(){"use strict";function e(e,t){var r=/\/{0,1}api\/[a-zA-Z\/0-9\?\=\&\%\+\-\_]*/g;return{request:function(t){return t.url.match(r)&&e.show(),t},response:function(t){return t.config.url.match(r)&&e.hide(),t},responseError:function(a){return a.config.url.match(r)&&e.hide(),t.reject(a)}}}angular.module("busyService").config(["$httpProvider",function(t){t.interceptors.push(e)}]),e.$inject=["busyService","$q"]}(),function(){"use strict";function e(e,t,r,a,n,o){function s(){o.get("loginForm")||new o("loginForm",{maxAge:24192e5,deleteOnExpire:"aggressive",storageMode:"localStorage"}),c.cache=o.get("loginForm"),c.cache.get("rememberMe")&&c.cache.get("email")&&(c.rememberMe=c.cache.get("rememberMe"),c.email=c.cache.get("email")),a.hasToken()&&r.go("tradeshows")}function i(){var e={email:c.email,password:c.password};c.purgeMessages(),a.login(e).then(function(e){c.rememberMe&&(c.cache.put("email",c.email),c.cache.put("rememberMe",c.rememberMe)),r.go("tradeshows")})["catch"](function(e){c.addErrorMessage({message:"The email or password entered was incorrect."})})}var c=this;c.cache=null,c.rememberMe=!1,c.login=i,s()}angular.module("authControllers",[]).controller("AuthController",e),e.$inject=["$rootScope","$scope","$state","loginService","$timeout","CacheFactory"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i,c,l,u,d,g){function h(){}function f(){a.go("tradeshowEdit",{id:m.lead.tradeshow_id})}function p(){m.leadForm.$valid&&(c.setMessage("Saving"),s.save(m.lead).$promise.then(function(e){m.lead=e,m.addSuccessMessage(),r.defaults.cache.removeAll()})["catch"](function(e){m.addErrorMessage()}))}var m=this;m.goBack=f,m.save=p,m.lead=u,m.title="Editing Lead",h()}angular.module("leadControllers",[]).controller("LeadController",e),e.$inject=["$scope","$q","$http","$state","$stateParams","ngDialog","Lead","Tradeshow","busyService","messageService","leadData","$timeout","$log"]}(),function(){"use strict";function e(e){e.logout()}angular.module("authControllers").controller("LogoutController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i){function c(){o.checkApiAccess()}function l(){r.go("tradeshows")}function u(){d.tradeshowForm.$valid&&(s.setMessage("Saving new"),n.create(d.tradeshow).$promise.then(function(e){var t=e.id;a.open({plain:!0,className:"dialog-save ngdialog-theme-default",template:'<span class="glyphicon glyphicon-check green icon-large"></span><span>Your new tradeshow has been created successfully.  Close this message box to proceed to the tradeshow\'s edit page.</span>'}).closePromise.then(function(e){r.go("tradeshowEdit",{id:t})})})["catch"](function(e){d.addErrorMessage()}))}var d=this;d.goBack=l,d.save=u,d.isNew=!0,d.titlePrefix="Creating new",d.tradeshow={active:0},c()}angular.module("tradeshowCreateController",[]).controller("TradeshowCreateController",e),e.$inject=["$scope","$timeout","$state","ngDialog","Tradeshow","loginService","busyService","messageService"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i,c,l,u,d,g,h){function f(){angular.forEach(["currentPage","orderBy","omg","orderByReverse","perPage","query"],function(t){S.formCache.get(t)&&(S[t]=S.formCache.get(t)),e.$watch("ctrl."+t,function(e,r){"undefined"!=typeof e&&S.formCache.put(t,e)})})}function p(e){u.deleteLead(S.pluckLead(e))}function m(e){void 0===e&&(e=S.currentPage),S.lastFetchedPage=e;var r=t.defer();return u.retrieve(S.tradeshow.id,e,S.perPage,S.orderBy,S.orderByReverse,S.query).then(function(e){var t=e.data;S.leads=t.data,S.currentPage=t.current_page,S.totalPages=t.last_page,r.resolve(e)})["catch"](function(e){r.reject(e)}),r.promise}function v(){n.go("tradeshows")}function w(e){for(var t,r=0;t=S.leads[r];r++)if(t.id==e)return t;return!1}function y(){S.getLeads().then(function(e){S.lastFetchedPage>e.data.current_page&&S.getLeads(e.data.last_page)})}function $(){S.tradeshowForm.$valid&&(i.setMessage("Saving"),l.save(S.tradeshow).$promise.then(function(e){S.tradeshow=e,S.addSuccessMessage(),r.defaults.cache.removeAll()})["catch"](function(e){S.addErrorMessage()}))}function C(){1!=S.currentPage&&S.getLeads(1)}var S=this;S.deleteLead=p,S.getLeads=m,S.goBack=v,S.pluckLead=w,S.refreshLeads=y,S.save=$,S.updatePagination=C,S.currentPage=g.data.current_page,S.formCache=h,S.isNew=!1,S.lastFetchedPage=1,S.leads=g.data.data,S.orderBy="updated_at",S.orderByReverse="0",S.perPage="15",S.query="",S.titlePrefix="Editing",S.tradeshow=d,S.totalPages=g.data.last_page,f()}angular.module("tradeshowDetailController",[]).controller("TradeshowDetailController",e),e.$inject=["$scope","$q","$http","CacheFactory","$state","ngDialog","loginService","busyService","messageService","Tradeshow","leadService","promisedData","promisedLeadData","promisedFormCache"]}(),function(){"use strict";function e(e,t,r,a,n,o,s,i,c,l,u,d){function g(){angular.forEach(["currentPage","orderBy","orderByReverse","perPage","query"],function(t){var r=C.formCache.get(t);void 0!==r&&null!==r&&(C[t]=r),e.$watch("ctrl."+t,function(e,r){"undefined"!=typeof e&&C.formCache.put(t,e)})})}function h(e){l.deleteLead(C.pluckLead(e))}function f(e){var t=C.pluckTradeshow(e);c.deleteTradeshow(t)}function p(e){window.location.href="/api/tradeshows/"+e+"/report?token="+o.token.get()}function m(e,t){s.forceHide(),void 0===t?t=C.selectedTradeshow:C.selectedTradeshow=t,r(function(){l.retrieve(t.id,e,50,"id",0).then(function(e){s.forceHide(!0);var t=e.data;C.leads=t.data,C.leadCurrentPage=t.current_page,C.leadTotalPages=t.last_page})["catch"](function(e){C.addErrorMessage()})})}function v(e){void 0===e&&(e=C.currentPage),C.lastFetchedPage=e,s.setMessage("Working on it");var r=t.defer();return c.retrieve(e,C.perPage,C.orderBy,C.orderByReverse,C.query).then(function(e){var t=e.data;C.tradeshows=t.data,C.currentPage=t.current_page,C.totalPages=t.last_page,r.resolve(e)})["catch"](function(e){r.reject(e)}),r.promise}function w(e){for(var t,r=0;t=C.leads[r];r++)if(t.id==e)return t;return!1}function y(e){for(var t,r=0;t=C.tradeshows[r];r++)if(t.id==e)return t;return!1}function $(){C.getTradeshows().then(function(e){C.lastFetchedPage>e.data.current_page&&C.getTradeshows(e.data.last_page)})}var C=this;C.deleteTradeshow=f,C.deleteLead=h,C.downloadReport=p,C.getLeads=m,C.getTradeshows=v,C.pluckLead=w,C.pluckTradeshow=y,C.refreshTradeshows=$,C.currentPage=u.data.current_page,C.formCache=d,C.lastFetchedPage=1,C.orderBy="updated_at",C.orderByReverse="1",C.perPage="15",C.query="",C.totalPages=u.data.last_page,C.tradeshows=u.data.data,g()}angular.module("tradeshowListController",[]).controller("TradeshowListController",e),e.$inject=["$scope","$q","$timeout","CacheFactory","ngDialog","loginService","busyService","messageService","tradeshowService","leadService","promisedData","promisedFormCache"]}(),function(){"use strict";angular.module("tsportal",["ui.router","angular-jwt","angular-cache","angular-spinkit","ngAnimate","ngDialog","frapontillo.bootstrap-switch","angular-chosen","tsportalDirectives","loginService","busyService","messageService","slideMenuService","authInterceptor","authControllers","tradeshowCreateController","tradeshowDetailController","tradeshowListController","tradeshowServices","leadControllers","leadServices"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","slideMenuServiceProvider",function(e,t,r,a){a.registerMenu("tradeshow",{title:"Tradeshow<br /><small>{{tradeshow.name}}</small>",items:{edit:{url:"tradeshows/{{tradeshow.id}}/edit",title:"Edit"},"delete":{click:"ctrl.deleteTradeshow(tradeshow.id)",title:"Delete"},report:{click:"ctrl.downloadReport(tradeshow.id)",title:"Excel Report",show:"tradeshow.lead_count > 0"}}}),a.registerMenu("lead",{title:"Lead<br /><small>{{lead.first_name}} {{lead.last_name}}</small><br /><small>{{lead.email_address}}</small>",items:{edit:{url:"leads/{{lead.id}}/edit",title:"Edit"},"delete":{click:"ctrl.deleteLead(lead.id)",title:"Delete"}}}),r.useLegacyPromiseExtensions=!1,t.otherwise("/auth"),e.state("auth",{url:"/auth",templateUrl:"../partials/login-form.html",controller:"AuthController as ctrl"}).state("logout",{url:"/logout",template:"",controller:"LogoutController as ctrl"}).state("tradeshows",{url:"/tradeshows",templateUrl:"../partials/tradeshow-list.html",controller:"TradeshowListController as ctrl",resolve:{promisedData:["tradeshowService","CacheFactory",function(e,t){t.get("formCache")||new t("formCache",{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage"});var r=t.get("formCache");return e.retrieve(r.get("currentPage"),r.get("perPage"),r.get("orderBy"),r.get("orderByReverse"),r.get("query"))}],promisedFormCache:["CacheFactory",function(e){return e.get("formCache")}]}}).state("tradeshowEdit",{url:"/tradeshows/:id/edit",templateUrl:"../partials/tradeshow-detail.html",controller:"TradeshowDetailController as ctrl",resolve:{promisedData:["Tradeshow","$stateParams",function(e,t){return e.get({id:t.id}).$promise}],promisedLeadData:["leadService","$stateParams","CacheFactory",function(e,t,r){var a="tradeshow"+t.id+"LeadsForm";r.get(a)||new r(a,{maxAge:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage"});var n=r.get(a);return e.retrieve(t.id,n.get("currentPage"),n.get("perPage"),n.get("orderBy"),n.get("orderByReverse"),n.get("query"))}],promisedFormCache:["CacheFactory","$stateParams",function(e,t){var r="tradeshow"+t.id+"LeadsForm";return e.get(r)}]}}).state("tradeshowCreate",{url:"/tradeshows/create",templateUrl:"../partials/tradeshow-detail.html",controller:"TradeshowCreateController as ctrl"}).state("leadEdit",{url:"/leads/:id/edit",templateUrl:"../partials/lead-detail.html",controller:"LeadController as ctrl",resolve:{leadData:["Lead","$stateParams",function(e,t){return e.get({id:t.id}).$promise}]}})}]).run(["$http","CacheFactory",function(e,t){t.get("defaultCache")||new t("defaultCache",{maxAge:9e5,cacheFlushInterval:36e5,deleteOnExpire:"aggressive"}),e.defaults.cache=t.get("defaultCache")}]).filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1c3lTZXJ2aWNlLmpzIiwicHVibGljL2pzL2FwcC5iYXNlLmpzIiwibGVhZFJlc291cmNlLmpzIiwibGVhZFNlcnZpY2UuanMiLCJsb2dpblNlcnZpY2UuanMiLCJtZXNzYWdlU2VydmljZS5qcyIsInNsaWRlTWVudVNlcnZpY2UuanMiLCJ0cmFkZXNob3dSZXNvdXJjZS5qcyIsInRyYWRlc2hvd1NlcnZpY2UuanMiLCJidXN5SW5kaWNhdG9yRGlyZWN0aXZlLmpzIiwiY2xpY2thYmxlRGlyZWN0aXZlLmpzIiwibWVzc2FnZXNEaXJlY3RpdmUuanMiLCJwYWdlckRpcmVjdGl2ZS5qcyIsInNsaWRlTWVudURpcmVjdGl2ZS5qcyIsInRpbWVhZ29EaXJlY3RpdmUuanMiLCJhdXRoSW50ZXJjZXB0b3IuanMiLCJidXN5U2VydmljZUludGVyY2VwdG9yLmpzIiwiYXV0aENvbnRyb2xsZXIuanMiLCJsZWFkQ29udHJvbGxlci5qcyIsImxvZ291dENvbnRyb2xsZXIuanMiLCJ0cmFkZXNob3dDcmVhdGVDb250cm9sbGVyLmpzIiwidHJhZGVzaG93RGV0YWlsQ29udHJvbGxlci5qcyIsInRyYWRlc2hvd0xpc3RDb250cm9sbGVyLmpzIiwiYXBwLmFuZ3VsYXIuanMiXSwibmFtZXMiOlsiYnVzeVNlcnZpY2UiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCJhY3RpdmF0ZSIsIndvcmtpbmdNZXNzYWdlIiwic2VydmljZSIsImRlZmF1bHRNZXNzYWdlIiwiZm9yY2VIaWRlIiwicmVzZXQiLCJoaWRkZW5CeUZvcmNlIiwiZ2V0TWVzc2FnZSIsIm1zZyIsIm1lc3NhZ2UiLCJoaWRlIiwiYW1JQnVzeSIsImlzQnVzeSIsImlzVmlzaWJsZSIsIiQiLCJpcyIsInJlc2V0TWVzc2FnZSIsInRoaXMiLCJzZXRNZXNzYWdlIiwic2hvdyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJGluamVjdCIsIkxlYWQiLCIkcmVzb3VyY2UiLCJDYWNoZUZhY3RvcnkiLCJpZCIsImluZGV4IiwibWV0aG9kIiwidXJsIiwicGFyYW1zIiwidHJhZGVzaG93SWQiLCJnZXQiLCJjYWNoZSIsImxlYWRTZXJ2aWNlIiwiJGh0dHAiLCJuZ0RpYWxvZyIsInJldHJpZXZlIiwidHJhZGVob3dfaWQiLCJwYWdlTnVtYmVyIiwicGVyUGFnZSIsIm9yZGVyQnkiLCJvcmRlckJ5UmV2ZXJzZSIsImZpbHRlciIsInVuZGVmaW5lZCIsInBhcnNlSW50IiwiZGVsZXRlTGVhZCIsImxlYWQiLCJsZWFkX25hbWUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZGlhbG9nX2h0bWwiLCJvcGVuQ29uZmlybSIsInBsYWluIiwiY2xhc3NOYW1lIiwidGVtcGxhdGUiLCJzaG93Q2xvc2UiLCJ0aGVuIiwiJHByb21pc2UiLCJwYXlsb2FkIiwiaGFzT3duUHJvcGVydHkiLCJzdWNjZXNzIiwib3BlbiIsImNsb3NlUHJvbWlzZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXJyb3JSZXNwb25zZSIsImxvZ2luU2VydmljZSIsIiRzdGF0ZSIsIiRxIiwiaHR0cEJ1ZmZlciIsIiRpbmplY3RvciIsImNoZWNrQXBpQWNjZXNzIiwiZGVmZXJyZWQiLCJkZWZlciIsImhhc1Rva2VuIiwiaXNMb2dnZWRJbiIsInJlc29sdmUiLCJsb2dpbkNhbmNlbGxlZCIsInJlamVjdCIsInByb21pc2UiLCJ0IiwidG9rZW4iLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsInBhdHRlcm4iLCJ0ZXN0IiwibG9naW4iLCJjcmVkZW50aWFscyIsInBvc3QiLCJkYXRhIiwicmVhc29uIiwicmVqZWN0QWxsIiwiJGJyb2FkY2FzdCIsImxvZ291dCIsImxvZ2luQ29uZmlybWVkIiwiY29uZmlnVXBkYXRlciIsInVwZGF0ZXIiLCJjb25maWciLCJyZXRyeUFsbCIsInJlbW92ZSIsImdvIiwicmVmcmVzaCIsInRva2VuU3RyaW5nIiwidGhhdCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic2V0IiwidG9rZW5HZXQiLCJ0b2tlblJlbW92ZSIsInRva2VuU2V0IiwicHV0IiwibWF4QWdlIiwiZGVsZXRlT25FeHBpcmUiLCJzdG9yYWdlTW9kZSIsIm9uRXhwaXJlIiwia2V5IiwidmFsdWUiLCJzdmMiLCJtZXNzYWdlU2VydmljZSIsImFkZE1lc3NhZ2UiLCJtZXNzYWdlcyIsImxlbmd0aCIsInB1c2giLCJnZXRNZXNzYWdlcyIsInJlbW92ZU1lc3NhZ2UiLCJzcGxpY2UiLCJwdXJnZSIsInNsaWRlTWVudVByb3ZpZGVyIiwicmVnaXN0ZXJNZW51IiwibmFtZSIsIm1lbnVzIiwic2xpZGVNZW51U2VydmljZSIsImJ1aWxkTWVudSIsImh0bWwiLCJhY3Rpb25OYW1lIiwiaXRlbXMiLCJhY3Rpb24iLCJ0aXRsZSIsImxpbmsiLCJvbkNsaWNrIiwiY2xpY2siLCIkZ2V0IiwicHJvdmlkZXIiLCJUcmFkZXNob3ciLCJjcmVhdGUiLCJkZWxldGUiLCJ0cmFkZXNob3dTZXJ2aWNlIiwiZGVsZXRlVHJhZGVzaG93IiwidHJhZGVzaG93IiwidHJhZGVzaG93X25hbWUiLCJ0cmFkZXNob3dfaWQiLCJhY3RpdmVEaWFsb2ciLCJidXN5SW5kaWNhdG9yRGlyZWN0aXZlIiwiYnVzeUluZGljYXRvckRpcmVjdGl2ZUxpbmsiLCJzY29wZSIsImVsZW0iLCJhdHRycyIsIiRvbiIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwidGVtcGxhdGVVcmwiLCJyZXBsYWNlIiwiY2xpY2thYmxlRGlyZWN0aXZlIiwiY2xpY2thYmxlRGlyZWN0aXZlTGluayIsImFkZENsYXNzIiwib24iLCIkZXZlbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJyZXN0aWN0IiwibWVzc2FnZXNEaXJlY3RpdmUiLCJtZXNzYWdlc0RpcmVjdGl2ZUxpbmsiLCJ2bSIsImN0cmwiLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCIkYXBwbHkiLCJjc3MiLCJhZGRTdWNjZXNzTWVzc2FnZSIsImRlZmF1bHRzIiwiaWNvbiIsInR5cGUiLCJpY29uQ2xhc3MiLCJkaXNtaXNzaWJsZSIsImV4dGVuZCIsImFkZEVycm9yTWVzc2FnZSIsInB1cmdlTWVzc2FnZXMiLCJwYWdlckRpcmVjdGl2ZSIsInBhZ2VyRGlyZWN0aXZlTGluayIsImdldFJhbmdlIiwibnVtIiwiQXJyYXkiLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJnZXRSZXN1bHRzIiwic2xpZGVNZW51RGlyZWN0aXZlIiwiJGNvbXBpbGUiLCIkZG9jdW1lbnQiLCJzbGlkZU1lbnVEaXJlY3RpdmVMaW5rIiwiJHNjb3BlIiwic2xpZGVNZW51Iiwic2V0QWxpZ25tZW50IiwicG9zIiwiYWxpZ25tZW50IiwiYXR0ciIsIm91dGVyV2lkdGgiLCJiaW5kIiwiZSIsIndoaWNoIiwiY2xvc2VNZW51Iiwib3Blbk1lbnUiLCJtZW51TmFtZSIsIm9iak1hcCIsIm1lbnUiLCJjb21waWxlZFRpdGxlIiwiZmluZCIsInJlcGxhY2VXaXRoIiwiYnVpbHQiLCJjb21waWxlZCIsInRyYW5zY2x1ZGUiLCJ0aW1lYWdvRGlyZWN0aXZlIiwidGltZWFnb0RpcmVjdGl2ZUxpbmsiLCJnZXRUaW1lQWdvIiwidGltZSIsIm1vbWVudCIsIklTT184NjAxIiwiZnJvbU5vdyIsImFwcGVuZCIsImJ1ZmZlciIsImkiLCJyZXRyeUh0dHBSZXF1ZXN0Iiwic3VjY2Vzc0NhbGxiYWNrIiwicmVzcG9uc2UiLCJlcnJvckNhbGxiYWNrIiwiYXV0aEludGVyY2VwdG9yIiwiYXBpUGF0dGVybiIsInJlcXVlc3QiLCJzdGF0dXMiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwiZXJyb3IiLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwiYnVzeVNlcnZpY2VJbnRlcmNlcHRvciIsIkF1dGhDb250cm9sbGVyIiwicmVtZW1iZXJNZSIsInBhc3N3b3JkIiwiY29udHJvbGxlciIsIkxlYWRDb250cm9sbGVyIiwiJHN0YXRlUGFyYW1zIiwibGVhZERhdGEiLCIkbG9nIiwiZ29CYWNrIiwic2F2ZSIsImxlYWRGb3JtIiwiJHZhbGlkIiwicmVtb3ZlQWxsIiwiTG9nb3V0Q29udHJvbGxlciIsIlRyYWRlc2hvd0NyZWF0ZUNvbnRyb2xsZXIiLCJ0cmFkZXNob3dGb3JtIiwiaXNOZXciLCJ0aXRsZVByZWZpeCIsImFjdGl2ZSIsIlRyYWRlc2hvd0RldGFpbENvbnRyb2xsZXIiLCJwcm9taXNlZERhdGEiLCJwcm9taXNlZExlYWREYXRhIiwicHJvbWlzZWRGb3JtQ2FjaGUiLCJmb3JFYWNoIiwiZm9ybUNhY2hlIiwibGVhZF9pZCIsInBsdWNrTGVhZCIsImdldExlYWRzIiwibGFzdEZldGNoZWRQYWdlIiwicXVlcnkiLCJsZWFkcyIsImN1cnJlbnRfcGFnZSIsImxhc3RfcGFnZSIsIm4iLCJyZWZyZXNoTGVhZHMiLCJ1cGRhdGVQYWdpbmF0aW9uIiwiVHJhZGVzaG93TGlzdENvbnRyb2xsZXIiLCJ2YXJOYW1lIiwidmFsIiwicGx1Y2tUcmFkZXNob3ciLCJkb3dubG9hZFJlcG9ydCIsImhyZWYiLCJzZWxlY3RlZFRyYWRlc2hvdyIsImxlYWRDdXJyZW50UGFnZSIsImxlYWRUb3RhbFBhZ2VzIiwiZ2V0VHJhZGVzaG93cyIsInRyYWRlc2hvd3MiLCJyZWZyZXNoVHJhZGVzaG93cyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic2xpZGVNZW51U2VydmljZVByb3ZpZGVyIiwiZWRpdCIsInJlcG9ydCIsInVzZUxlZ2FjeVByb21pc2VFeHRlbnNpb25zIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJjYWNoZUtleSIsInJ1biIsImNhY2hlRmx1c2hJbnRlcnZhbCIsIiRzY2UiLCJ0cnVzdEFzSHRtbCJdLCJtYXBwaW5ncyI6IkNBSUEsV0FFQSxZQU1BLFNBQUFBLEdBQUFDLEVBQUFDLEdBcUJBLFFBQUFDLEtBQ0FGLEVBQUFHLGVBQUFDLEVBQUFDLGVBR0EsUUFBQUMsR0FBQUMsR0FDQUMsRUFBQUQsR0FBQSxHQUFBLEVBR0EsUUFBQUUsR0FBQUMsR0FDQSxNQUFBQyxHQUdBLFFBQUFDLEtBQ0FD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QUFyTyxLQUFBZ0MsV0FFQXFOLGtCQUFBLGNBQUEsZUFBQSxlQUFBLFNBQUE3TyxFQUFBNk4sRUFBQXRPLEdBQ0EsR0FBQXlSLEdBQUEsWUFBQW5ELEVBQUFyTyxHQUFBLFdBQ0FELEdBQUFPLElBQUFrUixJQUNBLEdBQUF6UixHQUFBeVIsR0FDQWpNLE9BQUEsS0FDQUMsZUFBQSxhQUNBQyxZQUFBLGdCQUdBLElBQUFsRixHQUFBUixFQUFBTyxJQUFBa1IsRUFDQSxPQUFBaFIsR0FBQUcsU0FBQTBOLEVBQUFyTyxHQUFBTyxFQUFBRCxJQUFBLGVBQUFDLEVBQUFELElBQUEsV0FBQUMsRUFBQUQsSUFBQSxXQUFBQyxFQUFBRCxJQUFBLGtCQUFBQyxFQUFBRCxJQUFBLFlBRUFnUCxtQkFBQSxlQUFBLGVBQUEsU0FBQXZQLEVBQUFzTyxHQUNBLEdBQUFtRCxHQUFBLFlBQUFuRCxFQUFBck8sR0FBQSxXQUNBLE9BQUFELEdBQUFPLElBQUFrUixRQUlBRCxNQUFBLG1CQUNBcFIsSUFBQSxxQkFDQXFJLFlBQUEsb0NBQ0EyRixXQUFBLHNDQUVBb0QsTUFBQSxZQUNBcFIsSUFBQSxrQkFDQXFJLFlBQUEsK0JBQ0EyRixXQUFBLHlCQUNBL0ssU0FDQWtMLFVBQUEsT0FBQSxlQUFBLFNBQUF6TyxFQUFBd08sR0FDQSxNQUFBeE8sR0FBQVMsS0FBQU4sR0FBQXFPLEVBQUFyTyxLQUFBZ0MsaUJBS0F5UCxLQUFBLFFBQUEsZUFBQSxTQUFBaFIsRUFBQVYsR0FDQUEsRUFBQU8sSUFBQSxpQkFDQSxHQUFBUCxHQUFBLGdCQUNBd0YsT0FBQSxJQUNBbU0sbUJBQUEsS0FDQWxNLGVBQUEsZUFJQS9FLEVBQUFzSixTQUFBeEosTUFBQVIsRUFBQU8sSUFBQSxtQkFFQVcsT0FBQSxVQUFBLE9BQUEsU0FBQTBRLEdBQ0EsTUFBQSxVQUFBckIsR0FDQSxNQUFBcUIsR0FBQUMsWUFBQXRCIiwiZmlsZSI6InB1YmxpYy9qcy9hcHAuYmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQnVzeSBJbmRpY2F0b3IgU2VydmljZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2J1c3lTZXJ2aWNlJyxbXSlcblx0XHQuZmFjdG9yeSgnYnVzeVNlcnZpY2UnLCBidXN5U2VydmljZSk7XG5cblx0ZnVuY3Rpb24gYnVzeVNlcnZpY2UoJHJvb3RTY29wZSwgJHRpbWVvdXQpIHtcblx0XHR2YXIgbWVzc2FnZSwgdGltZXIsIGFtSUJ1c3kgPSBmYWxzZSwgaGlkZGVuQnlGb3JjZSA9IGZhbHNlO1xuXG5cdFx0dmFyIHNlcnZpY2UgPSB7XG5cdFx0XHRkZWZhdWx0TWVzc2FnZTogJ1dvcmtpbmcgb24gaXQnLFxuXHRcdFx0Zm9yY2VIaWRlOiBmb3JjZUhpZGUsXG5cdFx0XHRnZXRNZXNzYWdlOiBnZXRNZXNzYWdlLFxuXHRcdFx0aGlkZTogaGlkZSxcblx0XHRcdGlzQnVzeTogaXNCdXN5LFxuXHRcdFx0aXNWaXNpYmxlOiBpc1Zpc2libGUsXG5cdFx0XHRyZXNldE1lc3NhZ2U6IHJlc2V0TWVzc2FnZSxcblx0XHRcdHNldE1lc3NhZ2U6IHNldE1lc3NhZ2UsXG5cdFx0XHRzaG93OiBzaG93XG5cdFx0fTtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRyZXR1cm4gc2VydmljZTtcblxuXHRcdC8vLy8vLy8vL1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHQkcm9vdFNjb3BlLndvcmtpbmdNZXNzYWdlID0gc2VydmljZS5kZWZhdWx0TWVzc2FnZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBmb3JjZUhpZGUocmVzZXQpIHtcblx0XHRcdGhpZGRlbkJ5Rm9yY2UgPSByZXNldCA/IGZhbHNlIDogdHJ1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRNZXNzYWdlKG1zZykge1xuXHRcdFx0cmV0dXJuIG1lc3NhZ2U7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGlkZSgpIHtcblx0XHRcdGFtSUJ1c3kgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc0J1c3koKSB7XG5cdFx0XHRyZXR1cm4gYW1JQnVzeSAmJiAhaGlkZGVuQnlGb3JjZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc1Zpc2libGUoKSB7XG5cdFx0XHRyZXR1cm4gJCgnLmxvYWRpbmctaW5kaWNhdG9yJykuaXMoJzp2aXNpYmxlJyk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVzZXRNZXNzYWdlKCkge1xuXHRcdFx0dGhpcy5zZXRNZXNzYWdlKHRoaXMuZGVmYXVsdE1lc3NhZ2UpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNldE1lc3NhZ2UobXNnKSB7XG5cdFx0XHRtZXNzYWdlID0gJHJvb3RTY29wZS53b3JraW5nTWVzc2FnZSA9IG1zZztcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzaG93KCkge1xuXHRcdFx0YW1JQnVzeSA9IHRydWU7XG5cdFx0fVxuXHR9XG59KSgpO1xuIixudWxsLCIoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdsZWFkU2VydmljZXMnLCBbXSlcblx0XHQuZmFjdG9yeSgnTGVhZCcsIExlYWQpO1xuXG5cdGZ1bmN0aW9uIExlYWQoJHJlc291cmNlLCBDYWNoZUZhY3RvcnkpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKCdhcGkvbGVhZHMvOmlkJywge2lkOiAnQGlkJ30sIHtcbiAgICAgICAgICAgIGluZGV4OiB7bWV0aG9kOiAnR0VUJywgdXJsOiAnYXBpL3RyYWRlc2hvd3MvOnRyYWRlc2hvd0lkL2xlYWRzJywgcGFyYW1zOnt0cmFkZXNob3dJZDogJ0B0cmFkZXNob3dJZCd9fSxcblx0XHRcdGdldDoge2NhY2hlOiBDYWNoZUZhY3RvcnkuZ2V0KCdkZWZhdWx0Q2FjaGUnKX1cblx0XHR9KTtcblx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2xlYWRTZXJ2aWNlcycpXG5cdFx0LmZhY3RvcnkoJ2xlYWRTZXJ2aWNlJywgbGVhZFNlcnZpY2UpO1xuXG5cdGZ1bmN0aW9uIGxlYWRTZXJ2aWNlKCRodHRwLCBuZ0RpYWxvZywgTGVhZCwgJHJvb3RTY29wZSwgYnVzeVNlcnZpY2UpIHtcblx0XHRcdHZhciBhY3RpdmVEaWFsb2c7XG5cblx0XHRcdHZhciBzZXJ2aWNlID0ge1xuXHRcdFx0XHRkZWxldGVMZWFkOiBkZWxldGVMZWFkLFxuXHRcdFx0XHRyZXRyaWV2ZTogcmV0cmlldmVcblx0XHRcdH07XG5cblx0XHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0XHQvLy8vLy8vLy9cblxuXHRcdFx0ZnVuY3Rpb24gcmV0cmlldmUodHJhZGVob3dfaWQsIHBhZ2VOdW1iZXIsIHBlclBhZ2UsIG9yZGVyQnksIG9yZGVyQnlSZXZlcnNlLCBmaWx0ZXIpIHtcblx0XHRcdFx0aWYocGFnZU51bWJlcj09PXVuZGVmaW5lZCl7XG5cdFx0XHRcdFx0cGFnZU51bWJlciA9ICcxJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob3JkZXJCeT09PXVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdG9yZGVyQnkgPSAndXBkYXRlZF9hdCc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG9yZGVyQnlSZXZlcnNlPT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0b3JkZXJCeVJldmVyc2UgPSAxO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChwZXJQYWdlPT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cGVyUGFnZSA9IDE1O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmaWx0ZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGZpbHRlciA9ICcnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiAkaHR0cC5cblx0XHRcdFx0XHRnZXQoJ2FwaS90cmFkZXNob3dzLycgKyB0cmFkZWhvd19pZCArICcvbGVhZHM/cGFnZT0nK3BhZ2VOdW1iZXIrJyZwZXJQYWdlPScrcGVyUGFnZStcblx0XHRcdFx0XHRcdCcmb3JkZXJCeT0nICtvcmRlckJ5ICsgJyZvcmRlckJ5UmV2ZXJzZT0nICsgcGFyc2VJbnQob3JkZXJCeVJldmVyc2UpICsgJyZmaWx0ZXI9JyArIGZpbHRlciwge2NhY2hlOiB0cnVlfSk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGRlbGV0ZUxlYWQobGVhZCkge1xuXHRcdFx0XHR2YXIgbGVhZF9uYW1lID0gbGVhZC5maXJzdF9uYW1lICsgJyAnICsgbGVhZC5sYXN0X25hbWU7XG5cdFx0XHRcdHZhciBkaWFsb2dfaHRtbCA9ICc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdHJhc2ggcmVkIGljb24tbGFyZ2VcIj48L3NwYW4+PHNwYW4+QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBMZWFkIDxlbT4nICsgbGVhZF9uYW1lICtcblx0XHRcdFx0XHRcdFx0XHQgICc8L2VtPj88YnIgLz48c3Ryb25nPlRoaXMgY2Fubm90IGJlIHVuZG9uZS48L3N0cm9uZz48L3NwYW4+PGRpdiBjbGFzcz1cImRpYWxvZy1idXR0b25zXCI+JyArXG5cdFx0XHRcdFx0XHRcdFx0ICAnPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgbmctY2xpY2s9XCJjb25maXJtKClcIj5ZZXMsIGRlbGV0ZTwvYnV0dG9uPiAnICtcblx0XHRcdFx0XHRcdFx0XHQgICc8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1jYW5jZWxcIiBuZy1jbGljaz1cImNsb3NlVGhpc0RpYWxvZygpXCI+Q2FuY2VsPC9idXR0b24+PC9kaXY+Jztcblx0XHRcdFx0bmdEaWFsb2cub3BlbkNvbmZpcm0oe1xuXHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1kZXN0cm95IG5nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuXHRcdFx0XHRcdHRlbXBsYXRlOiBkaWFsb2dfaHRtbCxcblx0XHRcdFx0XHRzaG93Q2xvc2U6IGZhbHNlXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGJ1c3lTZXJ2aWNlLnNldE1lc3NhZ2UoJ0RlbGV0aW5nJyk7XG5cdFx0XHRcdFx0TGVhZC5cblx0XHRcdFx0XHRcdGRlbGV0ZSh7aWQ6bGVhZC5pZH0pLlxuXHRcdFx0XHRcdFx0JHByb21pc2UuXG5cdFx0XHRcdFx0XHR0aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHBheWxvYWQuaGFzT3duUHJvcGVydHkoJ3N1Y2Nlc3MnKSAmJiBwYXlsb2FkLnN1Y2Nlc3MgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0XHRuZ0RpYWxvZy5vcGVuKHtcblx0XHRcdFx0XHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAnZGlhbG9nLXN1Y2Nlc3MgbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGVjayBncmVlbiBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkxlYWQgPGVtPicgKyBsZWFkX25hbWUgKyAnPC9lbT4gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQuPC9zcGFuPicsXG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQuY2xvc2VQcm9taXNlXG5cdFx0XHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0bmdEaWFsb2cub3Blbih7XG5cdFx0XHRcdFx0XHRcdFx0XHRwbGFpbjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1lcnJvciBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlOiAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWV4Y2xhbWF0aW9uLXNpZ24gcmVkIGljb24tbGFyZ2VcIj48L3NwYW4+PHNwYW4+QW4gZXJyb3Igb2NjdXJlZCB3aGVuIHRyeWluZyB0byBkZWxldGUgTGVhZCA8ZW0+JyArIGxlYWRfbmFtZSArICc8L2VtPi48L3NwYW4+ICBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3Qgc3VwcG9ydC4nLFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRcdG5nRGlhbG9nLm9wZW4oe1xuXHRcdFx0XHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1lcnJvciBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFuIGVycm9yIG9jY3VyZWQgd2hlbiB0cnlpbmcgdG8gZGVsZXRlIExlYWQgPGVtPicgKyBsZWFkX25hbWUgKyAnPC9lbT4uPC9zcGFuPiAgUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHN1cHBvcnQuJyxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxufSkoKTtcbiIsIi8qKlxuICogTG9naW4gU2VydmljZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2xvZ2luU2VydmljZScsW10pXG5cdFx0LmZhY3RvcnkoJ2xvZ2luU2VydmljZScsIGxvZ2luU2VydmljZSk7XG5cblx0ZnVuY3Rpb24gbG9naW5TZXJ2aWNlKCRzdGF0ZSwgJHJvb3RTY29wZSwgJHEsIENhY2hlRmFjdG9yeSwgJGh0dHAsIGh0dHBCdWZmZXIsICRpbmplY3Rvcikge1xuXHRcdGlmICghQ2FjaGVGYWN0b3J5LmdldCgnYXV0aENhY2hlJykpIHtcblx0XHRcdG5ldyBDYWNoZUZhY3RvcnkoJ2F1dGhDYWNoZScsIHtcblx0XHRcdFx0bWF4QWdlOiA2MCAqIDU5ICogMTAwMCxcblx0XHRcdFx0ZGVsZXRlT25FeHBpcmU6ICdhZ2dyZXNzaXZlJyxcblx0XHRcdFx0c3RvcmFnZU1vZGU6ICdsb2NhbFN0b3JhZ2UnLFxuXHRcdFx0XHRvbkV4cGlyZTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRcdHZhciBzdmMgPSAkaW5qZWN0b3IuZ2V0KCdsb2dpblNlcnZpY2UnKTtcblx0XHRcdFx0XHRzdmMucmVmcmVzaCh2YWx1ZSkudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0XHRjYWNoZS5wdXQoa2V5LCBwYXlsb2FkLmRhdGEudG9rZW4pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dmFyIGNhY2hlID0gQ2FjaGVGYWN0b3J5LmdldCgnYXV0aENhY2hlJyk7XG5cblx0XHQkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSBjYWNoZS5nZXQoJ3Rva2VuJykgIT09IHVuZGVmaW5lZDtcblxuXHRcdHZhciBzZXJ2aWNlID0ge1xuXHRcdFx0Y2hlY2tBcGlBY2Nlc3M6IGNoZWNrQXBpQWNjZXNzLFxuXHRcdFx0aGFzVG9rZW46IGhhc1Rva2VuLFxuXHRcdFx0aXNWYWxpZEVtYWlsOiBpc1ZhbGlkRW1haWwsXG5cdFx0XHRsb2dpbjogbG9naW4sXG5cdFx0XHRsb2dpbkNhbmNlbGxlZDogbG9naW5DYW5jZWxsZWQsXG5cdFx0XHRsb2dpbkNvbmZpcm1lZDogbG9naW5Db25maXJtZWQsXG5cdFx0XHRsb2dvdXQ6IGxvZ291dCxcblx0XHRcdHJlZnJlc2g6IHJlZnJlc2gsXG5cdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRnZXQ6IHRva2VuR2V0LFxuXHRcdFx0XHRzZXQ6IHRva2VuU2V0LFxuXHRcdFx0XHRyZW1vdmU6IHRva2VuUmVtb3ZlXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBjaGVja0FwaUFjY2VzcygpIHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0XHRpZiAodGhpcy5oYXNUb2tlbigpKSB7XG5cdFx0XHRcdCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IHRydWU7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aGlzLmxvZ2luQ2FuY2VsbGVkKCk7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFzVG9rZW4oKSB7XG5cdFx0XHR2YXIgdCA9IHRoaXMudG9rZW4uZ2V0KCk7XG5cdFx0XHRyZXR1cm4gdCAhPT0gdW5kZWZpbmVkICYmIHQgIT09IG51bGw7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuXHRcdCAgICByZXR1cm4gcGF0dGVybi50ZXN0KGVtYWlsKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBsb2dpbihjcmVkZW50aWFscykge1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0JGh0dHAucG9zdCgnL2FwaS9hdXRoZW50aWNhdGUnLCBjcmVkZW50aWFscywge2NhY2hlOiBmYWxzZX0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHBheWxvYWQpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChwYXlsb2FkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBsb2dpbkNhbmNlbGxlZChkYXRhLHJlYXNvbikge1xuXHRcdFx0aHR0cEJ1ZmZlci5yZWplY3RBbGwocmVhc29uKTtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZXZlbnQ6YXV0aC1sb2dpbi1jYW5jZWxsZWQnLCBkYXRhKTtcblx0XHRcdHRoaXMubG9nb3V0KCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbG9naW5Db25maXJtZWQoZGF0YSwgY29uZmlnVXBkYXRlcikge1xuXHRcdFx0dmFyIHVwZGF0ZXIgPSBjb25maWdVcGRhdGVyIHx8IGZ1bmN0aW9uKGNvbmZpZykge3JldHVybiBjb25maWc7fTtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZXZlbnQ6YXV0aC1sb2dnZWQtaW4nLCBkYXRhKTtcblx0XHRcdCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IHRydWU7XG5cdFx0XHRodHRwQnVmZmVyLnJldHJ5QWxsKHVwZGF0ZXIpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGxvZ291dCgpIHtcblx0XHRcdHRoaXMudG9rZW4ucmVtb3ZlKCk7XG5cdFx0XHQkc3RhdGUuZ28oJ2F1dGgnKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZWZyZXNoKHRva2VuU3RyaW5nKSB7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpLFxuXHRcdFx0XHR0aGF0IFx0PSB0aGlzLFxuXHRcdFx0XHRjb25maWcgXHQ9IHtjYWNoZTogZmFsc2UsIGhlYWRlcnM6IHt9fTtcblxuXHRcdFx0aWYgKHR5cGVvZiB0b2tlblN0cmluZyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIgKyB0b2tlblN0cmluZztcblx0XHRcdH1cblxuXHRcdFx0JGh0dHAuZ2V0KCdhcGkvYXV0aGVudGljYXRlL3JlZnJlc2gnLCBjb25maWcpXG5cdFx0XHQudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdHRoYXQudG9rZW4uc2V0KHBheWxvYWQuZGF0YS50b2tlbik7XG5cdFx0XHRcdHRoYXQubG9naW5Db25maXJtZWQoKTtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShwYXlsb2FkKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHR0aGF0LmxvZ2luQ2FuY2VsbGVkKCk7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChwYXlsb2FkKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdG9rZW5HZXQoKSB7XG5cdFx0XHRyZXR1cm4gY2FjaGUuZ2V0KCd0b2tlbicpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRva2VuUmVtb3ZlKCkge1xuXHRcdFx0Y2FjaGUucmVtb3ZlKCd0b2tlbicpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRva2VuU2V0KHRva2VuU3RyaW5nKSB7XG5cdFx0XHRjYWNoZS5wdXQoJ3Rva2VuJywgdG9rZW5TdHJpbmcpO1xuXHRcdH1cblx0fVxufSkoKTtcbiIsIi8qKlxuICogTWVzc2FnZSBzZXJ2aWNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnbWVzc2FnZVNlcnZpY2UnLCBbXSlcblx0XHQuZmFjdG9yeSgnbWVzc2FnZVNlcnZpY2UnLCBtZXNzYWdlU2VydmljZSk7XG5cblx0ZnVuY3Rpb24gbWVzc2FnZVNlcnZpY2UoJHRpbWVvdXQsICRxKSB7XG5cdFx0dmFyIG1lc3NhZ2VzID0gW107XG5cblx0XHR2YXIgc2VydmljZSA9IHtcblx0XHRcdGFkZE1lc3NhZ2U6IGFkZE1lc3NhZ2UsXG5cdFx0XHRnZXRNZXNzYWdlczogZ2V0TWVzc2FnZXMsXG5cdFx0XHRwdXJnZTogcHVyZ2UsXG5cdFx0XHRyZW1vdmVNZXNzYWdlOiByZW1vdmVNZXNzYWdlXG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBhZGRNZXNzYWdlKGNvbmZpZykge1xuXHRcdFx0Y29uZmlnLmlkID0gbWVzc2FnZXMubGVuZ3RoICsgMTtcblx0XHRcdG1lc3NhZ2VzLnB1c2goY29uZmlnKTtcblx0XHRcdHJldHVybiBjb25maWc7XG5cdFx0fVxuXG5cblx0XHRmdW5jdGlvbiBnZXRNZXNzYWdlcygpIHtcblx0XHRcdHJldHVybiBtZXNzYWdlcztcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZW1vdmVNZXNzYWdlKGlkKSB7XG5cdFx0XHRpZiAobWVzc2FnZXNbaWQgLSAxXSkge1xuXHRcdFx0XHRtZXNzYWdlcy5zcGxpY2UoaWQgLSAxLCAxKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXJnZSgpIHtcblx0XHRcdG1lc3NhZ2VzID0gW107XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnc2xpZGVNZW51U2VydmljZScsIFtdKVxuXHRcdC5wcm92aWRlcignc2xpZGVNZW51U2VydmljZScsIHNsaWRlTWVudVByb3ZpZGVyKTtcblxuXHRmdW5jdGlvbiBzbGlkZU1lbnVQcm92aWRlcigpIHtcblx0XHR0aGlzLm1lbnVzID0ge307XG5cblx0XHR0aGlzLnJlZ2lzdGVyTWVudSA9IHJlZ2lzdGVyTWVudTtcblx0XHR0aGlzLiRnZXQgPSBzbGlkZU1lbnVTZXJ2aWNlO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0XHQvLy8vLy8vLy9cblxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyTWVudShuYW1lLCBjb25maWcpIHtcblx0XHRcdHRoaXMubWVudXNbbmFtZV0gPSBjb25maWc7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2xpZGVNZW51U2VydmljZSgkcm9vdFNjb3BlKSB7XG5cdFx0XHR2YXIgc2VydmljZSA9IHtcblx0XHRcdFx0bWVudXM6IHRoaXMubWVudXMsXG5cdFx0XHRcdGJ1aWxkTWVudTogYnVpbGRNZW51XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0XHRyZXR1cm4gc2VydmljZTtcblxuXHRcdFx0Ly8vLy8vLy8vXG5cdFx0XHRcblx0XHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBidWlsZE1lbnUoY29uZmlnKSB7XG5cdFx0XHRcdHZhciBodG1sID0gJyc7XG5cdFx0XHRcdGZvciAodmFyIGFjdGlvbk5hbWUgaW4gY29uZmlnLml0ZW1zKSB7XG5cdFx0XHRcdFx0dmFyIGFjdGlvbiBcdD0gY29uZmlnLml0ZW1zW2FjdGlvbk5hbWVdLFxuXHRcdFx0XHRcdFx0dGl0bGUgXHQ9IGFjdGlvbi50aXRsZSB8fCBhY3Rpb25OYW1lLFxuXHRcdFx0XHRcdFx0bGluayBcdD0gJzxhIHRpdGxlPVwiJyArIHRpdGxlICsgJ1wiJyxcblx0XHRcdFx0XHRcdHVybCBcdD0gYWN0aW9uLnVybCxcblx0XHRcdFx0XHRcdG9uQ2xpY2sgPSBhY3Rpb24uY2xpY2ssXG5cdFx0XHRcdFx0XHRzaG93XHQ9IGFjdGlvbi5zaG93O1xuXG5cdFx0XHRcdFx0aWYgKHVybCkge1xuXHRcdFx0XHRcdFx0bGluayArPSAnIGhyZWY9XCIvIy8nICsgdXJsICsgJ1wiJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRsaW5rICs9ICcgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAob25DbGljaykge1xuXHRcdFx0XHRcdFx0bGluayArPSAnIG5nLWNsaWNrPVwiJyArIG9uQ2xpY2sgKyAnXCInO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChzaG93KSB7XG5cdFx0XHRcdFx0XHRsaW5rICs9ICcgbmctc2hvdz1cIicgKyBzaG93ICsgJ1wiJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRsaW5rICs9ICc+JyArIHRpdGxlICsgJzwvYT4nO1xuXG5cdFx0XHRcdFx0aHRtbCArPSAnPGxpPicgKyBsaW5rICsgJzwvbGk+Jztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiAnPHVsPicgKyBodG1sICsgJzwvdWw+Jztcblx0XHRcdH1cblxuXHRcdH1cblx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ3RyYWRlc2hvd1NlcnZpY2VzJywgWyduZ1Jlc291cmNlJ10pXG5cdFx0LmZhY3RvcnkoJ1RyYWRlc2hvdycsIFRyYWRlc2hvdyk7XG5cblx0ZnVuY3Rpb24gVHJhZGVzaG93KCRyZXNvdXJjZSwgQ2FjaGVGYWN0b3J5KSB7XG5cdFx0cmV0dXJuICRyZXNvdXJjZSgnYXBpL3RyYWRlc2hvd3MvOmlkJywge2lkOiAnQGlkJ30sIHtcblx0XHRcdGdldDoge2NhY2hlOiBDYWNoZUZhY3RvcnkuZ2V0KCdkZWZhdWx0Q2FjaGUnKX0sXG5cdFx0XHRjcmVhdGU6IHttZXRob2Q6ICdQT1NUJywgdXJsOidhcGkvdHJhZGVzaG93cy9jcmVhdGUnfSxcblx0XHRcdGRlbGV0ZToge21ldGhvZDogJ0RFTEVURSd9XG5cdFx0fSk7XG5cdH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd0cmFkZXNob3dTZXJ2aWNlcycpXG5cdFx0LmZhY3RvcnkoJ3RyYWRlc2hvd1NlcnZpY2UnLCB0cmFkZXNob3dTZXJ2aWNlKTtcblxuXHRmdW5jdGlvbiB0cmFkZXNob3dTZXJ2aWNlKCRodHRwLCBUcmFkZXNob3csICRyb290U2NvcGUsIG5nRGlhbG9nLCBidXN5U2VydmljZSkge1xuXHRcdHZhciBhY3RpdmVEaWFsb2c7XG5cblx0XHR2YXIgc2VydmljZSA9IHtcblx0XHRcdHJldHJpZXZlOiByZXRyaWV2ZSxcblx0XHRcdGRlbGV0ZVRyYWRlc2hvdzogZGVsZXRlVHJhZGVzaG93XG5cdFx0fTtcblxuXHRcdHJldHVybiBzZXJ2aWNlO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBkZWxldGVUcmFkZXNob3codHJhZGVzaG93KSB7XG5cdFx0XHR2YXIgdHJhZGVzaG93X25hbWUgPSB0cmFkZXNob3cubmFtZSxcblx0XHRcdFx0dHJhZGVzaG93X2lkICAgPSB0cmFkZXNob3cuaWQ7XG5cdFx0XHRhY3RpdmVEaWFsb2cgPSBuZ0RpYWxvZy5vcGVuQ29uZmlybShcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1kZXN0cm95IG5nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuXHRcdFx0XHRcdHRlbXBsYXRlOiAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRyYXNoIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgVHJhZGVzaG93IDxlbT4nICsgdHJhZGVzaG93X25hbWUgKyAnPC9lbT4/PGJyIC8+PHN0cm9uZz5UaGlzIGNhbm5vdCBiZSB1bmRvbmUuPC9zdHJvbmc+PC9zcGFuPjxkaXYgY2xhc3M9XCJkaWFsb2ctYnV0dG9uc1wiPjxidXR0b24gY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiIG5nLWNsaWNrPVwiY29uZmlybSgpXCI+WWVzLCBkZWxldGU8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tY2FuY2VsXCIgbmctY2xpY2s9XCJjbG9zZVRoaXNEaWFsb2coKVwiPkNhbmNlbDwvYnV0dG9uPjwvZGl2PicsXG5cdFx0XHRcdFx0c2hvd0Nsb3NlOiBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHQpLlxuXHRcdFx0dGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gQWx0ZXIgdGhlIHdvcmtpbmcgbWVzc2FnZVxuXHRcdFx0XHRidXN5U2VydmljZS5zZXRNZXNzYWdlKCdEZWxldGluZycpO1xuXG5cdFx0XHRcdFRyYWRlc2hvdy5cblx0XHRcdFx0XHRkZWxldGUoe3RyYWRlc2hvd0lkOnRyYWRlc2hvd19pZH0pLlxuXHRcdFx0XHRcdCRwcm9taXNlLlxuXHRcdFx0XHRcdHRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0aWYgKHBheWxvYWQuaGFzT3duUHJvcGVydHkoJ3N1Y2Nlc3MnKSAmJiBwYXlsb2FkLnN1Y2Nlc3MgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0bmdEaWFsb2cub3Blbih7XG5cdFx0XHRcdFx0XHRcdFx0cGxhaW46IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAnZGlhbG9nLXN1Y2Nlc3MgbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hlY2sgZ3JlZW4gaWNvbi1sYXJnZVwiPjwvc3Bhbj48c3Bhbj5UcmFkZXNob3cgPGVtPicgKyB0cmFkZXNob3dfbmFtZSArICc8L2VtPiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZGVsZXRlZC48L3NwYW4+Jyxcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0LmNsb3NlUHJvbWlzZVxuXHRcdFx0XHRcdFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdG5nRGlhbG9nLm9wZW4oe1xuXHRcdFx0XHRcdFx0XHRcdHBsYWluOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1lcnJvciBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFuIGVycm9yIG9jY3VyZWQgd2hlbiB0cnlpbmcgdG8gZGVsZXRlIFRyYWRlc2hvdyA8ZW0+JyArIHRyYWRlc2hvd19uYW1lICsgJzwvZW0+Ljwvc3Bhbj4gIFBsZWFzZSB0cnkgYWdhaW4gb3IgY29udGFjdCBzdXBwb3J0LicsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdG5nRGlhbG9nLm9wZW4oe1xuXHRcdFx0XHRcdFx0XHRwbGFpbjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAnZGlhbG9nLWVycm9yIG5nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPkFuIGVycm9yIG9jY3VyZWQgd2hlbiB0cnlpbmcgdG8gZGVsZXRlIFRyYWRlc2hvdyA8ZW0+JyArIHRyYWRlc2hvd19uYW1lICsgJzwvZW0+Ljwvc3Bhbj4gIFBsZWFzZSB0cnkgYWdhaW4gb3IgY29udGFjdCBzdXBwb3J0LicsXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblx0XHRmdW5jdGlvbiByZXRyaWV2ZShwYWdlTnVtYmVyLCBwZXJQYWdlLCBvcmRlckJ5LCBvcmRlckJ5UmV2ZXJzZSwgZmlsdGVyKSB7XG5cdFx0XHRpZihwYWdlTnVtYmVyPT09dW5kZWZpbmVkKXtcblx0XHRcdFx0cGFnZU51bWJlciA9ICcxJztcblx0XHRcdH1cblx0XHRcdGlmIChvcmRlckJ5PT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdG9yZGVyQnkgPSAndXBkYXRlZF9hdCc7XG5cdFx0XHR9XG5cdFx0XHRpZiAob3JkZXJCeVJldmVyc2U9PT11bmRlZmluZWQpIHtcblx0XHRcdFx0b3JkZXJCeVJldmVyc2UgPSAxO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHBlclBhZ2U9PT11bmRlZmluZWQpIHtcblx0XHRcdFx0cGVyUGFnZSA9IDE1O1xuXHRcdFx0fVxuXHRcdFx0aWYgKGZpbHRlcj09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0ZmlsdGVyID0gJyc7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gJGh0dHAuXG5cdFx0XHRcdGdldCgnYXBpL3RyYWRlc2hvd3M/cGFnZT0nK3BhZ2VOdW1iZXIrJyZwZXJQYWdlPScgKyBwZXJQYWdlICsgJyZvcmRlckJ5PScgKyBvcmRlckJ5ICtcblx0XHRcdFx0XHQnJm9yZGVyQnlSZXZlcnNlPScgKyBwYXJzZUludChvcmRlckJ5UmV2ZXJzZSkgKyAnJmZpbHRlcj0nICsgZmlsdGVyLCB7Y2FjaGU6IHRydWV9KTtcblx0XHR9XG5cdH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgndHNwb3J0YWxEaXJlY3RpdmVzJywgW10pXG4gICAgICAgIC5kaXJlY3RpdmUoJ2J1c3lJbmRpY2F0b3InLCBidXN5SW5kaWNhdG9yRGlyZWN0aXZlKTtcblxuICAgIGZ1bmN0aW9uIGJ1c3lJbmRpY2F0b3JEaXJlY3RpdmUoYnVzeVNlcnZpY2UsICRyb290U2NvcGUsICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBpc0FwcEJ1c3kgICAgICAgPSBmYWxzZSxcbiAgICAgICAgICAgIGlzU3RhdGVMb2FkaW5nICA9IHRydWU7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL2J1c3ktaW5kaWNhdG9yLmh0bWwnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIGxpbms6IGJ1c3lJbmRpY2F0b3JEaXJlY3RpdmVMaW5rXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICAvLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBidXN5SW5kaWNhdG9yRGlyZWN0aXZlTGluayhzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuaXNCdXN5ID0gaXNCdXN5O1xuXG4gICAgICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgICAgICAvLy8vLy8vLy9cblxuICAgICAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1c3lTZXJ2aWNlLnJlc2V0TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICBidXN5U2VydmljZS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVzeVNlcnZpY2UuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpc0J1c3koKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1c3lTZXJ2aWNlLmlzQnVzeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCd0c3BvcnRhbERpcmVjdGl2ZXMnKVxuICAgICAgICAuZGlyZWN0aXZlKFwiY2xpY2thYmxlXCIsIGNsaWNrYWJsZURpcmVjdGl2ZSk7XG5cbiAgICBmdW5jdGlvbiBjbGlja2FibGVEaXJlY3RpdmUoKSB7XG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXN0aWN0OiAnQScsXG5cbiAgICAgICAgICAgIGxpbms6IGNsaWNrYWJsZURpcmVjdGl2ZUxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgICAgIC8vLy8vLy8vL1xuICAgIFxuICAgICAgICBmdW5jdGlvbiBjbGlja2FibGVEaXJlY3RpdmVMaW5rKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgZWxlbS5hZGRDbGFzcyhcImNsaWNrYWJsZVwiKTtcbiAgICAgICAgICAgIGVsZW0ub24oXCJjbGlja1wiLCBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvUGhhbnRvbUpTL2cpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RzcG9ydGFsRGlyZWN0aXZlcycpXG4gICAgICAgIC5kaXJlY3RpdmUoJ21lc3NhZ2VzJywgbWVzc2FnZXNEaXJlY3RpdmUpO1xuXG4gICAgZnVuY3Rpb24gbWVzc2FnZXNEaXJlY3RpdmUobWVzc2FnZVNlcnZpY2UsICRyb290U2NvcGUsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL21lc3NhZ2VzLmh0bWwnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIGxpbms6IG1lc3NhZ2VzRGlyZWN0aXZlTGlua1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgICAgLy8vLy8vLy8vXG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VzRGlyZWN0aXZlTGluayhzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgICAgIHZhciB2bSA9IHNjb3BlLmhhc093blByb3BlcnR5KCdjdHJsJykgPyBzY29wZS5jdHJsIDogc2NvcGU7XG5cbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBtZXNzYWdlU2VydmljZS5nZXRNZXNzYWdlcygpOyB9LCBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3VmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLm1lc3NhZ2VzID0gbmV3VmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VTZXJ2aWNlLnB1cmdlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdm0uYWRkTWVzc2FnZSA9IGZ1bmN0aW9uIGFkZE1lc3NhZ2UoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gbWVzc2FnZVNlcnZpY2UuYWRkTWVzc2FnZShjb25maWcpO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiLm1lc3NhZ2VzIC5hbGVydFttZXNzYWdlLWlkPVwiK2NvbmZpZy5pZCtcIl1cIikuYWRkQ2xhc3MoXCJpblwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZtLnJlbW92ZU1lc3NhZ2UgPSBmdW5jdGlvbiByZW1vdmVNZXNzYWdlKGlkKSB7XG4gICAgICAgICAgICAgICAgJChcIi5tZXNzYWdlcyAuYWxlcnRbbWVzc2FnZS1pZD1cIitpZCtcIl1cIikub24oXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UucmVtb3ZlTWVzc2FnZShpZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2bS5hZGRTdWNjZXNzTWVzc2FnZSA9IGZ1bmN0aW9uIGFkZFN1Y2Nlc3NNZXNzYWdlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ29rJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6ICdpY29uLW1lZGl1bScsXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91ciBjaGFuZ2VzIGhhdmUgYmVlbiBzYXZlZCdcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uZmlnID0gJC5leHRlbmQoZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uYWRkTWVzc2FnZShjb25maWcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdm0uYWRkRXJyb3JNZXNzYWdlID0gZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXhjbGFtYXRpb24tc2lnbicsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogJ2ljb24tbWVkaXVtJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTb3JyeSwgc29tZXRoaW5nIHdlbnQgd3JvbmcuXCJcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uZmlnID0gJC5leHRlbmQoZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uYWRkTWVzc2FnZShjb25maWcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdm0ucHVyZ2VNZXNzYWdlcyA9IGZ1bmN0aW9uIHB1cmdlTWVzc2FnZXMoKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UucHVyZ2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgndHNwb3J0YWxEaXJlY3RpdmVzJylcbiAgICAuZGlyZWN0aXZlKCdwYWdlcicsIHBhZ2VyRGlyZWN0aXZlKTtcblxuICBmdW5jdGlvbiBwYWdlckRpcmVjdGl2ZSgpIHtcbiAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICBjdXJyZW50UGFnZTogJz0nLFxuICAgICAgICAgIHRvdGFsUGFnZXM6ICc9JyxcbiAgICAgICAgICBnZXRSZXN1bHRzOiAnJmdldFJlc3VsdHMnLFxuICAgICAgICAgIHRyYWRlc2hvdzogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vcGFydGlhbHMvcGFnZXIuaHRtbCcsXG4gICAgICAgIGxpbms6IHBhZ2VyRGlyZWN0aXZlTGlua1xuICAgICB9O1xuXG4gICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICAgLy8vLy8vLy8vXG4gICBcbiAgICAgZnVuY3Rpb24gcGFnZXJEaXJlY3RpdmVMaW5rKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICBzY29wZS5nZXRSYW5nZSA9IGZ1bmN0aW9uKG51bSkge1xuICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkobnVtKTtcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCd0c3BvcnRhbERpcmVjdGl2ZXMnKVxuXHRcdC5kaXJlY3RpdmUoJ3NsaWRlTWVudScsIHNsaWRlTWVudURpcmVjdGl2ZSk7XG5cblx0ZnVuY3Rpb24gc2xpZGVNZW51RGlyZWN0aXZlKCR0aW1lb3V0LCAkcm9vdFNjb3BlLCBzbGlkZU1lbnVTZXJ2aWNlLCAkY29tcGlsZSwgJGRvY3VtZW50KSB7XG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0dHJhbnNjbHVkZTogdHJ1ZSxcblx0XHRcdHRlbXBsYXRlVXJsOiAnLi4vcGFydGlhbHMvc2xpZGUtbWVudS1kaXJlY3RpdmUuaHRtbCcsXG5cdFx0XHRsaW5rOiBzbGlkZU1lbnVEaXJlY3RpdmVMaW5rXG5cdFx0fTtcblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XG5cblx0XHQvLy8vLy8vL1xuXHRcdFxuXHRcdGZ1bmN0aW9uIHNsaWRlTWVudURpcmVjdGl2ZUxpbmsoJHNjb3BlLCBlbGVtLCBhdHRycykge1xuXHRcdFx0dmFyIHNsaWRlTWVudTtcblxuXHRcdFx0JHNjb3BlLm9wZW5NZW51ID0gb3Blbk1lbnU7XG5cdFx0XHQkc2NvcGUuY2xvc2VNZW51ID0gY2xvc2VNZW51O1xuXHRcdFx0JHNjb3BlLnNldEFsaWdubWVudCA9IHNldEFsaWdubWVudDtcblxuXHRcdFx0YWN0aXZhdGUoKTtcblxuXHRcdFx0Ly8vLy8vLy8vXG5cdFx0XHRcblx0XHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0XHRzbGlkZU1lbnUgPSB7XG5cdFx0XHRcdFx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHNldEFsaWdubWVudDogZnVuY3Rpb24ocG9zKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuYWxpZ25tZW50ID0gcG9zO1xuXHRcdFx0XHRcdFx0ZWxlbS5hdHRyKCdhbGlnbm1lbnQnLCBwb3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkc2NvcGUuYWxpZ25tZW50ID0gJHNjb3BlLmFsaWdubWVudCB8fCAod2luZG93Lm91dGVyV2lkdGggPD0gNzY4ID8gXCJib3R0b21cIiA6IFwicmlnaHRcIik7XG5cblx0XHRcdFx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2xpZGVNZW51LmhpZGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdCRkb2N1bWVudC5iaW5kKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0ICAgICBpZiAoZS53aGljaCA9PT0gMjcpIHtcblx0XHRcdFx0ICAgXHRcdHNsaWRlTWVudS5oaWRlKCk7ICBcdFxuXHRcdFx0XHQgICAgIH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGNsb3NlTWVudSgpIHtcblx0XHRcdFx0c2xpZGVNZW51LmhpZGUoKTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gb3Blbk1lbnUobWVudU5hbWUsIG9iak1hcCkge1xuXHRcdFx0XHRpZiAoc2xpZGVNZW51U2VydmljZS5tZW51cyAmJiBzbGlkZU1lbnVTZXJ2aWNlLm1lbnVzLmhhc093blByb3BlcnR5KG1lbnVOYW1lKSkge1xuXHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiBvYmpNYXApIHtcblx0XHRcdFx0XHRcdCRzY29wZVtrZXldID0gb2JqTWFwW2tleV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHZhciBtZW51ID0gc2xpZGVNZW51U2VydmljZS5tZW51c1ttZW51TmFtZV07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0dmFyIGNvbXBpbGVkVGl0bGUgPSAkY29tcGlsZSgnPGg1IGNsYXNzPVwic2xpZGUtbWVudS10aXRsZVwiPicgKyBtZW51LnRpdGxlICsgJzwvaDU+JykoJHNjb3BlKTtcblxuXHRcdFx0XHRcdGVsZW0uZmluZCgnaDUnKS5yZXBsYWNlV2l0aChjb21waWxlZFRpdGxlKTtcblxuXHRcdFx0XHRcdHZhciBidWlsdCA9IHNsaWRlTWVudVNlcnZpY2UuYnVpbGRNZW51KG1lbnUpO1xuXHRcdFx0XHRcdHZhciBjb21waWxlZCA9ICRjb21waWxlKGJ1aWx0KSgkc2NvcGUpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0ZWxlbS5maW5kKCcuc2xpZGUtbWVudS1jb250ZW50JykuaHRtbChjb21waWxlZCk7XG5cdFx0XHRcdFx0XHRzbGlkZU1lbnUuc2hvdygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHNldEFsaWdubWVudChwb3MpIHtcblx0XHRcdFx0c2xpZGVNZW51LnNldEFsaWdubWVudChwb3MpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCd0c3BvcnRhbERpcmVjdGl2ZXMnKVxuICAgICAgICAuZGlyZWN0aXZlKFwidGltZWFnb1wiLCB0aW1lYWdvRGlyZWN0aXZlKTtcblxuICAgIGZ1bmN0aW9uIHRpbWVhZ29EaXJlY3RpdmUoKSB7XG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICB0aW1lOiAnPScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cInRpbWUtYWdvXCI+e3tnZXRUaW1lQWdvKHRpbWUpfX08L3NwYW4+JyxcbiAgICAgICAgICAgIGxpbms6IHRpbWVhZ29EaXJlY3RpdmVMaW5rXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgICAgICAvLy8vLy8vLy9cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gdGltZWFnb0RpcmVjdGl2ZUxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS5nZXRUaW1lQWdvID0gZnVuY3Rpb24odGltZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb21lbnQodGltZSwgbW9tZW50LklTT184NjAxKS5mcm9tTm93KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSAgICBcbn0pKCk7XG4iLCIvKipcbiAqIEF1dGggSW50ZXJjZXB0b3JcbiAqIFx0QGNyZWRpdCA6IGxhcmdlbHkgbW9kaWZpZWQgZnJvbSBodHRwLWF1dGgtaW50ZXJjZXB0b3IgcGFja2FnZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2F1dGhJbnRlcmNlcHRvcicsW10pXG5cdFx0LmZhY3RvcnkoJ2h0dHBCdWZmZXInLCBodHRwQnVmZmVyKVxuXHRcdC5jb25maWcoZnVuY3Rpb24oJGh0dHBQcm92aWRlcikge1xuXHRcdFx0JGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaChhdXRoSW50ZXJjZXB0b3IpO1xuXHRcdH0pO1xuXG5cdGZ1bmN0aW9uIGh0dHBCdWZmZXIoJGluamVjdG9yKSB7XG5cdFx0dmFyIGJ1ZmZlciA9IFtdLCAkaHR0cDtcblxuXHRcdHZhciBzZXJ2aWNlID0ge1xuXHRcdFx0YXBwZW5kOiBhcHBlbmQsXG5cdFx0XHRyZWplY3RBbGw6IHJlamVjdEFsbCxcblx0XHRcdHJldHJ5QWxsOiByZXRyeUFsbCxcblx0XHRcdHJldHJ5SHR0cFJlcXVlc3Q6IHJldHJ5SHR0cFJlcXVlc3Rcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHNlcnZpY2U7XG5cblx0XHQvKipcblx0XHQgKiBBcHBlbmRzIEhUVFAgcmVxdWVzdCBjb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGRlZmVycmVkIHJlc3BvbnNlIGF0dGFjaGVkIHRvIGJ1ZmZlci5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBhcHBlbmQoY29uZmlnLCBkZWZlcnJlZCkge1xuXHRcdFx0YnVmZmVyLnB1c2goe1xuXHRcdFx0ICBjb25maWc6IGNvbmZpZyxcblx0XHRcdCAgZGVmZXJyZWQ6IGRlZmVycmVkXG5cdFx0XHR9KTtcblx0ICBcdH1cblxuXHQgIFx0LyoqXG5cdCAgXHQgKiBBYmFuZG9uIG9yIHJlamVjdCAoaWYgcmVhc29uIHByb3ZpZGVkKSBhbGwgdGhlIGJ1ZmZlcmVkIHJlcXVlc3RzLlxuXHQgIFx0ICovXG5cdCAgXHRmdW5jdGlvbiByZWplY3RBbGwocmVhc29uKSB7XG5cdCAgXHQgIGlmIChyZWFzb24pIHtcblx0ICBcdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7ICsraSkge1xuXHQgIFx0ICAgICAgYnVmZmVyW2ldLmRlZmVycmVkLnJlamVjdChyZWFzb24pO1xuXHQgIFx0ICAgIH1cblx0ICBcdCAgfVxuXHQgIFx0ICBidWZmZXIgPSBbXTtcblx0ICBcdH1cblxuXHQgIFx0LyoqXG5cdCAgXHQgKiBSZXRyaWVzIGFsbCB0aGUgYnVmZmVyZWQgcmVxdWVzdHMgY2xlYXJzIHRoZSBidWZmZXIuXG5cdCAgXHQgKi9cblx0XHRmdW5jdGlvbiByZXRyeUFsbCh1cGRhdGVyKSB7XG5cdFx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgKytpKSB7XG5cdFx0ICAgICAgcmV0cnlIdHRwUmVxdWVzdCh1cGRhdGVyKGJ1ZmZlcltpXS5jb25maWcpLCBidWZmZXJbaV0uZGVmZXJyZWQpO1xuXHRcdCAgXHR9XG5cdCAgICBcdGJ1ZmZlciA9IFtdO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHJ5IG9uZSBIVFRQIHJlcXVlc3Rcblx0XHQgKi9cblx0XHRmdW5jdGlvbiByZXRyeUh0dHBSZXF1ZXN0KGNvbmZpZywgZGVmZXJyZWQpIHtcblx0XHQgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdCAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHQgIH1cblx0XHQgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHQgICAgZGVmZXJyZWQucmVqZWN0KHJlc3BvbnNlKTtcblx0XHQgIH1cblx0XHQgICRodHRwID0gJGh0dHAgfHwgJGluamVjdG9yLmdldCgnJGh0dHAnKTtcblx0XHQgICRodHRwKGNvbmZpZykudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhJbnRlcmNlcHRvciAoJGluamVjdG9yLCAkcm9vdFNjb3BlLCAkcSwgaHR0cEJ1ZmZlcikge1xuXHRcdC8vIFdpbGwgZ2V0IHJlc29sdmVkIGxhdGVyIHVzaW5nICRpbmplY3RvciB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5IGlzc3Vlc1xuXHRcdHZhciBsb2dpblNlcnZpY2UsIG5nRGlhbG9nLCAkc3RhdGU7XG5cdFx0dmFyIGFwaVBhdHRlcm4gPSAvXFwvezAsMX1hcGlcXC9bYS16QS1aXFwvMC05XFw/XFw9XFwmXFwlXFwrXFwtXFxfXSovZztcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXF1ZXN0OiBmdW5jdGlvbihjb25maWcpIHtcblx0XHRcdFx0bG9naW5TZXJ2aWNlID0gbG9naW5TZXJ2aWNlIHx8ICRpbmplY3Rvci5nZXQoJ2xvZ2luU2VydmljZScpO1xuXG5cdFx0XHRcdC8vIEFwcGVuZCB0aGUgdG9rZW4gdG8gYW55IHJlcXVlc3QgdGhhdCBpc24ndCB0byBsb2dpbiBVUkwgb3IgZG9lc24ndCBoYXZlIGEgdG9rZW4gc2V0XG5cdFx0XHRcdGlmIChjb25maWcudXJsLm1hdGNoKGFwaVBhdHRlcm4pICYmIGNvbmZpZy51cmwgIT0gJy9hcGkvYXV0aGVudGljYXRlJyAmJiAhY29uZmlnLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoJ0F1dGhvcml6YXRpb24nKSkge1xuXHRcdFx0XHRcdGlmIChsb2dpblNlcnZpY2UuaGFzVG9rZW4oKSkge1xuXHRcdFx0XHRcdFx0Y29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGxvZ2luU2VydmljZS50b2tlbi5nZXQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHQkc3RhdGUgPSAkc3RhdGUgfHwgJGluamVjdG9yLmdldCgnJHN0YXRlJyk7XG5cdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2F1dGgnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gY29uZmlnO1xuXHRcdFx0fSxcblx0XHRcdHJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHR2YXIgY29uZmlnIFx0ID0gcmVzcG9uc2UuY29uZmlnO1xuXG5cdFx0XHRcdC8vIEludGVyY2VwdCBhbmQgc25hdGNoIGEgc3VjY2Vzc2Z1bCB0b2tlbiBmcm9tIHRoZSBIVFRQIHJlc3BvbnNlXG5cdFx0XHRcdGlmIChjb25maWcudXJsID09ICcvYXBpL2F1dGhlbnRpY2F0ZScgJiYgY29uZmlnLm1ldGhvZCA9PSBcIlBPU1RcIiAmJiByZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7XG5cdFx0XHRcdFx0bG9naW5TZXJ2aWNlID0gbG9naW5TZXJ2aWNlIHx8ICRpbmplY3Rvci5nZXQoJ2xvZ2luU2VydmljZScpO1xuXG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEuaGFzT3duUHJvcGVydHkoJ3Rva2VuJykpIHtcblx0XHRcdFx0XHRcdGxvZ2luU2VydmljZS50b2tlbi5zZXQocmVzcG9uc2UuZGF0YS50b2tlbik7XG5cdFx0XHRcdFx0XHRsb2dpblNlcnZpY2UubG9naW5Db25maXJtZWQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBidXN5U2VydmljZS5oaWRlKCk7XG5cblx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHRcdFx0fSxcblx0XHRcdHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xuXHRcdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRcdGxvZ2luU2VydmljZSA9IGxvZ2luU2VydmljZSB8fCAkaW5qZWN0b3IuZ2V0KCdsb2dpblNlcnZpY2UnKTtcblx0XHRcdFx0JHN0YXRlIFx0XHQgPSAkc3RhdGUgfHwgJGluamVjdG9yLmdldCgnJHN0YXRlJyk7XG5cblx0XHRcdFx0c3dpdGNoIChyZWplY3Rpb24uc3RhdHVzKSB7XG5cdFx0XHRcdFx0Y2FzZSA0MDA6XG5cdFx0XHRcdFx0XHRsb2dpblNlcnZpY2UubG9naW5DYW5jZWxsZWQoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIDQwMTpcblx0XHRcdFx0XHRcdC8vIElmIHRva2VuIGlzIGV4cGlyZWQsIHJlZnJlc2ggaXRcblx0XHRcdFx0XHRcdGlmIChyZWplY3Rpb24uZGF0YS5oYXNPd25Qcm9wZXJ0eSgnZXJyb3InKSAmJiByZWplY3Rpb24uZGF0YS5lcnJvciA9PSAndG9rZW5fZXhwaXJlZCcpIHtcblx0XHRcdFx0XHQgICAgXHRodHRwQnVmZmVyLmFwcGVuZChyZWplY3Rpb24uY29uZmlnLCBkZWZlcnJlZCk7XG5cdFx0XHRcdFx0ICAgIFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdldmVudDphdXRoLWxvZ2luLXJlcXVpcmVkJywgcmVqZWN0aW9uKTtcblx0XHRcdFx0XHQgICAgXHRpZiAobG9naW5TZXJ2aWNlLmhhc1Rva2VuKCkpIHtcblx0XHRcdFx0XHRcdCAgICBcdGxvZ2luU2VydmljZS5yZWZyZXNoKCk7XG5cdFx0XHRcdFx0ICAgIFx0fVxuXHRcdFx0XHRcdCAgICBcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdCAgICBjYXNlIDQwMzpcblx0XHRcdFx0ICAgIFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdldmVudDphdXRoLWZvcmJpZGRlbicsIHJlamVjdGlvbik7XG5cdFx0XHRcdCAgICBcdGxvZ2luU2VydmljZS5sb2dpbkNhbmNlbGxlZCgpO1xuXHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdCAgICBjYXNlIDUwMDpcblx0XHRcdFx0ICAgIFx0bmdEaWFsb2cgPSBuZ0RpYWxvZyB8fCAkaW5qZWN0b3IuZ2V0KCduZ0RpYWxvZycpO1xuXHRcdFx0XHQgICAgXHRuZ0RpYWxvZy5vcGVuKHtcblx0XHRcdFx0ICAgIFx0XHRwbGFpbjogdHJ1ZSxcblx0XHRcdFx0ICAgIFx0XHRjbGFzc05hbWU6ICdkaWFsb2ctc2F2ZSBuZ2RpYWxvZy10aGVtZS1kZWZhdWx0Jyxcblx0XHRcdFx0ICAgIFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduIHJlZCBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPlNvcnJ5LCBzb21ldGhpbmcgd2VudCB3cm9uZy4gIFRyeSBhZ2FpbiBsYXRlci48L3NwYW4+J1xuXHRcdFx0XHQgICAgXHR9KTtcblx0XHRcdCAgICAgIFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QocmVqZWN0aW9uKTtcblxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYnVzeVNlcnZpY2UnKVxuICAgICAgICAuY29uZmlnKGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goYnVzeVNlcnZpY2VJbnRlcmNlcHRvcik7XG4gICAgICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYnVzeVNlcnZpY2VJbnRlcmNlcHRvcihidXN5U2VydmljZSwgJHEpIHtcblxuICAgICAgICB2YXIgYXBpUGF0dGVybiA9IC9cXC97MCwxfWFwaVxcL1thLXpBLVpcXC8wLTlcXD9cXD1cXCZcXCVcXCtcXC1cXF9dKi9nO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbihjb25maWcpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLnVybC5tYXRjaChhcGlQYXR0ZXJuKSkge1xuICAgICAgICAgICAgICAgICAgICBidXN5U2VydmljZS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvbmZpZy51cmwubWF0Y2goYXBpUGF0dGVybikpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVzeVNlcnZpY2UuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlamVjdGlvbi5jb25maWcudXJsLm1hdGNoKGFwaVBhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1c3lTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn0pKCk7IiwiXG4vKipcbiAqIEF1dGggQ29udHJvbGxlclxuICovXG4oZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhdXRoQ29udHJvbGxlcnMnLCBbXSlcblx0XHQuY29udHJvbGxlcignQXV0aENvbnRyb2xsZXInLCBBdXRoQ29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gQXV0aENvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIGxvZ2luU2VydmljZSwgJHRpbWVvdXQsIENhY2hlRmFjdG9yeSkge1xuXG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLmNhY2hlID0gbnVsbDtcblx0XHR2bS5yZW1lbWJlck1lID0gZmFsc2U7XG5cdFx0dm0ubG9naW4gPSBsb2dpbjtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHQvLy8vLy8vL1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHRpZiAoIUNhY2hlRmFjdG9yeS5nZXQoJ2xvZ2luRm9ybScpKSB7XG5cdFx0XHRcdG5ldyBDYWNoZUZhY3RvcnkoJ2xvZ2luRm9ybScsIHtcblx0XHRcdFx0XHRtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcgKiA0ICogMTAwMCxcblx0XHRcdFx0XHRkZWxldGVPbkV4cGlyZTogJ2FnZ3Jlc3NpdmUnLFxuXHRcdFx0XHRcdHN0b3JhZ2VNb2RlOiAnbG9jYWxTdG9yYWdlJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0dm0uY2FjaGUgPSBDYWNoZUZhY3RvcnkuZ2V0KCdsb2dpbkZvcm0nKTtcblx0XHRcdFxuXHRcdFx0aWYgKHZtLmNhY2hlLmdldCgncmVtZW1iZXJNZScpICYmIHZtLmNhY2hlLmdldCgnZW1haWwnKSkge1xuXHRcdFx0XHR2bS5yZW1lbWJlck1lID0gdm0uY2FjaGUuZ2V0KCdyZW1lbWJlck1lJyk7XG5cdFx0XHRcdHZtLmVtYWlsID0gdm0uY2FjaGUuZ2V0KCdlbWFpbCcpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIHRva2VuIGlzIGFscmVhZHkgc3RvcmVkLCB0cnkgYXBwXG5cdFx0XHRpZiAobG9naW5TZXJ2aWNlLmhhc1Rva2VuKCkpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCd0cmFkZXNob3dzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogVXNlIGxvZ2luU2VydmljZSB0byBsb2dpblxuXHRcdCAqIEByZXR1cm4ge1t2b2lkXX1cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBsb2dpbigpIHtcblx0XHRcdHZhciBjcmVkZW50aWFscyA9IHtcblx0XHRcdFx0ZW1haWw6IHZtLmVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0ucGFzc3dvcmRcblx0XHRcdH07XG5cblx0XHRcdC8vIFByb3ZpZGVkIGJ5IG1lc3NhZ2VzRGlyZWN0aXZlXG5cdFx0XHR2bS5wdXJnZU1lc3NhZ2VzKCk7XG5cblx0XHRcdGxvZ2luU2VydmljZS5sb2dpbihjcmVkZW50aWFscylcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdGlmICh2bS5yZW1lbWJlck1lKSB7XG5cdFx0XHRcdFx0XHR2bS5jYWNoZS5wdXQoJ2VtYWlsJywgdm0uZW1haWwpO1xuXHRcdFx0XHRcdFx0dm0uY2FjaGUucHV0KCdyZW1lbWJlck1lJywgdm0ucmVtZW1iZXJNZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzdGF0ZS5nbyhcInRyYWRlc2hvd3NcIik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0Ly8gUHJvdmlkZWQgYnkgbWVzc2FnZXNEaXJlY3RpdmVcblx0XHRcdFx0XHR2bS5hZGRFcnJvck1lc3NhZ2Uoe1xuXHRcdFx0XHRcdFx0bWVzc2FnZTogJ1RoZSBlbWFpbCBvciBwYXNzd29yZCBlbnRlcmVkIHdhcyBpbmNvcnJlY3QuJ1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cdH1cblxufSkoKTtcbiIsIi8qKlxuICogRWRpdCBMZWFkIENvbnRyb2xsZXJcbiAqIEBjbGFzcyBMZWFkQ29udHJvbGxlclxuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2xlYWRDb250cm9sbGVycycsIFtdKVxuXHRcdC5jb250cm9sbGVyKCdMZWFkQ29udHJvbGxlcicsIExlYWRDb250cm9sbGVyKTtcblxuXHRmdW5jdGlvbiBMZWFkQ29udHJvbGxlcigkc2NvcGUsICRxLCAkaHR0cCwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIG5nRGlhbG9nLCBMZWFkLCBUcmFkZXNob3csIGJ1c3lTZXJ2aWNlLCBtZXNzYWdlU2VydmljZSwgbGVhZERhdGEsJHRpbWVvdXQsICRsb2cpIHtcblxuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHR2bS5nb0JhY2sgPSBnb0JhY2s7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7XG5cblx0XHR2bS5sZWFkID0gbGVhZERhdGE7XG5cdFx0dm0udGl0bGUgPSAnRWRpdGluZyBMZWFkJztcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHQvLy8vLy8vLy9cblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogW0NhbGxiYWNrIHRvICdCYWNrJyBidXR0b25dXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHtbdm9pZF19XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZ29CYWNrKCkge1xuXHRcdFx0JHN0YXRlLmdvKCd0cmFkZXNob3dFZGl0Jywge2lkOiB2bS5sZWFkLnRyYWRlc2hvd19pZH0pO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFNhdmUgdGhlIExlYWRcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge1t2b2lkXX1cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBzYXZlKCkge1xuXHRcdFx0aWYgKHZtLmxlYWRGb3JtLiR2YWxpZCkge1xuXHRcdFx0XHQvLyBBbHRlciB0aGUgd29ya2luZyBtZXNzYWdlXG5cdFx0XHRcdGJ1c3lTZXJ2aWNlLnNldE1lc3NhZ2UoJ1NhdmluZycpO1xuXG5cdFx0XHRcdC8vIFNhdmUgdGhlIExlYWQgdXNpbmcgdGhlIExlYWQgcmVzb3VyY2Vcblx0XHRcdFx0TGVhZC5cblx0XHRcdFx0XHRzYXZlKHZtLmxlYWQpLlxuXHRcdFx0XHRcdCRwcm9taXNlLlxuXHRcdFx0XHRcdHRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0dm0ubGVhZCA9IHBheWxvYWQ7XG5cblx0XHRcdFx0XHRcdHZtLmFkZFN1Y2Nlc3NNZXNzYWdlKCk7XG5cblx0XHRcdFx0XHRcdCRodHRwLmRlZmF1bHRzLmNhY2hlLnJlbW92ZUFsbCgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdHZtLmFkZEVycm9yTWVzc2FnZSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2F1dGhDb250cm9sbGVycycpXG5cdC5jb250cm9sbGVyKCdMb2dvdXRDb250cm9sbGVyJywgTG9nb3V0Q29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gTG9nb3V0Q29udHJvbGxlcihsb2dpblNlcnZpY2UpIHtcblx0XHRsb2dpblNlcnZpY2UubG9nb3V0KCk7XG5cdH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZSBhIFRyYWRlc2hvdyBDb250cm9sbGVyXG4gKiBAY2xhc3MgVHJhZGVzaG93Q3JlYXRlQ29udHJvbGxlclxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRGlzcGxheXMgYSBmb3JtIGZvciB0aGUgY3JlYXRpb24gb2YgYSBuZXcgdHJhZGVzaG93XG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgndHJhZGVzaG93Q3JlYXRlQ29udHJvbGxlcicsIFtdKVxuXHRcdC5jb250cm9sbGVyKCdUcmFkZXNob3dDcmVhdGVDb250cm9sbGVyJywgVHJhZGVzaG93Q3JlYXRlQ29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gVHJhZGVzaG93Q3JlYXRlQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGUsIG5nRGlhbG9nLCBUcmFkZXNob3csIGxvZ2luU2VydmljZSwgYnVzeVNlcnZpY2UsIG1lc3NhZ2VTZXJ2aWNlKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLmdvQmFjayA9IGdvQmFjaztcblx0XHR2bS5zYXZlID0gc2F2ZTtcblxuXHRcdHZtLmlzTmV3ID0gdHJ1ZTtcblx0XHR2bS50aXRsZVByZWZpeCA9IFwiQ3JlYXRpbmcgbmV3XCI7XG5cdFx0dm0udHJhZGVzaG93ID0ge2FjdGl2ZTogMH07XG5cblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdGxvZ2luU2VydmljZS5jaGVja0FwaUFjY2VzcygpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENhbGxiYWNrIHRvICdCYWNrJyBidXR0b25cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBnb0JhY2soKSB7XG5cdFx0XHQkc3RhdGUuZ28oXCJ0cmFkZXNob3dzXCIpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFNhdmUgdGhlIG5ldyB0cmFkZXNob3cgdXNpbmcgdGhlIFRyYWRlc2hvdyByZXNvdXJjZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHNhdmUoKSB7XG5cdFx0XHRpZiAodm0udHJhZGVzaG93Rm9ybS4kdmFsaWQpIHtcblx0XHRcdFx0Ly8gQWx0ZXIgdGhlIHdvcmtpbmcgbWVzc2FnZVxuXHRcdFx0XHRidXN5U2VydmljZS5zZXRNZXNzYWdlKCdTYXZpbmcgbmV3Jyk7XG5cblx0XHRcdFx0Ly8gQ3JlYXRlIFRyYWRlc2hvdyB1c2luZyBUcmFkZXNob3cgcmVzb3VyY2Vcblx0XHRcdFx0VHJhZGVzaG93XG5cdFx0XHRcdFx0LmNyZWF0ZSh2bS50cmFkZXNob3cpXG5cdFx0XHRcdFx0LiRwcm9taXNlXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0dmFyIHRyYWRlc2hvd19pZCA9IHBheWxvYWQuaWQ7XG5cblx0XHRcdFx0XHRcdC8vIFNob3cgYSBjb25maXJtYXRpb24gZGlhbG9nXG5cdFx0XHRcdFx0XHRuZ0RpYWxvZy5vcGVuKHtcblx0XHRcdFx0XHRcdFx0cGxhaW46IHRydWUsXG5cdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2RpYWxvZy1zYXZlIG5nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGVjayBncmVlbiBpY29uLWxhcmdlXCI+PC9zcGFuPjxzcGFuPllvdXIgbmV3IHRyYWRlc2hvdyBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseS4nICtcblx0XHRcdFx0XHRcdFx0JyAgQ2xvc2UgdGhpcyBtZXNzYWdlIGJveCB0byBwcm9jZWVkIHRvIHRoZSB0cmFkZXNob3dcXCdzIGVkaXQgcGFnZS48L3NwYW4+J1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5jbG9zZVByb21pc2Vcblx0XHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0Ly8gTmF2aWdhdGUgdG8gdGhlIG5ldyB0cmFkZXNob3cncyBFZGl0IHBhZ2Ugb24gZGlhbG9nIGNsb3NlXG5cdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygndHJhZGVzaG93RWRpdCcsIHtpZDogdHJhZGVzaG93X2lkfSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0XHR2bS5hZGRFcnJvck1lc3NhZ2UoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pKCk7XG4iLCIvKipcbiAqIFRyYWRlc2hvdyBFZGl0IENvbnRyb2xsZXJcbiAqIEBjbGFzcyBUcmFkZXNob3dEZXRhaWxDb250cm9sbGVyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIERpc3BsYXlzIGFuIGVkaXQgZm9ybSBmb3IgYSB0cmFkZXNob3dcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCd0cmFkZXNob3dEZXRhaWxDb250cm9sbGVyJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ1RyYWRlc2hvd0RldGFpbENvbnRyb2xsZXInLCBUcmFkZXNob3dEZXRhaWxDb250cm9sbGVyKTtcblxuXHRmdW5jdGlvbiBUcmFkZXNob3dEZXRhaWxDb250cm9sbGVyKCRzY29wZSwgJHEsICRodHRwLCBDYWNoZUZhY3RvcnksICRzdGF0ZSwgbmdEaWFsb2csIGxvZ2luU2VydmljZSxcblx0XHRidXN5U2VydmljZSwgbWVzc2FnZVNlcnZpY2UsIFRyYWRlc2hvdywgbGVhZFNlcnZpY2UsIHByb21pc2VkRGF0YSwgcHJvbWlzZWRMZWFkRGF0YSwgcHJvbWlzZWRGb3JtQ2FjaGUpXG5cdHtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0dm0uZGVsZXRlTGVhZCA9IGRlbGV0ZUxlYWQ7XG5cdFx0dm0uZ2V0TGVhZHMgPSBnZXRMZWFkcztcblx0XHR2bS5nb0JhY2sgPSBnb0JhY2s7XG5cdFx0dm0ucGx1Y2tMZWFkID0gcGx1Y2tMZWFkO1xuXHRcdHZtLnJlZnJlc2hMZWFkcyA9IHJlZnJlc2hMZWFkcztcblx0XHR2bS5zYXZlID0gc2F2ZTtcblx0XHR2bS51cGRhdGVQYWdpbmF0aW9uID0gdXBkYXRlUGFnaW5hdGlvbjtcblxuXHRcdHZtLmN1cnJlbnRQYWdlID0gcHJvbWlzZWRMZWFkRGF0YS5kYXRhLmN1cnJlbnRfcGFnZTtcblx0XHR2bS5mb3JtQ2FjaGUgPSBwcm9taXNlZEZvcm1DYWNoZTtcblx0XHR2bS5pc05ldyA9IGZhbHNlO1xuXHRcdHZtLmxhc3RGZXRjaGVkUGFnZSA9IDE7XG5cdFx0dm0ubGVhZHMgPSBwcm9taXNlZExlYWREYXRhLmRhdGEuZGF0YTtcblx0XHR2bS5vcmRlckJ5ID0gXCJ1cGRhdGVkX2F0XCI7XG5cdFx0dm0ub3JkZXJCeVJldmVyc2UgPSBcIjBcIjtcblx0XHR2bS5wZXJQYWdlID0gXCIxNVwiO1xuXHRcdHZtLnF1ZXJ5ID0gXCJcIjtcblx0XHR2bS50aXRsZVByZWZpeCA9IFwiRWRpdGluZ1wiO1xuXHRcdHZtLnRyYWRlc2hvdyA9IHByb21pc2VkRGF0YTtcblx0XHR2bS50b3RhbFBhZ2VzID0gcHJvbWlzZWRMZWFkRGF0YS5kYXRhLmxhc3RfcGFnZTtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHQvLy8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdC8vIFdhdGNoIHNjb3BlIHZhcmlhYmxlcyB0byB1cGRhdGUgY2FjaGVcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChbJ2N1cnJlbnRQYWdlJywgJ29yZGVyQnknLCAnb21nJywgJ29yZGVyQnlSZXZlcnNlJywgJ3BlclBhZ2UnLCAncXVlcnknXSwgZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdGlmICh2bS5mb3JtQ2FjaGUuZ2V0KGtleSkpIHtcblx0XHRcdFx0XHR2bVtrZXldID0gdm0uZm9ybUNhY2hlLmdldChrZXkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS4kd2F0Y2goJ2N0cmwuJyArIGtleSwgZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIG5ld1ZhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHQgICAgdm0uZm9ybUNhY2hlLnB1dChrZXksIG5ld1ZhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIERlbGV0ZSBhIGxlYWRcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkZWxldGVMZWFkKGxlYWRfaWQpIHtcblx0XHRcdGxlYWRTZXJ2aWNlLmRlbGV0ZUxlYWQoIHZtLnBsdWNrTGVhZChsZWFkX2lkKSApO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEdldCB0aGUgbGVhZHMgdXNpbmcgdGhlIGxlYWRTZXJ2aWNlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZ2V0TGVhZHMocGFnZU51bWJlcikge1xuXHRcdFx0aWYgKHBhZ2VOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRwYWdlTnVtYmVyID0gdm0uY3VycmVudFBhZ2U7XG5cdFx0XHR9XG5cdFx0XHR2bS5sYXN0RmV0Y2hlZFBhZ2UgPSBwYWdlTnVtYmVyO1xuXG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRsZWFkU2VydmljZVxuXHRcdFx0XHQucmV0cmlldmUoXG5cdFx0XHRcdFx0dm0udHJhZGVzaG93LmlkLFxuXHRcdFx0XHRcdHBhZ2VOdW1iZXIsXG5cdFx0XHRcdFx0dm0ucGVyUGFnZSxcblx0XHRcdFx0XHR2bS5vcmRlckJ5LFxuXHRcdFx0XHRcdHZtLm9yZGVyQnlSZXZlcnNlLFxuXHRcdFx0XHRcdHZtLnF1ZXJ5XG5cdFx0XHRcdClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdHZhciByZXNwb25zZSA9IHBheWxvYWQuZGF0YTtcblx0XHRcdFx0XHR2bS5sZWFkcyA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0dm0uY3VycmVudFBhZ2UgPSByZXNwb25zZS5jdXJyZW50X3BhZ2U7XG5cdFx0XHRcdFx0dm0udG90YWxQYWdlcyA9IHJlc3BvbnNlLmxhc3RfcGFnZTtcblxuXHRcdFx0XHRcdC8vIFJlc29sdmUgcHJvbWlzZVxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUocGF5bG9hZCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0Ly8gUmVqZWN0IHByb21pc2Vcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QocGF5bG9hZCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2FsbGJhY2sgdG8gJ2dvIGJhY2snIGJ1dHRvblxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGdvQmFjaygpIHtcblx0XHRcdCRzdGF0ZS5nbygndHJhZGVzaG93cycpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEZpbmQgYSBsZWFkIGluIHRoZSBsb2NhbCBhcnJheSBpbiBzY29wZSBieSBpZFxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHBsdWNrTGVhZChsZWFkX2lkKSB7XG5cdFx0XHRmb3IgKHZhciBuID0gMCwgbGVhZDsgKGxlYWQgPSB2bS5sZWFkc1tuXSk7IG4rKykge1xuXHRcdFx0XHRpZiAobGVhZC5pZCA9PSBsZWFkX2lkKSB7IHJldHVybiBsZWFkOyB9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogUmVmcmVzaCB0aGUgbGVhZHNcblx0XHQgKi9cblx0XHRmdW5jdGlvbiByZWZyZXNoTGVhZHMoKSB7XG5cdFx0XHR2bS5nZXRMZWFkcygpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHQvLyBQYWdlIG51bWJlciB3YXMgb3V0IG9mIHJhbmdlLCBmZXRjaGluZyBsYXN0IHBhZ2UgYXZhaWxhYmxlXG5cdFx0XHRcdGlmICh2bS5sYXN0RmV0Y2hlZFBhZ2UgPiBwYXlsb2FkLmRhdGEuY3VycmVudF9wYWdlKSB7XG5cdFx0XHRcdFx0dm0uZ2V0TGVhZHMocGF5bG9hZC5kYXRhLmxhc3RfcGFnZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFNhdmUgdGhlIGN1cnJlbnRseSBzY29wZWQgdHJhZGVzaG93IHVzaW5nIFRyYWRlc2hvdyByZXNvdXJjZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHNhdmUoKSB7XG5cdFx0XHRpZiAodm0udHJhZGVzaG93Rm9ybS4kdmFsaWQpIHtcblx0XHRcdFx0Ly8gQWx0ZXIgdGhlIFwiYnVzeVwiIGluZGljYXRvciBtZXNzYWdlXG5cdFx0XHRcdGJ1c3lTZXJ2aWNlLnNldE1lc3NhZ2UoJ1NhdmluZycpO1xuXG5cdFx0XHRcdC8vIFVzZSBUcmFkZXNob3cgcmVzb3VyY2UgdG8gc2F2ZSBjdXJyZW50bHkgc2NvcGVkIHRyYWRlc2hvd1xuXHRcdFx0XHRUcmFkZXNob3cuc2F2ZSh2bS50cmFkZXNob3cpLiRwcm9taXNlXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0Ly8gU2V0IHRoZSB0cmFkZXNob3cgaW4gc2NvcGVcblx0XHRcdFx0XHRcdHZtLnRyYWRlc2hvdyA9IHBheWxvYWQ7XG5cblx0XHRcdFx0XHRcdC8vIFNob3cgc3VjY2VzcyBhbGVydFxuXHRcdFx0XHRcdFx0dm0uYWRkU3VjY2Vzc01lc3NhZ2UoKTtcblxuXHRcdFx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuY2FjaGUucmVtb3ZlQWxsKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHRcdFx0Ly8gU2hvdyBlcnJvciBhbGVydFxuXHRcdFx0XHRcdFx0dm0uYWRkRXJyb3JNZXNzYWdlKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogRW5zdXJlIHdlIGRvbid0IGdvIG91dC1vZi1ib3VuZHNcblx0XHQgKi9cblx0XHRmdW5jdGlvbiB1cGRhdGVQYWdpbmF0aW9uKCkge1xuXHRcdFx0aWYgKHZtLmN1cnJlbnRQYWdlICE9IDEpIHtcblx0XHRcdFx0dm0uZ2V0TGVhZHMoMSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiLyoqXG4gKiBUcmFkZXNob3cgTGlzdCBDb250cm9sbGVyXG4gKiBAY2xhc3MgVHJhZGVzaG93TGlzdENvbnRyb2xsZXJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRGlzcGxheXMgYSBwYWdpbmF0ZWQsIGZpbHRlcmVkIHRhYmxlIG9mIGFsbCB0cmFkZXNob3dzLlxuICovXG5cbihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ3RyYWRlc2hvd0xpc3RDb250cm9sbGVyJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ1RyYWRlc2hvd0xpc3RDb250cm9sbGVyJywgVHJhZGVzaG93TGlzdENvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIFRyYWRlc2hvd0xpc3RDb250cm9sbGVyKCRzY29wZSwgJHEsICR0aW1lb3V0LCBDYWNoZUZhY3RvcnksIG5nRGlhbG9nLCBsb2dpblNlcnZpY2UsIGJ1c3lTZXJ2aWNlLCBtZXNzYWdlU2VydmljZSwgdHJhZGVzaG93U2VydmljZSwgbGVhZFNlcnZpY2UsIHByb21pc2VkRGF0YSwgcHJvbWlzZWRGb3JtQ2FjaGUpIHtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0dm0uZGVsZXRlVHJhZGVzaG93IFx0ID0gZGVsZXRlVHJhZGVzaG93O1xuXHRcdHZtLmRlbGV0ZUxlYWRcdFx0ID0gZGVsZXRlTGVhZDtcblx0XHR2bS5kb3dubG9hZFJlcG9ydCBcdCA9IGRvd25sb2FkUmVwb3J0O1xuXHRcdHZtLmdldExlYWRzIFx0XHQgPSBnZXRMZWFkcztcblx0XHR2bS5nZXRUcmFkZXNob3dzIFx0ID0gZ2V0VHJhZGVzaG93cztcblx0XHR2bS5wbHVja0xlYWRcdFx0ID0gcGx1Y2tMZWFkO1xuXHRcdHZtLnBsdWNrVHJhZGVzaG93IFx0ID0gcGx1Y2tUcmFkZXNob3c7XG5cdFx0dm0ucmVmcmVzaFRyYWRlc2hvd3MgPSByZWZyZXNoVHJhZGVzaG93cztcblxuXHRcdHZtLmN1cnJlbnRQYWdlIFx0XHQ9IHByb21pc2VkRGF0YS5kYXRhLmN1cnJlbnRfcGFnZTtcblx0XHR2bS5mb3JtQ2FjaGVcdFx0PSBwcm9taXNlZEZvcm1DYWNoZTtcblx0XHR2bS5sYXN0RmV0Y2hlZFBhZ2UgID0gMTtcblx0XHR2bS5vcmRlckJ5IFx0XHRcdD0gXCJ1cGRhdGVkX2F0XCI7XG5cdFx0dm0ub3JkZXJCeVJldmVyc2UgXHQ9IFwiMVwiO1xuXHRcdHZtLnBlclBhZ2UgXHRcdFx0PSBcIjE1XCI7XG5cdFx0dm0ucXVlcnkgXHRcdFx0PSBcIlwiO1xuXHRcdHZtLnRvdGFsUGFnZXNcdFx0PSBwcm9taXNlZERhdGEuZGF0YS5sYXN0X3BhZ2U7XG5cdFx0dm0udHJhZGVzaG93c1x0XHQ9IHByb21pc2VkRGF0YS5kYXRhLmRhdGE7XG5cblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0Ly8vLy8vLy8vXG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdC8vIFdhdGNoIHNjb3BlIHZhcmlhYmxlcyB0byB1cGRhdGUgY2FjaGVcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChbJ2N1cnJlbnRQYWdlJywgJ29yZGVyQnknLCAnb3JkZXJCeVJldmVyc2UnLCAncGVyUGFnZScsICdxdWVyeSddLCBmdW5jdGlvbih2YXJOYW1lKSB7XG5cdFx0XHRcdHZhciB2YWwgPSB2bS5mb3JtQ2FjaGUuZ2V0KHZhck5hbWUpO1xuXHRcdFx0XHRpZiAodmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0dm1bdmFyTmFtZV0gPSB2YWw7XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLiR3YXRjaCgnY3RybC4nICsgdmFyTmFtZSwgZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIG5ld1ZhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHQgICAgdm0uZm9ybUNhY2hlLnB1dCh2YXJOYW1lLCBuZXdWYWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIERlbGV0ZSBhIGxlYWRcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkZWxldGVMZWFkKGxlYWRfaWQpIHtcblx0XHRcdGxlYWRTZXJ2aWNlLmRlbGV0ZUxlYWQoIHZtLnBsdWNrTGVhZChsZWFkX2lkKSApO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIERlbGV0ZSBhIHRyYWRlc2hvdyB1c2luZyB0aGUgdHJhZGVzaG93IHNlcnZpY2Vcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkZWxldGVUcmFkZXNob3codHJhZGVzaG93X2lkKSB7XG5cdFx0XHR2YXIgdHJhZGVzaG93ID0gdm0ucGx1Y2tUcmFkZXNob3codHJhZGVzaG93X2lkKTtcblx0XHRcdHRyYWRlc2hvd1NlcnZpY2UuZGVsZXRlVHJhZGVzaG93KHRyYWRlc2hvdyk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGEgdHJhZGVzaG93IGhhcyBsZWFkcywgYW5kIHJvdXRlcyB1c2VyIHRvIFVSTCB0byBkb3dubG9hZCByZXBvcnRcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkb3dubG9hZFJlcG9ydCh0cmFkZXNob3dfaWQpIHtcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hcGkvdHJhZGVzaG93cy8nICsgdHJhZGVzaG93X2lkICsgJy9yZXBvcnQ/dG9rZW49JyArIGxvZ2luU2VydmljZS50b2tlbi5nZXQoKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBVc2UgbGVhZFNlcnZpY2UgdG8gZmV0Y2ggbGVhZHMgZm9yIHRoZSB0cmFkZXNob3dcblx0XHQgKi9cblx0XHQgZnVuY3Rpb24gZ2V0TGVhZHMocGFnZU51bWJlciwgdHJhZGVzaG93KSB7XG5cdFx0IFx0YnVzeVNlcnZpY2UuZm9yY2VIaWRlKCk7XG5cdFx0XHRpZiAodHJhZGVzaG93ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dHJhZGVzaG93ID0gdm0uc2VsZWN0ZWRUcmFkZXNob3c7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dm0uc2VsZWN0ZWRUcmFkZXNob3cgPSB0cmFkZXNob3c7XG5cdFx0XHR9XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0bGVhZFNlcnZpY2Vcblx0XHRcdFx0XHQucmV0cmlldmUodHJhZGVzaG93LmlkLCBwYWdlTnVtYmVyLCA1MCwgJ2lkJywgMClcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7XG5cdFx0XHRcdFx0XHRidXN5U2VydmljZS5mb3JjZUhpZGUodHJ1ZSk7XG5cdFx0XHRcdFx0XHR2YXIgcmVzcG9uc2UgPSBwYXlsb2FkLmRhdGE7XG5cblx0XHRcdFx0XHRcdHZtLmxlYWRzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRcdHZtLmxlYWRDdXJyZW50UGFnZSA9IHJlc3BvbnNlLmN1cnJlbnRfcGFnZTtcblx0XHRcdFx0XHRcdHZtLmxlYWRUb3RhbFBhZ2VzID0gcmVzcG9uc2UubGFzdF9wYWdlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRcdHZtLmFkZEVycm9yTWVzc2FnZSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogW2dldFRyYWRlc2hvd3MgdXNlIHRyYWRlc2hvd1NlcnZpY2UgdG8gZmV0Y2ggdHJhZGVzaG93c11cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBnZXRUcmFkZXNob3dzKHBhZ2VOdW1iZXIpIHtcblx0XHRcdGlmIChwYWdlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0cGFnZU51bWJlciA9IHZtLmN1cnJlbnRQYWdlO1xuXHRcdFx0fVxuXHRcdFx0dm0ubGFzdEZldGNoZWRQYWdlID0gcGFnZU51bWJlcjtcblxuXHRcdFx0YnVzeVNlcnZpY2Uuc2V0TWVzc2FnZSgnV29ya2luZyBvbiBpdCcpO1xuXG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHR0cmFkZXNob3dTZXJ2aWNlXG5cdFx0XHRcdC5yZXRyaWV2ZShcblx0XHRcdFx0XHRwYWdlTnVtYmVyLFxuXHRcdFx0XHRcdHZtLnBlclBhZ2UsXG5cdFx0XHRcdFx0dm0ub3JkZXJCeSxcblx0XHRcdFx0XHR2bS5vcmRlckJ5UmV2ZXJzZSxcblx0XHRcdFx0XHR2bS5xdWVyeVxuXHRcdFx0XHQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHR2YXIgcmVzcG9uc2UgPSBwYXlsb2FkLmRhdGE7XG5cblx0XHRcdFx0XHR2bS50cmFkZXNob3dzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHR2bS5jdXJyZW50UGFnZSA9IHJlc3BvbnNlLmN1cnJlbnRfcGFnZTtcblx0XHRcdFx0XHR2bS50b3RhbFBhZ2VzID0gcmVzcG9uc2UubGFzdF9wYWdlO1xuXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShwYXlsb2FkKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHBheWxvYWQpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QocGF5bG9hZCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogRmluZCBhIGxlYWQgaW4gdGhlIGxvY2FsIGFycmF5IGluIHNjb3BlIGJ5IGlkXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gcGx1Y2tMZWFkKGxlYWRfaWQpIHtcblx0XHRcdGZvciAodmFyIG4gPSAwLCBsZWFkOyAobGVhZCA9IHZtLmxlYWRzW25dKTsgbisrKSB7XG5cdFx0XHRcdGlmIChsZWFkLmlkID09IGxlYWRfaWQpIHsgcmV0dXJuIGxlYWQ7IH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBGaW5kIGEgdHJhZGVzaG93IGluIHRoZSBsb2NhbCBhcnJheSBieSBpZFxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHBsdWNrVHJhZGVzaG93KHRyYWRlc2hvd19pZCkge1xuXHRcdFx0Zm9yICh2YXIgbiA9IDAsIHRyYWRlc2hvdzsgKHRyYWRlc2hvdyA9IHZtLnRyYWRlc2hvd3Nbbl0pOyBuKyspIHtcblx0XHRcdFx0aWYgKHRyYWRlc2hvdy5pZCA9PSB0cmFkZXNob3dfaWQpIHsgcmV0dXJuIHRyYWRlc2hvdzsgfVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFtyZWZyZXNoVHJhZGVzaG93cyBDYWxscyBnZXRUcmFkZXNob3dzIHdpdGggdGhlIGN1cnJlbnRseSBzY29wZWQgcGFnZSBudW1iZXJdXG5cdFx0ICovXG5cdFx0IGZ1bmN0aW9uIHJlZnJlc2hUcmFkZXNob3dzKCkge1xuXHRcdFx0dm0uZ2V0VHJhZGVzaG93cygpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkge1xuXHRcdFx0XHQvLyBQYWdlIG51bWJlciB3YXMgb3V0IG9mIHJhbmdlLCBmZXRjaGluZyBsYXN0IHBhZ2UgYXZhaWxhYmxlXG5cdFx0XHRcdGlmICh2bS5sYXN0RmV0Y2hlZFBhZ2UgPiBwYXlsb2FkLmRhdGEuY3VycmVudF9wYWdlKSB7XG5cdFx0XHRcdFx0dm0uZ2V0VHJhZGVzaG93cyhwYXlsb2FkLmRhdGEubGFzdF9wYWdlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RzcG9ydGFsJywgW1xuICAgICAgICAvLyBDb250cmliXG4gICAgICAgICd1aS5yb3V0ZXInLFxuICAgICAgICAnYW5ndWxhci1qd3QnLFxuICAgICAgICAnYW5ndWxhci1jYWNoZScsXG4gICAgICAgICdhbmd1bGFyLXNwaW5raXQnLFxuICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgJ25nRGlhbG9nJyxcbiAgICAgICAgJ2ZyYXBvbnRpbGxvLmJvb3RzdHJhcC1zd2l0Y2gnLFxuICAgICAgICAnYW5ndWxhci1jaG9zZW4nLFxuXG4gICAgICAgIC8vIEFwcFxuICAgICAgICAndHNwb3J0YWxEaXJlY3RpdmVzJyxcbiAgICAgICAgJ2xvZ2luU2VydmljZScsXG4gICAgICAgICdidXN5U2VydmljZScsXG4gICAgICAgICdtZXNzYWdlU2VydmljZScsXG4gICAgICAgICdzbGlkZU1lbnVTZXJ2aWNlJyxcbiAgICAgICAgJ2F1dGhJbnRlcmNlcHRvcicsXG4gICAgICAgICdhdXRoQ29udHJvbGxlcnMnLFxuICAgICAgICAndHJhZGVzaG93Q3JlYXRlQ29udHJvbGxlcicsXG4gICAgICAgICd0cmFkZXNob3dEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgJ3RyYWRlc2hvd0xpc3RDb250cm9sbGVyJyxcbiAgICAgICAgJ3RyYWRlc2hvd1NlcnZpY2VzJyxcbiAgICAgICAgJ2xlYWRDb250cm9sbGVycycsXG4gICAgICAgICdsZWFkU2VydmljZXMnXG4gICAgXSlcbiAgICAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsIHNsaWRlTWVudVNlcnZpY2VQcm92aWRlcikge1xuICAgICAgICBzbGlkZU1lbnVTZXJ2aWNlUHJvdmlkZXIucmVnaXN0ZXJNZW51KCd0cmFkZXNob3cnLCB7XG4gICAgICAgICAgICB0aXRsZTogJ1RyYWRlc2hvdzxiciAvPjxzbWFsbD57e3RyYWRlc2hvdy5uYW1lfX08L3NtYWxsPicsXG4gICAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgICAgIGVkaXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAndHJhZGVzaG93cy97e3RyYWRlc2hvdy5pZH19L2VkaXQnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0VkaXQnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWxldGU6IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICdjdHJsLmRlbGV0ZVRyYWRlc2hvdyh0cmFkZXNob3cuaWQpJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXBvcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICdjdHJsLmRvd25sb2FkUmVwb3J0KHRyYWRlc2hvdy5pZCknLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0V4Y2VsIFJlcG9ydCcsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6ICd0cmFkZXNob3cubGVhZF9jb3VudCA+IDAnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVNZW51U2VydmljZVByb3ZpZGVyLnJlZ2lzdGVyTWVudSgnbGVhZCcsIHtcbiAgICAgICAgICAgIHRpdGxlOiAnTGVhZDxiciAvPjxzbWFsbD57e2xlYWQuZmlyc3RfbmFtZX19IHt7bGVhZC5sYXN0X25hbWV9fTwvc21hbGw+PGJyIC8+PHNtYWxsPnt7bGVhZC5lbWFpbF9hZGRyZXNzfX08L3NtYWxsPicsXG4gICAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgICAgIGVkaXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnbGVhZHMve3tsZWFkLmlkfX0vZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRWRpdCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlbGV0ZToge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogJ2N0cmwuZGVsZXRlTGVhZChsZWFkLmlkKScsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRGVsZXRlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgICRodHRwUHJvdmlkZXIudXNlTGVnYWN5UHJvbWlzZUV4dGVuc2lvbnMgPSBmYWxzZTtcblxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvYXV0aCcpO1xuXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLlxuICAgICAgICAgICAgc3RhdGUoJ2F1dGgnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2F1dGgnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vcGFydGlhbHMvbG9naW4tZm9ybS5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aENvbnRyb2xsZXIgYXMgY3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgc3RhdGUoJ2xvZ291dCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbG9nb3V0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTonJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9nb3V0Q29udHJvbGxlciBhcyBjdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBzdGF0ZSgndHJhZGVzaG93cycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvdHJhZGVzaG93cycsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuLi9wYXJ0aWFscy90cmFkZXNob3ctbGlzdC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVHJhZGVzaG93TGlzdENvbnRyb2xsZXIgYXMgY3RybCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlZERhdGE6IGZ1bmN0aW9uIHByb21pc2VkRGF0YSh0cmFkZXNob3dTZXJ2aWNlLCBDYWNoZUZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ2FjaGVGYWN0b3J5LmdldCgnZm9ybUNhY2hlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ2FjaGVGYWN0b3J5KCdmb3JtQ2FjaGUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAxMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlT25FeHBpcmU6ICdhZ2dyZXNzaXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VNb2RlOiAnbG9jYWxTdG9yYWdlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGUgPSBDYWNoZUZhY3RvcnkuZ2V0KCdmb3JtQ2FjaGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYWRlc2hvd1NlcnZpY2UucmV0cmlldmUoY2FjaGUuZ2V0KCdjdXJyZW50UGFnZScpLCBjYWNoZS5nZXQoJ3BlclBhZ2UnKSwgY2FjaGUuZ2V0KCdvcmRlckJ5JyksIGNhY2hlLmdldCgnb3JkZXJCeVJldmVyc2UnKSwgY2FjaGUuZ2V0KCdxdWVyeScpKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZWRGb3JtQ2FjaGU6IGZ1bmN0aW9uIHByb21pc2VkRm9ybUNhY2hlKENhY2hlRmFjdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ2FjaGVGYWN0b3J5LmdldCgnZm9ybUNhY2hlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHN0YXRlKCd0cmFkZXNob3dFZGl0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy90cmFkZXNob3dzLzppZC9lZGl0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3BhcnRpYWxzL3RyYWRlc2hvdy1kZXRhaWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RyYWRlc2hvd0RldGFpbENvbnRyb2xsZXIgYXMgY3RybCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlZERhdGE6IGZ1bmN0aW9uIHByb21pc2VkRGF0YShUcmFkZXNob3csICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJhZGVzaG93LmdldCh7aWQ6JHN0YXRlUGFyYW1zLmlkfSkuJHByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VkTGVhZERhdGE6IGZ1bmN0aW9uIHByb21pc2VkTGVhZERhdGEobGVhZFNlcnZpY2UsICRzdGF0ZVBhcmFtcywgQ2FjaGVGYWN0b3J5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGVLZXkgPSAndHJhZGVzaG93JyArICRzdGF0ZVBhcmFtcy5pZCArICdMZWFkc0Zvcm0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFDYWNoZUZhY3RvcnkuZ2V0KGNhY2hlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDYWNoZUZhY3RvcnkoY2FjaGVLZXksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEFnZTogNjAgKiA2MCAqIDEwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVPbkV4cGlyZTogJ2FnZ3Jlc3NpdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZU1vZGU6ICdsb2NhbFN0b3JhZ2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGUgPSBDYWNoZUZhY3RvcnkuZ2V0KGNhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsZWFkU2VydmljZS5yZXRyaWV2ZSgkc3RhdGVQYXJhbXMuaWQsIGNhY2hlLmdldCgnY3VycmVudFBhZ2UnKSwgY2FjaGUuZ2V0KCdwZXJQYWdlJyksIGNhY2hlLmdldCgnb3JkZXJCeScpLCBjYWNoZS5nZXQoJ29yZGVyQnlSZXZlcnNlJyksIGNhY2hlLmdldCgncXVlcnknKSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VkRm9ybUNhY2hlOiBmdW5jdGlvbiBwcm9taXNlZEZvcm1DYWNoZShDYWNoZUZhY3RvcnksICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlS2V5ID0gJ3RyYWRlc2hvdycgKyAkc3RhdGVQYXJhbXMuaWQgKyAnTGVhZHNGb3JtJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDYWNoZUZhY3RvcnkuZ2V0KGNhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgc3RhdGUoJ3RyYWRlc2hvd0NyZWF0ZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvdHJhZGVzaG93cy9jcmVhdGUnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vcGFydGlhbHMvdHJhZGVzaG93LWRldGFpbC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVHJhZGVzaG93Q3JlYXRlQ29udHJvbGxlciBhcyBjdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBzdGF0ZSgnbGVhZEVkaXQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOicvbGVhZHMvOmlkL2VkaXQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vcGFydGlhbHMvbGVhZC1kZXRhaWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0xlYWRDb250cm9sbGVyIGFzIGN0cmwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVhZERhdGE6IGZ1bmN0aW9uIGxlYWREYXRhKExlYWQsICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExlYWQuZ2V0KHtpZDokc3RhdGVQYXJhbXMuaWR9KS4kcHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH0pXG4gICAgLnJ1bihmdW5jdGlvbiAoJGh0dHAsIENhY2hlRmFjdG9yeSkge1xuICAgICAgaWYgKCFDYWNoZUZhY3RvcnkuZ2V0KCdkZWZhdWx0Q2FjaGUnKSkge1xuICAgICAgICBuZXcgQ2FjaGVGYWN0b3J5KCdkZWZhdWx0Q2FjaGUnLCB7XG4gICAgICAgICAgICBtYXhBZ2U6IDE1ICogNjAgKiAxMDAwLFxuICAgICAgICAgICAgY2FjaGVGbHVzaEludGVydmFsOiA2MCAqIDYwICogMTAwMCxcbiAgICAgICAgICAgIGRlbGV0ZU9uRXhwaXJlOiAnYWdncmVzc2l2ZSdcbiAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgJGh0dHAuZGVmYXVsdHMuY2FjaGUgPSBDYWNoZUZhY3RvcnkuZ2V0KCdkZWZhdWx0Q2FjaGUnKTtcbiAgICB9KVxuICAgIC5maWx0ZXIoJ3Vuc2FmZScsIGZ1bmN0aW9uKCRzY2UpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwodmFsKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
